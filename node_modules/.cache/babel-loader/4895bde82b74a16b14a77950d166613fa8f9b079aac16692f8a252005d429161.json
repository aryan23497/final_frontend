{"ast":null,"code":"// src/modules/AIRecommendationModule.js\nimport React,{useRef,useState}from\"react\";import\"./AIRecommendationModule.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const INITIAL_ASSISTANT_MSG={id:\"a-1\",role:\"assistant\",text:\"Hi, I’m the OASIS recommendation assistant. Tell me your scientific goal \"+\"(domain, region, time window, variables), and I’ll recommend datasets and workflows.\"};const AIRecommendationModule=()=>{const[messages,setMessages]=useState([INITIAL_ASSISTANT_MSG]);const[input,setInput]=useState(\"\");const[isSending,setIsSending]=useState(false);const textareaRef=useRef(null);const handleSend=()=>{const trimmed=input.trim();if(!trimmed||isSending)return;const userMsg={id:\"u-\".concat(Date.now()),role:\"user\",text:trimmed};setMessages(prev=>[...prev,userMsg]);setInput(\"\");setIsSending(true);// MOCK AI RESPONSE (backend → POST /chat later)\nsetTimeout(()=>{const mockAssistant={id:\"a-\".concat(Date.now()),role:\"assistant\",text:\"Here is a compact AI-generated plan:\\n\\n\"+\"• Use recent cruise CTD + nutrient transects.\\n\"+\"• Add weekly satellite SST & chlorophyll grids.\\n\"+\"• Overlay fisheries CPUE time series.\\n\\n\"+\"You can now open these datasets in the visualization module.\"};setMessages(prev=>[...prev,mockAssistant]);setIsSending(false);},500);};const handleKeyDown=e=>{if(e.key===\"Enter\"&&!e.shiftKey){e.preventDefault();handleSend();}};const handleUploadDataset=()=>{alert(\"Upload Dataset → POST /upload (prototype)\");};const handleRebuildMemory=()=>{alert(\"Rebuild Memory → POST /ingest and POST /embed (prototype)\");};const handleCopy=async text=>{await navigator.clipboard.writeText(text);};const handleEdit=text=>{var _textareaRef$current;setInput(text);(_textareaRef$current=textareaRef.current)===null||_textareaRef$current===void 0?void 0:_textareaRef$current.focus();};return/*#__PURE__*/_jsxs(\"div\",{className:\"harbor-layout\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"harbor-header\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"harbor-title\",children:\"Harbor \\xB7 Research Chat\"}),/*#__PURE__*/_jsx(\"p\",{className:\"harbor-subtitle\",children:\"Ask scientific questions and receive AI-powered dataset and workflow recommendations.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"harbor-header-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn harbor-btn-secondary\",onClick:handleUploadDataset,children:\"Upload Dataset\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn harbor-btn-primary\",onClick:handleRebuildMemory,children:\"Rebuild Memory\"})]})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"harbor-panel harbor-chat-panel-full\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"harbor-chat-window\",children:messages.map(msg=>/*#__PURE__*/_jsx(\"div\",{className:\"harbor-bubble-row harbor-bubble-row-\".concat(msg.role),children:/*#__PURE__*/_jsxs(\"div\",{className:\"harbor-bubble harbor-bubble-\".concat(msg.role),children:[/*#__PURE__*/_jsx(\"span\",{className:\"harbor-bubble-author\",children:msg.role===\"user\"?\"Scientist\":\"Harbor · OASIS AI\"}),/*#__PURE__*/_jsx(\"p\",{className:\"harbor-bubble-text\",children:msg.text.split(\"\\n\").map((line,i)=>/*#__PURE__*/_jsxs(\"span\",{children:[line,/*#__PURE__*/_jsx(\"br\",{})]},i))}),/*#__PURE__*/_jsx(\"div\",{className:\"harbor-bubble-footer\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"harbor-bubble-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"harbor-icon-btn\",onClick:()=>handleCopy(msg.text),children:\"Copy\"}),/*#__PURE__*/_jsx(\"button\",{className:\"harbor-icon-btn\",onClick:()=>handleEdit(msg.text),children:\"Edit\"})]})})]})},msg.id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"harbor-input-bar\",children:[/*#__PURE__*/_jsx(\"textarea\",{ref:textareaRef,className:\"harbor-input\",placeholder:\"Describe your scientific analysis...\",value:input,onChange:e=>setInput(e.target.value),onKeyDown:handleKeyDown,rows:2}),/*#__PURE__*/_jsx(\"button\",{className:\"btn harbor-send-btn\",onClick:handleSend,disabled:isSending,children:isSending?\"Thinking…\":\"Send\"})]})]})]});};export default AIRecommendationModule;","map":{"version":3,"names":["React","useRef","useState","jsx","_jsx","jsxs","_jsxs","INITIAL_ASSISTANT_MSG","id","role","text","AIRecommendationModule","messages","setMessages","input","setInput","isSending","setIsSending","textareaRef","handleSend","trimmed","trim","userMsg","concat","Date","now","prev","setTimeout","mockAssistant","handleKeyDown","e","key","shiftKey","preventDefault","handleUploadDataset","alert","handleRebuildMemory","handleCopy","navigator","clipboard","writeText","handleEdit","_textareaRef$current","current","focus","className","children","onClick","map","msg","split","line","i","ref","placeholder","value","onChange","target","onKeyDown","rows","disabled"],"sources":["C:/Users/Aryan/Desktop/SIH/final_frontend/src/modules/AIRecommendationModule.js"],"sourcesContent":["// src/modules/AIRecommendationModule.js\r\nimport React, { useRef, useState } from \"react\";\r\nimport \"./AIRecommendationModule.css\";\r\n\r\nconst INITIAL_ASSISTANT_MSG = {\r\n  id: \"a-1\",\r\n  role: \"assistant\",\r\n  text:\r\n    \"Hi, I’m the OASIS recommendation assistant. Tell me your scientific goal \" +\r\n    \"(domain, region, time window, variables), and I’ll recommend datasets and workflows.\",\r\n};\r\n\r\nconst AIRecommendationModule = () => {\r\n  const [messages, setMessages] = useState([INITIAL_ASSISTANT_MSG]);\r\n  const [input, setInput] = useState(\"\");\r\n  const [isSending, setIsSending] = useState(false);\r\n  const textareaRef = useRef(null);\r\n\r\n  const handleSend = () => {\r\n    const trimmed = input.trim();\r\n    if (!trimmed || isSending) return;\r\n\r\n    const userMsg = {\r\n      id: `u-${Date.now()}`,\r\n      role: \"user\",\r\n      text: trimmed,\r\n    };\r\n\r\n    setMessages((prev) => [...prev, userMsg]);\r\n    setInput(\"\");\r\n    setIsSending(true);\r\n\r\n    // MOCK AI RESPONSE (backend → POST /chat later)\r\n    setTimeout(() => {\r\n      const mockAssistant = {\r\n        id: `a-${Date.now()}`,\r\n        role: \"assistant\",\r\n        text:\r\n          \"Here is a compact AI-generated plan:\\n\\n\" +\r\n          \"• Use recent cruise CTD + nutrient transects.\\n\" +\r\n          \"• Add weekly satellite SST & chlorophyll grids.\\n\" +\r\n          \"• Overlay fisheries CPUE time series.\\n\\n\" +\r\n          \"You can now open these datasets in the visualization module.\",\r\n      };\r\n\r\n      setMessages((prev) => [...prev, mockAssistant]);\r\n      setIsSending(false);\r\n    }, 500);\r\n  };\r\n\r\n  const handleKeyDown = (e) => {\r\n    if (e.key === \"Enter\" && !e.shiftKey) {\r\n      e.preventDefault();\r\n      handleSend();\r\n    }\r\n  };\r\n\r\n  const handleUploadDataset = () => {\r\n    alert(\"Upload Dataset → POST /upload (prototype)\");\r\n  };\r\n\r\n  const handleRebuildMemory = () => {\r\n    alert(\"Rebuild Memory → POST /ingest and POST /embed (prototype)\");\r\n  };\r\n\r\n  const handleCopy = async (text) => {\r\n    await navigator.clipboard.writeText(text);\r\n  };\r\n\r\n  const handleEdit = (text) => {\r\n    setInput(text);\r\n    textareaRef.current?.focus();\r\n  };\r\n\r\n  return (\r\n    <div className=\"harbor-layout\">\r\n\r\n      {/* HEADER */}\r\n      <header className=\"harbor-header\">\r\n        <div>\r\n          <h2 className=\"harbor-title\">Harbor · Research Chat</h2>\r\n          <p className=\"harbor-subtitle\">\r\n            Ask scientific questions and receive AI-powered dataset and workflow recommendations.\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"harbor-header-actions\">\r\n          <button className=\"btn harbor-btn-secondary\" onClick={handleUploadDataset}>\r\n            Upload Dataset\r\n          </button>\r\n          <button className=\"btn harbor-btn-primary\" onClick={handleRebuildMemory}>\r\n            Rebuild Memory\r\n          </button>\r\n        </div>\r\n      </header>\r\n\r\n      {/* FULL PAGE CHAT PANEL */}\r\n      <section className=\"harbor-panel harbor-chat-panel-full\">\r\n\r\n        <div className=\"harbor-chat-window\">\r\n          {messages.map((msg) => (\r\n            <div\r\n              key={msg.id}\r\n              className={`harbor-bubble-row harbor-bubble-row-${msg.role}`}\r\n            >\r\n              <div className={`harbor-bubble harbor-bubble-${msg.role}`}>\r\n                <span className=\"harbor-bubble-author\">\r\n                  {msg.role === \"user\" ? \"Scientist\" : \"Harbor · OASIS AI\"}\r\n                </span>\r\n\r\n                <p className=\"harbor-bubble-text\">\r\n                  {msg.text.split(\"\\n\").map((line, i) => (\r\n                    <span key={i}>\r\n                      {line}\r\n                      <br />\r\n                    </span>\r\n                  ))}\r\n                </p>\r\n\r\n                {/* COPY / EDIT CONTROLS */}\r\n                <div className=\"harbor-bubble-footer\">\r\n                  <div className=\"harbor-bubble-actions\">\r\n                    <button\r\n                      className=\"harbor-icon-btn\"\r\n                      onClick={() => handleCopy(msg.text)}\r\n                    >\r\n                      Copy\r\n                    </button>\r\n                    <button\r\n                      className=\"harbor-icon-btn\"\r\n                      onClick={() => handleEdit(msg.text)}\r\n                    >\r\n                      Edit\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* INPUT BAR */}\r\n        <div className=\"harbor-input-bar\">\r\n          <textarea\r\n            ref={textareaRef}\r\n            className=\"harbor-input\"\r\n            placeholder=\"Describe your scientific analysis...\"\r\n            value={input}\r\n            onChange={(e) => setInput(e.target.value)}\r\n            onKeyDown={handleKeyDown}\r\n            rows={2}\r\n          />\r\n          <button\r\n            className=\"btn harbor-send-btn\"\r\n            onClick={handleSend}\r\n            disabled={isSending}\r\n          >\r\n            {isSending ? \"Thinking…\" : \"Send\"}\r\n          </button>\r\n        </div>\r\n      </section>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AIRecommendationModule;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}