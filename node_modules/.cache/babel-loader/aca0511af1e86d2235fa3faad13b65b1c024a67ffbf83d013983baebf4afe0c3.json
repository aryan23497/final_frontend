{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Aryan\\\\Desktop\\\\SIH\\\\final_frontend\\\\src\\\\modules\\\\CloudDataServerModule.js\",\n  _s = $RefreshSig$();\n// src/modules/CloudDataServerModule.js\nimport React, { useState, useMemo, useEffect } from \"react\";\nimport \"./CloudDataServerModule.css\";\n\n/**\r\n * CloudDataServerModule (fixed)\r\n *\r\n * Improvements:\r\n * - If the API call accidentally returns HTML (e.g. index.html from CRA dev server),\r\n *   the module will automatically retry the request against the fallback backend\r\n *   at http://127.0.0.1:8000 and use that JSON response if available.\r\n * - Shows a small debug banner indicating which base URL was used.\r\n * - Forces fresh fetches (cache: \"no-store\") and defensively checks Content-Type\r\n *   before calling resp.json() to avoid JSON.parse errors.\r\n *\r\n * NOTE: For production, set apiBase explicitly to your backend URL (or configure dev proxy).\r\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DOMAINS = [{\n  id: \"oceanography\",\n  label: \"Oceanography\",\n  description: \"CTD, nutrients, currents, satellite SST & Chl-a grids.\"\n}, {\n  id: \"biodiversity\",\n  label: \"Biodiversity\",\n  description: \"Species diversity, ecosystem assessments, biodiversity indices.\"\n}, {\n  id: \"molecular\",\n  label: \"Molecular / eDNA\",\n  description: \"DNA barcodes, eDNA reads, metabarcoding matrices.\"\n}, {\n  id: \"taxonomy\",\n  label: \"Taxonomy & Systematics\",\n  description: \"Species checklists, occurrence tables, reference libraries.\"\n}];\n\n// fallback backend to try when same-origin returns HTML (index.html)\nconst DEFAULT_BACKEND = \"http://127.0.0.1:8000\";\nexport default function CloudDataServerModule({\n  apiBase = \"\"\n}) {\n  _s();\n  // active domain state\n  const [activeDomain, setActiveDomain] = useState(\"oceanography\");\n\n  // datasets list returned by backend for activeDomain (array of base names)\n  const [datasets, setDatasets] = useState([]);\n  const [loadingDatasets, setLoadingDatasets] = useState(false);\n\n  // presign results keyed by dataset name\n  const [presigns, setPresigns] = useState({});\n\n  // loading states for individual presign requests\n  const [loadingPresign, setLoadingPresign] = useState({});\n\n  // error banner\n  const [error, setError] = useState(null);\n\n  // debug: which base url last used (\"same-origin\" or backend host)\n  const [lastApiUsed, setLastApiUsed] = useState(null);\n  // whether fallback is allowed (prevent infinite retries)\n  const [triedFallbackThisCall, setTriedFallbackThisCall] = useState(false);\n  const activeDomainMeta = useMemo(() => DOMAINS.find(d => d.id === activeDomain), [activeDomain]);\n  useEffect(() => {\n    // load datasets when activeDomain changes\n    listDatasets(activeDomain);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [activeDomain]);\n\n  // Helper to build URLs with whichever apiBase chosen\n  function buildUrl(base, path) {\n    // trim trailing slash from base\n    if (!base) return path;\n    return base.replace(/\\/+$/, \"\") + (path.startsWith(\"/\") ? path : \"/\" + path);\n  }\n\n  // Generic fetch wrapper:\n  //  - Attempts same-origin or provided apiBase\n  //  - If response content-type is text/html, optionally retries against DEFAULT_BACKEND\n  //  - Returns { ok: boolean, status, contentType, json?, text?, usedBase }\n  async function safeFetch(pathOrFullUrl, opts = {}) {\n    const explicitFullUrl = pathOrFullUrl.startsWith(\"http://\") || pathOrFullUrl.startsWith(\"https://\");\n    const sameOriginBase = apiBase || \"\"; // empty means same-origin\n    const primaryUrl = explicitFullUrl ? pathOrFullUrl : buildUrl(sameOriginBase, pathOrFullUrl);\n    // Try primary\n    try {\n      var _opts$cache;\n      const primaryResp = await fetch(primaryUrl, {\n        ...opts,\n        cache: (_opts$cache = opts.cache) !== null && _opts$cache !== void 0 ? _opts$cache : \"no-store\"\n      });\n      const ct = primaryResp.headers.get(\"content-type\") || \"\";\n      if (ct.includes(\"text/html\")) {\n        // If server returned HTML (likely index.html from frontend dev server), fallback once\n        // only if we haven't already tried fallback for this call\n        if (!triedFallbackThisCall) {\n          // mark we've tried fallback for this call (so requestAccess/listDatasets won't loop)\n          setTriedFallbackThisCall(true);\n          // try fallback backend\n          const fallbackUrl = explicitFullUrl ? pathOrFullUrl : buildUrl(DEFAULT_BACKEND, pathOrFullUrl);\n          try {\n            var _opts$cache2;\n            const fallbackResp = await fetch(fallbackUrl, {\n              ...opts,\n              cache: (_opts$cache2 = opts.cache) !== null && _opts$cache2 !== void 0 ? _opts$cache2 : \"no-store\"\n            });\n            const fct = fallbackResp.headers.get(\"content-type\") || \"\";\n            if (fct.includes(\"application/json\")) {\n              const json = await fallbackResp.json();\n              setLastApiUsed(fallbackUrl);\n              setTriedFallbackThisCall(false);\n              return {\n                ok: fallbackResp.ok,\n                status: fallbackResp.status,\n                contentType: fct,\n                json,\n                usedBase: fallbackUrl\n              };\n            } else {\n              const text = await fallbackResp.text();\n              setLastApiUsed(fallbackUrl);\n              setTriedFallbackThisCall(false);\n              return {\n                ok: fallbackResp.ok,\n                status: fallbackResp.status,\n                contentType: fct,\n                text,\n                usedBase: fallbackUrl\n              };\n            }\n          } catch (fbErr) {\n            setTriedFallbackThisCall(false);\n            // Return primary's HTML response indication to caller (so it can show debug)\n            const primaryText = await primaryResp.text();\n            setLastApiUsed(primaryUrl);\n            return {\n              ok: primaryResp.ok,\n              status: primaryResp.status,\n              contentType: ct,\n              text: primaryText,\n              usedBase: primaryUrl,\n              error: fbErr\n            };\n          }\n        } else {\n          // already tried fallback; just return the primary HTML response\n          const primaryText = await primaryResp.text();\n          setLastApiUsed(primaryUrl);\n          setTriedFallbackThisCall(false);\n          return {\n            ok: primaryResp.ok,\n            status: primaryResp.status,\n            contentType: ct,\n            text: primaryText,\n            usedBase: primaryUrl\n          };\n        }\n      } else if (ct.includes(\"application/json\")) {\n        const json = await primaryResp.json();\n        setLastApiUsed(primaryUrl);\n        setTriedFallbackThisCall(false);\n        return {\n          ok: primaryResp.ok,\n          status: primaryResp.status,\n          contentType: ct,\n          json,\n          usedBase: primaryUrl\n        };\n      } else {\n        // other content types: attempt to read text\n        const text = await primaryResp.text();\n        setLastApiUsed(primaryUrl);\n        setTriedFallbackThisCall(false);\n        return {\n          ok: primaryResp.ok,\n          status: primaryResp.status,\n          contentType: ct,\n          text,\n          usedBase: primaryUrl\n        };\n      }\n    } catch (err) {\n      // Network error when hitting primary; as a last resort try fallback once\n      if (!triedFallbackThisCall) {\n        setTriedFallbackThisCall(true);\n        try {\n          var _opts$cache3;\n          const fallbackUrl = explicitFullUrl ? pathOrFullUrl : buildUrl(DEFAULT_BACKEND, pathOrFullUrl);\n          const fallbackResp = await fetch(fallbackUrl, {\n            ...opts,\n            cache: (_opts$cache3 = opts.cache) !== null && _opts$cache3 !== void 0 ? _opts$cache3 : \"no-store\"\n          });\n          const fct = fallbackResp.headers.get(\"content-type\") || \"\";\n          if (fct.includes(\"application/json\")) {\n            const json = await fallbackResp.json();\n            setLastApiUsed(fallbackUrl);\n            setTriedFallbackThisCall(false);\n            return {\n              ok: fallbackResp.ok,\n              status: fallbackResp.status,\n              contentType: fct,\n              json,\n              usedBase: fallbackUrl\n            };\n          } else {\n            const text = await fallbackResp.text();\n            setLastApiUsed(fallbackUrl);\n            setTriedFallbackThisCall(false);\n            return {\n              ok: fallbackResp.ok,\n              status: fallbackResp.status,\n              contentType: fct,\n              text,\n              usedBase: fallbackUrl\n            };\n          }\n        } catch (fbErr) {\n          setTriedFallbackThisCall(false);\n          return {\n            ok: false,\n            status: 0,\n            error: fbErr,\n            usedBase: null\n          };\n        }\n      }\n      return {\n        ok: false,\n        status: 0,\n        error: err,\n        usedBase: null\n      };\n    }\n  }\n\n  /**\r\n   * listDatasets\r\n   * - Uses safeFetch wrapper which will retry backend fallback if same-origin returns HTML\r\n   * - Provides helpful error messages on failure\r\n   */\n  async function listDatasets(domain) {\n    setError(null);\n    setLoadingDatasets(true);\n    setDatasets([]);\n    try {\n      const apiPath = `/api/datasets/${encodeURIComponent(domain)}`;\n      const result = await safeFetch(apiPath, {\n        method: \"GET\"\n      });\n\n      // set debug banner of which base used\n      if (result.usedBase) setLastApiUsed(result.usedBase);\n      if (!result.ok) {\n        // show any text if present\n        const bodyText = result.text || JSON.stringify(result.json) || \"\";\n        throw new Error(`List failed: ${result.status} ${bodyText}`);\n      }\n      if (result.contentType && result.contentType.includes(\"application/json\") && Array.isArray(result.json)) {\n        setDatasets(result.json);\n        return;\n      }\n\n      // if JSON not returned, but text was returned (e.g., index.html), show as debug\n      if (result.text) {\n        throw new Error(`Expected JSON but server returned content-type=${result.contentType} body=${result.text.substring(0, 2000)}`);\n      }\n\n      // fallback empty\n      setDatasets([]);\n    } catch (err) {\n      console.error(\"listDatasets error:\", err);\n      setError(err.message || \"Failed to list datasets\");\n    } finally {\n      setLoadingDatasets(false);\n    }\n  }\n  async function requestAccess(domain, dataset) {\n    setError(null);\n    setLoadingPresign(p => ({\n      ...p,\n      [dataset]: true\n    }));\n    try {\n      const apiPath = `/api/presign`;\n      const result = await safeFetch(apiPath, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          domain,\n          dataset,\n          expires_in: 300\n        })\n      });\n      if (result.usedBase) setLastApiUsed(result.usedBase);\n      if (!result.ok) {\n        const body = result.text || JSON.stringify(result.json) || \"\";\n        throw new Error(`Presign failed: ${result.status} ${body}`);\n      }\n      if (result.contentType && result.contentType.includes(\"application/json\") && result.json) {\n        setPresigns(p => ({\n          ...p,\n          [dataset]: result.json\n        }));\n        return;\n      }\n      if (result.text) {\n        throw new Error(`Presign response not JSON: ${result.text}`);\n      }\n      throw new Error(\"Unknown presign error\");\n    } catch (err) {\n      console.error(\"requestAccess error:\", err);\n      setError(err.message || \"Failed to request access\");\n    } finally {\n      setLoadingPresign(p => ({\n        ...p,\n        [dataset]: false\n      }));\n    }\n  }\n\n  // small helper render for access controls\n  function AccessControls({\n    domain,\n    dataset\n  }) {\n    const presign = presigns[dataset] || null;\n    const requesting = !!loadingPresign[dataset];\n    if (!presign) {\n      return /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"btn cloud-btn-view\",\n        onClick: () => requestAccess(domain, dataset),\n        disabled: requesting,\n        children: requesting ? \"Requesting…\" : \"Request access\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 9\n      }, this);\n    }\n    const {\n      raw_url,\n      curated_url,\n      metadata_url\n    } = presign || {};\n    const missing = (presign === null || presign === void 0 ? void 0 : presign.missing) || [];\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"access-buttons\",\n      role: \"group\",\n      \"aria-label\": `access-${dataset}`,\n      children: [raw_url ? /*#__PURE__*/_jsxDEV(\"a\", {\n        className: \"access-btn\",\n        href: raw_url,\n        target: \"_blank\",\n        rel: \"noreferrer\",\n        download: true,\n        title: \"Download raw file\",\n        children: \"Raw\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"access-btn disabled\",\n        \"aria-disabled\": \"true\",\n        title: \"Raw not available\",\n        children: \"Raw\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 11\n      }, this), curated_url ? /*#__PURE__*/_jsxDEV(\"a\", {\n        className: \"access-btn\",\n        href: curated_url,\n        target: \"_blank\",\n        rel: \"noreferrer\",\n        download: true,\n        title: \"Download curated file\",\n        children: \"Curated\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"access-btn disabled\",\n        \"aria-disabled\": \"true\",\n        title: \"Curated not available\",\n        children: \"Curated\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 11\n      }, this), metadata_url ? /*#__PURE__*/_jsxDEV(\"a\", {\n        className: \"access-btn\",\n        href: metadata_url,\n        target: \"_blank\",\n        rel: \"noreferrer\",\n        download: true,\n        title: \"Download metadata\",\n        children: \"Metadata\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"access-btn disabled\",\n        \"aria-disabled\": \"true\",\n        title: \"Metadata not available\",\n        children: \"Metadata\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"cloud-layout\",\n    children: [lastApiUsed && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: \"#071226\",\n        color: \"#fbbf24\",\n        padding: 8,\n        borderRadius: 6,\n        marginBottom: 8\n      },\n      children: [\"Using API: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n        style: {\n          color: \"#fff\"\n        },\n        children: lastApiUsed\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 22\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"cloud-domain-grid\",\n      role: \"tablist\",\n      \"aria-label\": \"domains\",\n      children: DOMAINS.map(dom => /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: dom.id === activeDomain ? \"cloud-domain-card cloud-domain-card-active\" : \"cloud-domain-card\",\n        onClick: () => setActiveDomain(dom.id),\n        \"aria-pressed\": dom.id === activeDomain,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cloud-domain-label\",\n          children: dom.label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"cloud-domain-desc\",\n          children: dom.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 13\n        }, this)]\n      }, dom.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"cloud-datasets-panel\",\n      \"aria-live\": \"polite\",\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        className: \"cloud-datasets-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"cloud-datasets-title\",\n            children: (activeDomainMeta === null || activeDomainMeta === void 0 ? void 0 : activeDomainMeta.label) || \"Selected domain\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"cloud-datasets-subtitle\",\n            children: loadingDatasets ? \"Loading datasets…\" : `${datasets.length} dataset${datasets.length !== 1 ? \"s\" : \"\"} registered`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cloud-datasets-meta\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"cloud-chip\",\n            children: [\"Node group:\", \" \", activeDomain === \"oceanography\" ? \"OCN-*\" : activeDomain === \"biodiversity\" ? \"BIO-*\" : activeDomain === \"molecular\" ? \"MOL-*\" : \"TAX-*\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cloud-dataset-list\",\n        children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: \"salmon\",\n            padding: 8,\n            fontWeight: 600\n          },\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 13\n        }, this), datasets.length === 0 && !loadingDatasets && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cloud-empty-state\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"cloud-empty-title\",\n            children: \"No datasets registered\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"cloud-empty-text\",\n            children: \"This domain does not have any datasets yet in the Cloud Data Server. Once ingestion pipelines are configured, they will appear here.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 13\n        }, this), datasets.map(name => /*#__PURE__*/_jsxDEV(\"article\", {\n          className: \"cloud-dataset-card\",\n          \"aria-label\": `dataset-${name}`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cloud-dataset-main\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"cloud-dataset-name\",\n              children: name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 397,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"cloud-dataset-type\",\n              children: \"Dataset\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 398,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cloud-dataset-tags\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cloud-pill cloud-pill-domain\",\n                children: activeDomainMeta === null || activeDomainMeta === void 0 ? void 0 : activeDomainMeta.label\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 401,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cloud-pill status-online\",\n                children: \"Status: Online\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 402,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 400,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cloud-dataset-meta\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"cloud-meta-line\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cloud-meta-label\",\n                children: \"Access:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 407,\n                columnNumber: 48\n              }, this), \" Controlled\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 407,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"cloud-meta-line\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cloud-meta-label\",\n                children: \"Updated:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 408,\n                columnNumber: 48\n              }, this), \" \\u2014\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 408,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(AccessControls, {\n              domain: activeDomain,\n              dataset: name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 411,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn cloud-btn-view\",\n              style: {\n                marginTop: 8\n              },\n              onClick: () => alert(`Open dataset detail for ${name}`),\n              children: \"View dataset\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 413,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 15\n          }, this)]\n        }, name, true, {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 329,\n    columnNumber: 5\n  }, this);\n}\n_s(CloudDataServerModule, \"MCpdeLHvl059K34B242nRE0phwY=\");\n_c = CloudDataServerModule;\nvar _c;\n$RefreshReg$(_c, \"CloudDataServerModule\");","map":{"version":3,"names":["React","useState","useMemo","useEffect","jsxDEV","_jsxDEV","DOMAINS","id","label","description","DEFAULT_BACKEND","CloudDataServerModule","apiBase","_s","activeDomain","setActiveDomain","datasets","setDatasets","loadingDatasets","setLoadingDatasets","presigns","setPresigns","loadingPresign","setLoadingPresign","error","setError","lastApiUsed","setLastApiUsed","triedFallbackThisCall","setTriedFallbackThisCall","activeDomainMeta","find","d","listDatasets","buildUrl","base","path","replace","startsWith","safeFetch","pathOrFullUrl","opts","explicitFullUrl","sameOriginBase","primaryUrl","_opts$cache","primaryResp","fetch","cache","ct","headers","get","includes","fallbackUrl","_opts$cache2","fallbackResp","fct","json","ok","status","contentType","usedBase","text","fbErr","primaryText","err","_opts$cache3","domain","apiPath","encodeURIComponent","result","method","bodyText","JSON","stringify","Error","Array","isArray","substring","console","message","requestAccess","dataset","p","body","expires_in","AccessControls","presign","requesting","type","className","onClick","disabled","children","fileName","_jsxFileName","lineNumber","columnNumber","raw_url","curated_url","metadata_url","missing","role","href","target","rel","download","title","style","background","color","padding","borderRadius","marginBottom","map","dom","length","fontWeight","name","marginTop","alert","_c","$RefreshReg$"],"sources":["C:/Users/Aryan/Desktop/SIH/final_frontend/src/modules/CloudDataServerModule.js"],"sourcesContent":["// src/modules/CloudDataServerModule.js\r\nimport React, { useState, useMemo, useEffect } from \"react\";\r\nimport \"./CloudDataServerModule.css\";\r\n\r\n/**\r\n * CloudDataServerModule (fixed)\r\n *\r\n * Improvements:\r\n * - If the API call accidentally returns HTML (e.g. index.html from CRA dev server),\r\n *   the module will automatically retry the request against the fallback backend\r\n *   at http://127.0.0.1:8000 and use that JSON response if available.\r\n * - Shows a small debug banner indicating which base URL was used.\r\n * - Forces fresh fetches (cache: \"no-store\") and defensively checks Content-Type\r\n *   before calling resp.json() to avoid JSON.parse errors.\r\n *\r\n * NOTE: For production, set apiBase explicitly to your backend URL (or configure dev proxy).\r\n */\r\n\r\nconst DOMAINS = [\r\n  {\r\n    id: \"oceanography\",\r\n    label: \"Oceanography\",\r\n    description: \"CTD, nutrients, currents, satellite SST & Chl-a grids.\",\r\n  },\r\n  {\r\n    id: \"biodiversity\",\r\n    label: \"Biodiversity\",\r\n    description: \"Species diversity, ecosystem assessments, biodiversity indices.\",\r\n  },\r\n  {\r\n    id: \"molecular\",\r\n    label: \"Molecular / eDNA\",\r\n    description: \"DNA barcodes, eDNA reads, metabarcoding matrices.\",\r\n  },\r\n  {\r\n    id: \"taxonomy\",\r\n    label: \"Taxonomy & Systematics\",\r\n    description: \"Species checklists, occurrence tables, reference libraries.\",\r\n  },\r\n];\r\n\r\n// fallback backend to try when same-origin returns HTML (index.html)\r\nconst DEFAULT_BACKEND = \"http://127.0.0.1:8000\";\r\n\r\nexport default function CloudDataServerModule({ apiBase = \"\" }) {\r\n  // active domain state\r\n  const [activeDomain, setActiveDomain] = useState(\"oceanography\");\r\n\r\n  // datasets list returned by backend for activeDomain (array of base names)\r\n  const [datasets, setDatasets] = useState([]);\r\n  const [loadingDatasets, setLoadingDatasets] = useState(false);\r\n\r\n  // presign results keyed by dataset name\r\n  const [presigns, setPresigns] = useState({});\r\n\r\n  // loading states for individual presign requests\r\n  const [loadingPresign, setLoadingPresign] = useState({});\r\n\r\n  // error banner\r\n  const [error, setError] = useState(null);\r\n\r\n  // debug: which base url last used (\"same-origin\" or backend host)\r\n  const [lastApiUsed, setLastApiUsed] = useState(null);\r\n  // whether fallback is allowed (prevent infinite retries)\r\n  const [triedFallbackThisCall, setTriedFallbackThisCall] = useState(false);\r\n\r\n  const activeDomainMeta = useMemo(\r\n    () => DOMAINS.find((d) => d.id === activeDomain),\r\n    [activeDomain]\r\n  );\r\n\r\n  useEffect(() => {\r\n    // load datasets when activeDomain changes\r\n    listDatasets(activeDomain);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [activeDomain]);\r\n\r\n  // Helper to build URLs with whichever apiBase chosen\r\n  function buildUrl(base, path) {\r\n    // trim trailing slash from base\r\n    if (!base) return path;\r\n    return base.replace(/\\/+$/, \"\") + (path.startsWith(\"/\") ? path : \"/\" + path);\r\n  }\r\n\r\n  // Generic fetch wrapper:\r\n  //  - Attempts same-origin or provided apiBase\r\n  //  - If response content-type is text/html, optionally retries against DEFAULT_BACKEND\r\n  //  - Returns { ok: boolean, status, contentType, json?, text?, usedBase }\r\n  async function safeFetch(pathOrFullUrl, opts = {}) {\r\n    const explicitFullUrl = pathOrFullUrl.startsWith(\"http://\") || pathOrFullUrl.startsWith(\"https://\");\r\n    const sameOriginBase = apiBase || \"\"; // empty means same-origin\r\n    const primaryUrl = explicitFullUrl ? pathOrFullUrl : buildUrl(sameOriginBase, pathOrFullUrl);\r\n    // Try primary\r\n    try {\r\n      const primaryResp = await fetch(primaryUrl, { ...opts, cache: opts.cache ?? \"no-store\" });\r\n      const ct = primaryResp.headers.get(\"content-type\") || \"\";\r\n      if (ct.includes(\"text/html\")) {\r\n        // If server returned HTML (likely index.html from frontend dev server), fallback once\r\n        // only if we haven't already tried fallback for this call\r\n        if (!triedFallbackThisCall) {\r\n          // mark we've tried fallback for this call (so requestAccess/listDatasets won't loop)\r\n          setTriedFallbackThisCall(true);\r\n          // try fallback backend\r\n          const fallbackUrl = explicitFullUrl ? pathOrFullUrl : buildUrl(DEFAULT_BACKEND, pathOrFullUrl);\r\n          try {\r\n            const fallbackResp = await fetch(fallbackUrl, { ...opts, cache: opts.cache ?? \"no-store\" });\r\n            const fct = fallbackResp.headers.get(\"content-type\") || \"\";\r\n            if (fct.includes(\"application/json\")) {\r\n              const json = await fallbackResp.json();\r\n              setLastApiUsed(fallbackUrl);\r\n              setTriedFallbackThisCall(false);\r\n              return { ok: fallbackResp.ok, status: fallbackResp.status, contentType: fct, json, usedBase: fallbackUrl };\r\n            } else {\r\n              const text = await fallbackResp.text();\r\n              setLastApiUsed(fallbackUrl);\r\n              setTriedFallbackThisCall(false);\r\n              return { ok: fallbackResp.ok, status: fallbackResp.status, contentType: fct, text, usedBase: fallbackUrl };\r\n            }\r\n          } catch (fbErr) {\r\n            setTriedFallbackThisCall(false);\r\n            // Return primary's HTML response indication to caller (so it can show debug)\r\n            const primaryText = await primaryResp.text();\r\n            setLastApiUsed(primaryUrl);\r\n            return { ok: primaryResp.ok, status: primaryResp.status, contentType: ct, text: primaryText, usedBase: primaryUrl, error: fbErr };\r\n          }\r\n        } else {\r\n          // already tried fallback; just return the primary HTML response\r\n          const primaryText = await primaryResp.text();\r\n          setLastApiUsed(primaryUrl);\r\n          setTriedFallbackThisCall(false);\r\n          return { ok: primaryResp.ok, status: primaryResp.status, contentType: ct, text: primaryText, usedBase: primaryUrl };\r\n        }\r\n      } else if (ct.includes(\"application/json\")) {\r\n        const json = await primaryResp.json();\r\n        setLastApiUsed(primaryUrl);\r\n        setTriedFallbackThisCall(false);\r\n        return { ok: primaryResp.ok, status: primaryResp.status, contentType: ct, json, usedBase: primaryUrl };\r\n      } else {\r\n        // other content types: attempt to read text\r\n        const text = await primaryResp.text();\r\n        setLastApiUsed(primaryUrl);\r\n        setTriedFallbackThisCall(false);\r\n        return { ok: primaryResp.ok, status: primaryResp.status, contentType: ct, text, usedBase: primaryUrl };\r\n      }\r\n    } catch (err) {\r\n      // Network error when hitting primary; as a last resort try fallback once\r\n      if (!triedFallbackThisCall) {\r\n        setTriedFallbackThisCall(true);\r\n        try {\r\n          const fallbackUrl = explicitFullUrl ? pathOrFullUrl : buildUrl(DEFAULT_BACKEND, pathOrFullUrl);\r\n          const fallbackResp = await fetch(fallbackUrl, { ...opts, cache: opts.cache ?? \"no-store\" });\r\n          const fct = fallbackResp.headers.get(\"content-type\") || \"\";\r\n          if (fct.includes(\"application/json\")) {\r\n            const json = await fallbackResp.json();\r\n            setLastApiUsed(fallbackUrl);\r\n            setTriedFallbackThisCall(false);\r\n            return { ok: fallbackResp.ok, status: fallbackResp.status, contentType: fct, json, usedBase: fallbackUrl };\r\n          } else {\r\n            const text = await fallbackResp.text();\r\n            setLastApiUsed(fallbackUrl);\r\n            setTriedFallbackThisCall(false);\r\n            return { ok: fallbackResp.ok, status: fallbackResp.status, contentType: fct, text, usedBase: fallbackUrl };\r\n          }\r\n        } catch (fbErr) {\r\n          setTriedFallbackThisCall(false);\r\n          return { ok: false, status: 0, error: fbErr, usedBase: null };\r\n        }\r\n      }\r\n      return { ok: false, status: 0, error: err, usedBase: null };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * listDatasets\r\n   * - Uses safeFetch wrapper which will retry backend fallback if same-origin returns HTML\r\n   * - Provides helpful error messages on failure\r\n   */\r\n  async function listDatasets(domain) {\r\n    setError(null);\r\n    setLoadingDatasets(true);\r\n    setDatasets([]);\r\n    try {\r\n      const apiPath = `/api/datasets/${encodeURIComponent(domain)}`;\r\n      const result = await safeFetch(apiPath, { method: \"GET\" });\r\n\r\n      // set debug banner of which base used\r\n      if (result.usedBase) setLastApiUsed(result.usedBase);\r\n\r\n      if (!result.ok) {\r\n        // show any text if present\r\n        const bodyText = result.text || JSON.stringify(result.json) || \"\";\r\n        throw new Error(`List failed: ${result.status} ${bodyText}`);\r\n      }\r\n\r\n      if (result.contentType && result.contentType.includes(\"application/json\") && Array.isArray(result.json)) {\r\n        setDatasets(result.json);\r\n        return;\r\n      }\r\n\r\n      // if JSON not returned, but text was returned (e.g., index.html), show as debug\r\n      if (result.text) {\r\n        throw new Error(`Expected JSON but server returned content-type=${result.contentType} body=${result.text.substring(0, 2000)}`);\r\n      }\r\n\r\n      // fallback empty\r\n      setDatasets([]);\r\n    } catch (err) {\r\n      console.error(\"listDatasets error:\", err);\r\n      setError(err.message || \"Failed to list datasets\");\r\n    } finally {\r\n      setLoadingDatasets(false);\r\n    }\r\n  }\r\n\r\n  async function requestAccess(domain, dataset) {\r\n    setError(null);\r\n    setLoadingPresign((p) => ({ ...p, [dataset]: true }));\r\n    try {\r\n      const apiPath = `/api/presign`;\r\n      const result = await safeFetch(apiPath, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ domain, dataset, expires_in: 300 }),\r\n      });\r\n\r\n      if (result.usedBase) setLastApiUsed(result.usedBase);\r\n\r\n      if (!result.ok) {\r\n        const body = result.text || JSON.stringify(result.json) || \"\";\r\n        throw new Error(`Presign failed: ${result.status} ${body}`);\r\n      }\r\n\r\n      if (result.contentType && result.contentType.includes(\"application/json\") && result.json) {\r\n        setPresigns((p) => ({ ...p, [dataset]: result.json }));\r\n        return;\r\n      }\r\n\r\n      if (result.text) {\r\n        throw new Error(`Presign response not JSON: ${result.text}`);\r\n      }\r\n\r\n      throw new Error(\"Unknown presign error\");\r\n    } catch (err) {\r\n      console.error(\"requestAccess error:\", err);\r\n      setError(err.message || \"Failed to request access\");\r\n    } finally {\r\n      setLoadingPresign((p) => ({ ...p, [dataset]: false }));\r\n    }\r\n  }\r\n\r\n  // small helper render for access controls\r\n  function AccessControls({ domain, dataset }) {\r\n    const presign = presigns[dataset] || null;\r\n    const requesting = !!loadingPresign[dataset];\r\n\r\n    if (!presign) {\r\n      return (\r\n        <button\r\n          type=\"button\"\r\n          className=\"btn cloud-btn-view\"\r\n          onClick={() => requestAccess(domain, dataset)}\r\n          disabled={requesting}\r\n        >\r\n          {requesting ? \"Requesting…\" : \"Request access\"}\r\n        </button>\r\n      );\r\n    }\r\n\r\n    const { raw_url, curated_url, metadata_url } = presign || {};\r\n    const missing = presign?.missing || [];\r\n\r\n    return (\r\n      <div className=\"access-buttons\" role=\"group\" aria-label={`access-${dataset}`}>\r\n        {raw_url ? (\r\n          <a\r\n            className=\"access-btn\"\r\n            href={raw_url}\r\n            target=\"_blank\"\r\n            rel=\"noreferrer\"\r\n            download\r\n            title=\"Download raw file\"\r\n          >\r\n            Raw\r\n          </a>\r\n        ) : (\r\n          <button className=\"access-btn disabled\" aria-disabled=\"true\" title=\"Raw not available\">\r\n            Raw\r\n          </button>\r\n        )}\r\n\r\n        {curated_url ? (\r\n          <a\r\n            className=\"access-btn\"\r\n            href={curated_url}\r\n            target=\"_blank\"\r\n            rel=\"noreferrer\"\r\n            download\r\n            title=\"Download curated file\"\r\n          >\r\n            Curated\r\n          </a>\r\n        ) : (\r\n          <button className=\"access-btn disabled\" aria-disabled=\"true\" title=\"Curated not available\">\r\n            Curated\r\n          </button>\r\n        )}\r\n\r\n        {metadata_url ? (\r\n          <a\r\n            className=\"access-btn\"\r\n            href={metadata_url}\r\n            target=\"_blank\"\r\n            rel=\"noreferrer\"\r\n            download\r\n            title=\"Download metadata\"\r\n          >\r\n            Metadata\r\n          </a>\r\n        ) : (\r\n          <button className=\"access-btn disabled\" aria-disabled=\"true\" title=\"Metadata not available\">\r\n            Metadata\r\n          </button>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"cloud-layout\">\r\n      {/* small debug banner telling which API base was used */}\r\n      {lastApiUsed && (\r\n        <div style={{ background: \"#071226\", color: \"#fbbf24\", padding: 8, borderRadius: 6, marginBottom: 8 }}>\r\n          Using API: <strong style={{ color: \"#fff\" }}>{lastApiUsed}</strong>\r\n        </div>\r\n      )}\r\n\r\n      {/* Domains grid */}\r\n      <section className=\"cloud-domain-grid\" role=\"tablist\" aria-label=\"domains\">\r\n        {DOMAINS.map((dom) => (\r\n          <button\r\n            key={dom.id}\r\n            type=\"button\"\r\n            className={dom.id === activeDomain ? \"cloud-domain-card cloud-domain-card-active\" : \"cloud-domain-card\"}\r\n            onClick={() => setActiveDomain(dom.id)}\r\n            aria-pressed={dom.id === activeDomain}\r\n          >\r\n            <div className=\"cloud-domain-label\">{dom.label}</div>\r\n            <p className=\"cloud-domain-desc\">{dom.description}</p>\r\n          </button>\r\n        ))}\r\n      </section>\r\n\r\n      {/* Datasets panel */}\r\n      <section className=\"cloud-datasets-panel\" aria-live=\"polite\">\r\n        <header className=\"cloud-datasets-header\">\r\n          <div>\r\n            <h3 className=\"cloud-datasets-title\">{activeDomainMeta?.label || \"Selected domain\"}</h3>\r\n            <p className=\"cloud-datasets-subtitle\">\r\n              {loadingDatasets ? \"Loading datasets…\" : `${datasets.length} dataset${datasets.length !== 1 ? \"s\" : \"\"} registered`}\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"cloud-datasets-meta\">\r\n            <span className=\"cloud-chip\">\r\n              Node group:{\" \"}\r\n              {activeDomain === \"oceanography\"\r\n                ? \"OCN-*\"\r\n                : activeDomain === \"biodiversity\"\r\n                ? \"BIO-*\"\r\n                : activeDomain === \"molecular\"\r\n                ? \"MOL-*\"\r\n                : \"TAX-*\"}\r\n            </span>\r\n          </div>\r\n        </header>\r\n\r\n        <div className=\"cloud-dataset-list\">\r\n          {error && (\r\n            <div style={{ color: \"salmon\", padding: 8, fontWeight: 600 }}>\r\n              {error}\r\n            </div>\r\n          )}\r\n\r\n          {datasets.length === 0 && !loadingDatasets && (\r\n            <div className=\"cloud-empty-state\">\r\n              <p className=\"cloud-empty-title\">No datasets registered</p>\r\n              <p className=\"cloud-empty-text\">\r\n                This domain does not have any datasets yet in the Cloud Data Server.\r\n                Once ingestion pipelines are configured, they will appear here.\r\n              </p>\r\n            </div>\r\n          )}\r\n\r\n          {datasets.map((name) => (\r\n            <article key={name} className=\"cloud-dataset-card\" aria-label={`dataset-${name}`}>\r\n              <div className=\"cloud-dataset-main\">\r\n                <h4 className=\"cloud-dataset-name\">{name}</h4>\r\n                <p className=\"cloud-dataset-type\">Dataset</p>\r\n\r\n                <div className=\"cloud-dataset-tags\">\r\n                  <span className=\"cloud-pill cloud-pill-domain\">{activeDomainMeta?.label}</span>\r\n                  <span className=\"cloud-pill status-online\">Status: Online</span>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"cloud-dataset-meta\">\r\n                <p className=\"cloud-meta-line\"><span className=\"cloud-meta-label\">Access:</span> Controlled</p>\r\n                <p className=\"cloud-meta-line\"><span className=\"cloud-meta-label\">Updated:</span> —</p>\r\n\r\n                {/* Access controls (Request access -> presign -> download buttons) */}\r\n                <AccessControls domain={activeDomain} dataset={name} />\r\n\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"btn cloud-btn-view\"\r\n                  style={{ marginTop: 8 }}\r\n                  onClick={() => alert(`Open dataset detail for ${name}`)}\r\n                >\r\n                  View dataset\r\n                </button>\r\n              </div>\r\n            </article>\r\n          ))}\r\n        </div>\r\n      </section>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}