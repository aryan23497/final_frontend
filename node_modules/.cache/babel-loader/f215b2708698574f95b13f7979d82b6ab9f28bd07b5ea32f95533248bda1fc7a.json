{"ast":null,"code":"import React,{useState,useEffect,useCallback,useMemo,useRef}from\"react\";import\"./VisualizationTool.css\";import axios from\"axios\";/**\r\n * VisualizationTool (full-width map / plot)\r\n *\r\n * - No separate \"Data & Filters\" panel anymore.\r\n * - A single \"Generate plot\" button requests a plot from the backend\r\n *   using default parameters (domain, time range, axes, plot_type).\r\n * - Backend endpoint: /ocean/plot (update URL as needed).\r\n */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const VisualizationTool=()=>{// ----------- core state -----------\nconst[timeRange]=useState(\"last7\");// fixed default\nconst[time1,setTime1]=useState(\"\");const[time2,setTime2]=useState(\"\");const[vizParams]=useState({independentVariable:\"Time\",parameters:[\"SST\"]});const[plotType]=useState(\"line\");// fixed default\nconst[imageUrl,setImageUrl]=useState(null);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const controllerRef=useRef(null);const mountedRef=useRef(true);// ----------- lifecycle cleanup -----------\nuseEffect(()=>{mountedRef.current=true;return()=>{mountedRef.current=false;if(controllerRef.current){try{controllerRef.current.abort();}catch(e){}}if(imageUrl){try{URL.revokeObjectURL(imageUrl);}catch(e){}}};// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);// ----------- date helpers -----------\nconst toDDMMYYYY=useCallback(d=>{const dt=new Date(d);const yyyy=dt.getFullYear();const mm=String(dt.getMonth()+1).padStart(2,\"0\");const dd=String(dt.getDate()).padStart(2,\"0\");return\"\".concat(dd,\"/\").concat(mm,\"/\").concat(yyyy);},[]);const setLastNDays=useCallback(n=>{const now=new Date();const endStr=toDDMMYYYY(now);const start=new Date(now);start.setDate(start.getDate()-n);const startStr=toDDMMYYYY(start);setTime1(startStr);setTime2(endStr);},[toDDMMYYYY]);// initialise last 7 days once\nuseEffect(()=>{setLastNDays(7);},[setLastNDays]);const toYYYYMMDD=useCallback(ddmmyyyy=>{if(!ddmmyyyy)return\"\";const parts=ddmmyyyy.split(\"/\");if(parts.length!==3)return ddmmyyyy;const[dd,mm,yyyy]=parts;return\"\".concat(yyyy,\"-\").concat(mm,\"-\").concat(dd);},[]);// ----------- field mapping -----------\nconst fieldMap=useMemo(()=>({Time:\"datetime\",Latitude:\"lat\",Longitude:\"lon\",DIC:\"dic\",MLD:\"mld\",PCO2_ORIGINAL:\"pco2_original\",CHL:\"chl\",NO3:\"no3\",SSS:\"sss\",SST:\"sst\",DEVIANT_UNCERTAINTY:\"deviant_uncertainty\"}),[]);// ----------- build payload for backend -----------\nconst buildPayloadAndParams=useCallback(()=>{const parameters=vizParams.parameters||[];const start_date=toYYYYMMDD(time1);const end_date=toYYYYMMDD(time2);const x_axis=fieldMap[vizParams.independentVariable]||vizParams.independentVariable;const y_axes=parameters.map(p=>fieldMap[p]||p);const body={start_date,end_date,time_range:timeRange,x_axis,y_axes,x_label:vizParams.independentVariable,y_labels:parameters,plot_type:plotType};const params={start_date,end_date,plot_type:plotType,x:x_axis,y:y_axes.length?y_axes[0]:\"\",format:\"png\"};return{body,params};},[vizParams,time1,time2,timeRange,fieldMap,toYYYYMMDD,plotType]);// ----------- request image -----------\nconst handleGeneratePlot=useCallback(async()=>{setError(null);const parameters=vizParams.parameters||[];if(!parameters||parameters.length===0){setError(new Error(\"No Y parameter configured.\"));return;}if(imageUrl){try{URL.revokeObjectURL(imageUrl);}catch(e){}setImageUrl(null);}setLoading(true);const backendUrl=\"http://192.168.137.121:8000/ocean/plot\";// update if needed\nconst{body,params}=buildPayloadAndParams();if(controllerRef.current){try{controllerRef.current.abort();}catch(e){}}const controller=new AbortController();controllerRef.current=controller;try{var _resp;const postConfig={responseType:\"blob\",timeout:45000,signal:controller.signal,headers:{\"Content-Type\":\"application/json\",Accept:\"image/png, image/jpeg, application/octet-stream\"}};let resp;try{resp=await axios.post(backendUrl,body,postConfig);}catch(postErr){var _postErr$response;if((postErr===null||postErr===void 0?void 0:(_postErr$response=postErr.response)===null||_postErr$response===void 0?void 0:_postErr$response.status)===405){const getConfig={responseType:\"blob\",timeout:45000,signal:controller.signal,headers:{Accept:\"image/png, image/jpeg, application/octet-stream\"},params};resp=await axios.get(backendUrl,getConfig);}else{throw postErr;}}if(!mountedRef.current)return;const blob=(_resp=resp)===null||_resp===void 0?void 0:_resp.data;if(!blob){throw new Error(\"No binary data received from server.\");}const url=URL.createObjectURL(blob);setImageUrl(url);setError(null);}catch(err){var _axios$isCancel;if(!mountedRef.current)return;if((_axios$isCancel=axios.isCancel)!==null&&_axios$isCancel!==void 0&&_axios$isCancel.call(axios,err)){console.log(\"Plot request cancelled\");}else{console.error(\"Failed to fetch image:\",err);if(err.response){setError(new Error(\"Server returned \".concat(err.response.status,\": \").concat(err.response.statusText)));}else if(err.request){setError(new Error(\"No response from server. Check that the backend is running and CORS is configured.\"));}else{setError(new Error(err.message||\"Unknown error\"));}}}finally{if(mountedRef.current)setLoading(false);}},[vizParams,imageUrl,buildPayloadAndParams]);// ----------- JSX -----------\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"viz-layout viz-full-layout\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"viz-panel viz-panel-main\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"viz-panel-header\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"viz-panel-title\",children:\"Map / Plot View\"}),/*#__PURE__*/_jsx(\"p\",{className:\"viz-panel-text\",children:\"The backend returns a plot image (PNG/JPEG) for the configured oceanographic query. It will be displayed here when ready.\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"viz-map-placeholder\",children:imageUrl?/*#__PURE__*/_jsx(\"img\",{src:imageUrl,alt:\"Generated plot\",className:\"viz-plot-image\"}):loading?/*#__PURE__*/_jsx(\"div\",{className:\"viz-map-message\",children:\"Generating image\\u2026\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"viz-map-message\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Spatial visualization / plot will appear here.\"}),/*#__PURE__*/_jsx(\"small\",{children:\"Click \\u201CGenerate plot\\u201D to request an image.\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"viz-main-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"viz-generate-btn\",onClick:handleGeneratePlot,disabled:loading,children:loading?\"Generating…\":\"Generate plot\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"viz-error\",children:error.message||\"Failed to generate image.\"})]})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"viz-panel viz-panel-bottom\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"viz-panel-title\",children:\"Time Series & Indicators\"}),/*#__PURE__*/_jsx(\"p\",{className:\"viz-panel-text\",children:\"Summary metrics (static placeholders for now).\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"viz-metrics-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"viz-metric-card\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"viz-metric-label\",children:\"SST (\\xB0C)\"}),/*#__PURE__*/_jsx(\"p\",{className:\"viz-metric-value\",children:\"27.3\"}),/*#__PURE__*/_jsx(\"p\",{className:\"viz-metric-note\",children:\"Near long-term average.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"viz-metric-card\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"viz-metric-label\",children:\"Chl-a (mg/m\\xB3)\"}),/*#__PURE__*/_jsx(\"p\",{className:\"viz-metric-value\",children:\"0.8\"}),/*#__PURE__*/_jsx(\"p\",{className:\"viz-metric-note\",children:\"Elevated coastal bloom.\"})]})]})]})]});};export default VisualizationTool;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useMemo","useRef","axios","jsx","_jsx","jsxs","_jsxs","VisualizationTool","timeRange","time1","setTime1","time2","setTime2","vizParams","independentVariable","parameters","plotType","imageUrl","setImageUrl","loading","setLoading","error","setError","controllerRef","mountedRef","current","abort","e","URL","revokeObjectURL","toDDMMYYYY","d","dt","Date","yyyy","getFullYear","mm","String","getMonth","padStart","dd","getDate","concat","setLastNDays","n","now","endStr","start","setDate","startStr","toYYYYMMDD","ddmmyyyy","parts","split","length","fieldMap","Time","Latitude","Longitude","DIC","MLD","PCO2_ORIGINAL","CHL","NO3","SSS","SST","DEVIANT_UNCERTAINTY","buildPayloadAndParams","start_date","end_date","x_axis","y_axes","map","p","body","time_range","x_label","y_labels","plot_type","params","x","y","format","handleGeneratePlot","Error","backendUrl","controller","AbortController","_resp","postConfig","responseType","timeout","signal","headers","Accept","resp","post","postErr","_postErr$response","response","status","getConfig","get","blob","data","url","createObjectURL","err","_axios$isCancel","isCancel","call","console","log","statusText","request","message","className","children","src","alt","type","onClick","disabled"],"sources":["C:/Users/Aryan/Desktop/SIH/final_frontend/src/modules/VisualizationTool.js"],"sourcesContent":["import React, {\r\n  useState,\r\n  useEffect,\r\n  useCallback,\r\n  useMemo,\r\n  useRef,\r\n} from \"react\";\r\nimport \"./VisualizationTool.css\";\r\nimport axios from \"axios\";\r\n\r\n/**\r\n * VisualizationTool (full-width map / plot)\r\n *\r\n * - No separate \"Data & Filters\" panel anymore.\r\n * - A single \"Generate plot\" button requests a plot from the backend\r\n *   using default parameters (domain, time range, axes, plot_type).\r\n * - Backend endpoint: /ocean/plot (update URL as needed).\r\n */\r\n\r\nconst VisualizationTool = () => {\r\n  // ----------- core state -----------\r\n  const [timeRange] = useState(\"last7\"); // fixed default\r\n  const [time1, setTime1] = useState(\"\");\r\n  const [time2, setTime2] = useState(\"\");\r\n\r\n  const [vizParams] = useState({\r\n    independentVariable: \"Time\",\r\n    parameters: [\"SST\"],\r\n  });\r\n\r\n  const [plotType] = useState(\"line\"); // fixed default\r\n\r\n  const [imageUrl, setImageUrl] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const controllerRef = useRef(null);\r\n  const mountedRef = useRef(true);\r\n\r\n  // ----------- lifecycle cleanup -----------\r\n  useEffect(() => {\r\n    mountedRef.current = true;\r\n    return () => {\r\n      mountedRef.current = false;\r\n      if (controllerRef.current) {\r\n        try {\r\n          controllerRef.current.abort();\r\n        } catch (e) {}\r\n      }\r\n      if (imageUrl) {\r\n        try {\r\n          URL.revokeObjectURL(imageUrl);\r\n        } catch (e) {}\r\n      }\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  // ----------- date helpers -----------\r\n  const toDDMMYYYY = useCallback((d) => {\r\n    const dt = new Date(d);\r\n    const yyyy = dt.getFullYear();\r\n    const mm = String(dt.getMonth() + 1).padStart(2, \"0\");\r\n    const dd = String(dt.getDate()).padStart(2, \"0\");\r\n    return `${dd}/${mm}/${yyyy}`;\r\n  }, []);\r\n\r\n  const setLastNDays = useCallback(\r\n    (n) => {\r\n      const now = new Date();\r\n      const endStr = toDDMMYYYY(now);\r\n      const start = new Date(now);\r\n      start.setDate(start.getDate() - n);\r\n      const startStr = toDDMMYYYY(start);\r\n      setTime1(startStr);\r\n      setTime2(endStr);\r\n    },\r\n    [toDDMMYYYY]\r\n  );\r\n\r\n  // initialise last 7 days once\r\n  useEffect(() => {\r\n    setLastNDays(7);\r\n  }, [setLastNDays]);\r\n\r\n  const toYYYYMMDD = useCallback((ddmmyyyy) => {\r\n    if (!ddmmyyyy) return \"\";\r\n    const parts = ddmmyyyy.split(\"/\");\r\n    if (parts.length !== 3) return ddmmyyyy;\r\n    const [dd, mm, yyyy] = parts;\r\n    return `${yyyy}-${mm}-${dd}`;\r\n  }, []);\r\n\r\n  // ----------- field mapping -----------\r\n  const fieldMap = useMemo(\r\n    () => ({\r\n      Time: \"datetime\",\r\n      Latitude: \"lat\",\r\n      Longitude: \"lon\",\r\n      DIC: \"dic\",\r\n      MLD: \"mld\",\r\n      PCO2_ORIGINAL: \"pco2_original\",\r\n      CHL: \"chl\",\r\n      NO3: \"no3\",\r\n      SSS: \"sss\",\r\n      SST: \"sst\",\r\n      DEVIANT_UNCERTAINTY: \"deviant_uncertainty\",\r\n    }),\r\n    []\r\n  );\r\n\r\n  // ----------- build payload for backend -----------\r\n  const buildPayloadAndParams = useCallback(() => {\r\n    const parameters = vizParams.parameters || [];\r\n    const start_date = toYYYYMMDD(time1);\r\n    const end_date = toYYYYMMDD(time2);\r\n    const x_axis =\r\n      fieldMap[vizParams.independentVariable] ||\r\n      vizParams.independentVariable;\r\n    const y_axes = parameters.map((p) => fieldMap[p] || p);\r\n\r\n    const body = {\r\n      start_date,\r\n      end_date,\r\n      time_range: timeRange,\r\n      x_axis,\r\n      y_axes,\r\n      x_label: vizParams.independentVariable,\r\n      y_labels: parameters,\r\n      plot_type: plotType,\r\n    };\r\n\r\n    const params = {\r\n      start_date,\r\n      end_date,\r\n      plot_type: plotType,\r\n      x: x_axis,\r\n      y: y_axes.length ? y_axes[0] : \"\",\r\n      format: \"png\",\r\n    };\r\n\r\n    return { body, params };\r\n  }, [vizParams, time1, time2, timeRange, fieldMap, toYYYYMMDD, plotType]);\r\n\r\n  // ----------- request image -----------\r\n  const handleGeneratePlot = useCallback(async () => {\r\n    setError(null);\r\n\r\n    const parameters = vizParams.parameters || [];\r\n    if (!parameters || parameters.length === 0) {\r\n      setError(new Error(\"No Y parameter configured.\"));\r\n      return;\r\n    }\r\n\r\n    if (imageUrl) {\r\n      try {\r\n        URL.revokeObjectURL(imageUrl);\r\n      } catch (e) {}\r\n      setImageUrl(null);\r\n    }\r\n\r\n    setLoading(true);\r\n\r\n    const backendUrl = \"http://192.168.137.121:8000/ocean/plot\"; // update if needed\r\n    const { body, params } = buildPayloadAndParams();\r\n\r\n    if (controllerRef.current) {\r\n      try {\r\n        controllerRef.current.abort();\r\n      } catch (e) {}\r\n    }\r\n    const controller = new AbortController();\r\n    controllerRef.current = controller;\r\n\r\n    try {\r\n      const postConfig = {\r\n        responseType: \"blob\",\r\n        timeout: 45000,\r\n        signal: controller.signal,\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Accept: \"image/png, image/jpeg, application/octet-stream\",\r\n        },\r\n      };\r\n\r\n      let resp;\r\n      try {\r\n        resp = await axios.post(backendUrl, body, postConfig);\r\n      } catch (postErr) {\r\n        if (postErr?.response?.status === 405) {\r\n          const getConfig = {\r\n            responseType: \"blob\",\r\n            timeout: 45000,\r\n            signal: controller.signal,\r\n            headers: {\r\n              Accept: \"image/png, image/jpeg, application/octet-stream\",\r\n            },\r\n            params,\r\n          };\r\n          resp = await axios.get(backendUrl, getConfig);\r\n        } else {\r\n          throw postErr;\r\n        }\r\n      }\r\n\r\n      if (!mountedRef.current) return;\r\n\r\n      const blob = resp?.data;\r\n      if (!blob) {\r\n        throw new Error(\"No binary data received from server.\");\r\n      }\r\n\r\n      const url = URL.createObjectURL(blob);\r\n      setImageUrl(url);\r\n      setError(null);\r\n    } catch (err) {\r\n      if (!mountedRef.current) return;\r\n      if (axios.isCancel?.(err)) {\r\n        console.log(\"Plot request cancelled\");\r\n      } else {\r\n        console.error(\"Failed to fetch image:\", err);\r\n        if (err.response) {\r\n          setError(\r\n            new Error(\r\n              `Server returned ${err.response.status}: ${err.response.statusText}`\r\n            )\r\n          );\r\n        } else if (err.request) {\r\n          setError(\r\n            new Error(\r\n              \"No response from server. Check that the backend is running and CORS is configured.\"\r\n            )\r\n          );\r\n        } else {\r\n          setError(new Error(err.message || \"Unknown error\"));\r\n        }\r\n      }\r\n    } finally {\r\n      if (mountedRef.current) setLoading(false);\r\n    }\r\n  }, [vizParams, imageUrl, buildPayloadAndParams]);\r\n\r\n  // ----------- JSX -----------\r\n  return (\r\n    <div className=\"viz-layout viz-full-layout\">\r\n      {/* FULL-WIDTH MAP / PLOT PANEL */}\r\n      <section className=\"viz-panel viz-panel-main\">\r\n        <div className=\"viz-panel-header\">\r\n          <div>\r\n            <h3 className=\"viz-panel-title\">Map / Plot View</h3>\r\n            <p className=\"viz-panel-text\">\r\n              The backend returns a plot image (PNG/JPEG) for the configured\r\n              oceanographic query. It will be displayed here when ready.\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"viz-map-placeholder\">\r\n          {imageUrl ? (\r\n            <img\r\n              src={imageUrl}\r\n              alt=\"Generated plot\"\r\n              className=\"viz-plot-image\"\r\n            />\r\n          ) : loading ? (\r\n            <div className=\"viz-map-message\">Generating image…</div>\r\n          ) : (\r\n            <div className=\"viz-map-message\">\r\n              <p>Spatial visualization / plot will appear here.</p>\r\n              <small>Click “Generate plot” to request an image.</small>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"viz-main-actions\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"viz-generate-btn\"\r\n            onClick={handleGeneratePlot}\r\n            disabled={loading}\r\n          >\r\n            {loading ? \"Generating…\" : \"Generate plot\"}\r\n          </button>\r\n\r\n          {error && (\r\n            <p className=\"viz-error\">\r\n              {error.message || \"Failed to generate image.\"}\r\n            </p>\r\n          )}\r\n        </div>\r\n      </section>\r\n\r\n      {/* BOTTOM SUMMARY METRICS (unchanged) */}\r\n      <section className=\"viz-panel viz-panel-bottom\">\r\n        <h3 className=\"viz-panel-title\">Time Series & Indicators</h3>\r\n        <p className=\"viz-panel-text\">\r\n          Summary metrics (static placeholders for now).\r\n        </p>\r\n\r\n        <div className=\"viz-metrics-grid\">\r\n          <div className=\"viz-metric-card\">\r\n            <p className=\"viz-metric-label\">SST (°C)</p>\r\n            <p className=\"viz-metric-value\">27.3</p>\r\n            <p className=\"viz-metric-note\">Near long-term average.</p>\r\n          </div>\r\n          <div className=\"viz-metric-card\">\r\n            <p className=\"viz-metric-label\">Chl-a (mg/m³)</p>\r\n            <p className=\"viz-metric-value\">0.8</p>\r\n            <p className=\"viz-metric-note\">Elevated coastal bloom.</p>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VisualizationTool;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}