{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Aryan\\\\Desktop\\\\SIH\\\\final_frontend\\\\src\\\\modules\\\\CloudDataServerModule.js\",\n  _s = $RefreshSig$();\n// src/modules/CloudDataServerModule.js\nimport React, { useState, useMemo, useEffect } from \"react\";\nimport \"./CloudDataServerModule.css\";\n\n/**\r\n * CloudDataServerModule (final patch)\r\n *\r\n * - Prefers apiBase prop, otherwise reads window.__API_BASE__ set by App.js\r\n * - Uses the effective base for all requests to avoid hitting the frontend dev server's index.html\r\n * - Still defensive about content-type and handles non-JSON responses cleanly\r\n * - Shows full URL used in the debug banner\r\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DOMAINS = [{\n  id: \"oceanographic\",\n  label: \"Oceanography\",\n  description: \"CTD, nutrients, currents, satellite SST & Chl-a grids.\"\n}, {\n  id: \"biodiversity\",\n  label: \"Biodiversity\",\n  description: \"Species diversity, ecosystem assessments, biodiversity indices.\"\n}, {\n  id: \"edna\",\n  label: \"Molecular / eDNA\",\n  description: \"DNA barcodes, eDNA reads, metabarcoding matrices.\"\n}, {\n  id: \"otolith\",\n  label: \"Taxonomy & Systematics\",\n  description: \"Species checklists, occurrence tables, reference libraries.\"\n}];\nconst DEFAULT_BACKEND = \"http://127.0.0.1:8000\";\nexport default function CloudDataServerModule({\n  apiBase = \"\"\n}) {\n  _s();\n  // effective base: prop -> window global -> empty string\n  const effectiveApiBase = apiBase || window && window.__API_BASE__ || \"\";\n  const [activeDomain, setActiveDomain] = useState(\"oceanography\");\n  const [datasets, setDatasets] = useState([]);\n  const [loadingDatasets, setLoadingDatasets] = useState(false);\n  const [presigns, setPresigns] = useState({});\n  const [loadingPresign, setLoadingPresign] = useState({});\n  const [error, setError] = useState(null);\n  const [lastApiUsed, setLastApiUsed] = useState(null);\n  const [triedFallbackThisCall, setTriedFallbackThisCall] = useState(false);\n  const activeDomainMeta = useMemo(() => DOMAINS.find(d => d.id === activeDomain), [activeDomain]);\n  useEffect(() => {\n    listDatasets(activeDomain);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [activeDomain]);\n  function buildUrl(base, path) {\n    // If path already a full URL, return it\n    if (path.startsWith(\"http://\") || path.startsWith(\"https://\")) return path;\n    // If no base, return path (relative)\n    if (!base) return path.startsWith(\"/\") ? path : \"/\" + path;\n    // Ensure single slash\n    return base.replace(/\\/+$/, \"\") + (path.startsWith(\"/\") ? path : \"/\" + path);\n  }\n\n  // Unified fetch that uses effectiveApiBase and falls back to DEFAULT_BACKEND only if needed\n  async function safeFetch(pathOrFullUrl, opts = {}) {\n    const explicitFullUrl = pathOrFullUrl.startsWith(\"http://\") || pathOrFullUrl.startsWith(\"https://\");\n    const primaryBase = effectiveApiBase;\n    const primaryUrl = explicitFullUrl ? pathOrFullUrl : buildUrl(primaryBase, pathOrFullUrl);\n    try {\n      var _opts$cache;\n      const primaryResp = await fetch(primaryUrl, {\n        ...opts,\n        cache: (_opts$cache = opts.cache) !== null && _opts$cache !== void 0 ? _opts$cache : \"no-store\"\n      });\n      const ct = primaryResp.headers.get(\"content-type\") || \"\";\n\n      // If content-type is HTML and we used a relative or frontend base, try fallback backend once\n      if (ct.includes(\"text/html\")) {\n        // If we already tried fallback for this call, return the HTML response (so caller can show debug)\n        if (triedFallbackThisCall) {\n          const html = await primaryResp.text();\n          setLastApiUsed(primaryUrl);\n          setTriedFallbackThisCall(false);\n          return {\n            ok: primaryResp.ok,\n            status: primaryResp.status,\n            contentType: ct,\n            text: html,\n            usedBase: primaryUrl\n          };\n        }\n\n        // Only try fallback when primaryBase is empty or looks like same-origin (to avoid unnecessary retries)\n        const fallbackBase = primaryBase ? primaryBase : DEFAULT_BACKEND;\n        // do not retry primary if primaryUrl already equals fallbackBase\n        const fallbackUrl = buildUrl(fallbackBase, pathOrFullUrl);\n\n        // If fallback same as primary, just return primary result\n        if (fallbackUrl === primaryUrl) {\n          const body = await primaryResp.text();\n          setLastApiUsed(primaryUrl);\n          return {\n            ok: primaryResp.ok,\n            status: primaryResp.status,\n            contentType: ct,\n            text: body,\n            usedBase: primaryUrl\n          };\n        }\n\n        // try fallback once\n        setTriedFallbackThisCall(true);\n        try {\n          var _opts$cache2;\n          const fallbackResp = await fetch(fallbackUrl, {\n            ...opts,\n            cache: (_opts$cache2 = opts.cache) !== null && _opts$cache2 !== void 0 ? _opts$cache2 : \"no-store\"\n          });\n          const fct = fallbackResp.headers.get(\"content-type\") || \"\";\n          if (fct.includes(\"application/json\")) {\n            const json = await fallbackResp.json();\n            setLastApiUsed(fallbackUrl);\n            setTriedFallbackThisCall(false);\n            return {\n              ok: fallbackResp.ok,\n              status: fallbackResp.status,\n              contentType: fct,\n              json,\n              usedBase: fallbackUrl\n            };\n          } else {\n            const text = await fallbackResp.text();\n            setLastApiUsed(fallbackUrl);\n            setTriedFallbackThisCall(false);\n            return {\n              ok: fallbackResp.ok,\n              status: fallbackResp.status,\n              contentType: fct,\n              text,\n              usedBase: fallbackUrl\n            };\n          }\n        } catch (fbErr) {\n          // fallback failed — return primary HTML so caller sees debug\n          const primaryText = await primaryResp.text();\n          setLastApiUsed(primaryUrl);\n          setTriedFallbackThisCall(false);\n          return {\n            ok: primaryResp.ok,\n            status: primaryResp.status,\n            contentType: ct,\n            text: primaryText,\n            usedBase: primaryUrl,\n            error: fbErr\n          };\n        }\n      }\n\n      // If JSON, parse and return\n      if (ct.includes(\"application/json\")) {\n        const json = await primaryResp.json();\n        setLastApiUsed(primaryUrl);\n        setTriedFallbackThisCall(false);\n        return {\n          ok: primaryResp.ok,\n          status: primaryResp.status,\n          contentType: ct,\n          json,\n          usedBase: primaryUrl\n        };\n      }\n\n      // Otherwise return text\n      const text = await primaryResp.text();\n      setLastApiUsed(primaryUrl);\n      setTriedFallbackThisCall(false);\n      return {\n        ok: primaryResp.ok,\n        status: primaryResp.status,\n        contentType: ct,\n        text,\n        usedBase: primaryUrl\n      };\n    } catch (err) {\n      // network error — try fallback once\n      if (!triedFallbackThisCall) {\n        setTriedFallbackThisCall(true);\n        const fallbackUrl = buildUrl(DEFAULT_BACKEND, pathOrFullUrl);\n        try {\n          var _opts$cache3;\n          const fallbackResp = await fetch(fallbackUrl, {\n            ...opts,\n            cache: (_opts$cache3 = opts.cache) !== null && _opts$cache3 !== void 0 ? _opts$cache3 : \"no-store\"\n          });\n          const fct = fallbackResp.headers.get(\"content-type\") || \"\";\n          if (fct.includes(\"application/json\")) {\n            const json = await fallbackResp.json();\n            setLastApiUsed(fallbackUrl);\n            setTriedFallbackThisCall(false);\n            return {\n              ok: fallbackResp.ok,\n              status: fallbackResp.status,\n              contentType: fct,\n              json,\n              usedBase: fallbackUrl\n            };\n          } else {\n            const text = await fallbackResp.text();\n            setLastApiUsed(fallbackUrl);\n            setTriedFallbackThisCall(false);\n            return {\n              ok: fallbackResp.ok,\n              status: fallbackResp.status,\n              contentType: fct,\n              text,\n              usedBase: fallbackUrl\n            };\n          }\n        } catch (fbErr) {\n          setTriedFallbackThisCall(false);\n          return {\n            ok: false,\n            status: 0,\n            error: fbErr,\n            usedBase: null\n          };\n        }\n      }\n      return {\n        ok: false,\n        status: 0,\n        error: err,\n        usedBase: null\n      };\n    }\n  }\n  async function listDatasets(domain) {\n    setError(null);\n    setLoadingDatasets(true);\n    setDatasets([]);\n    try {\n      const apiPath = `/api/datasets/${encodeURIComponent(domain)}`;\n      const result = await safeFetch(apiPath, {\n        method: \"GET\"\n      });\n      if (result.usedBase) setLastApiUsed(result.usedBase);\n      if (!result.ok) {\n        const bodyText = result.text || JSON.stringify(result.json) || \"\";\n        throw new Error(`List failed: ${result.status} ${bodyText}`);\n      }\n      if (result.contentType && result.contentType.includes(\"application/json\") && Array.isArray(result.json)) {\n        setDatasets(result.json);\n        return;\n      }\n      if (result.text) {\n        throw new Error(`Expected JSON but server returned content-type=${result.contentType} body=${result.text.substring(0, 2000)}`);\n      }\n      setDatasets([]);\n    } catch (err) {\n      console.error(\"listDatasets error:\", err);\n      setError(err.message || \"Failed to list datasets\");\n    } finally {\n      setLoadingDatasets(false);\n    }\n  }\n  async function requestAccess(domain, dataset) {\n    setError(null);\n    setLoadingPresign(p => ({\n      ...p,\n      [dataset]: true\n    }));\n    try {\n      const apiPath = `/api/presign`;\n      const result = await safeFetch(apiPath, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          domain,\n          dataset,\n          expires_in: 300\n        })\n      });\n      if (result.usedBase) setLastApiUsed(result.usedBase);\n      if (!result.ok) {\n        const body = result.text || JSON.stringify(result.json) || \"\";\n        throw new Error(`Presign failed: ${result.status} ${body}`);\n      }\n      if (result.contentType && result.contentType.includes(\"application/json\") && result.json) {\n        setPresigns(p => ({\n          ...p,\n          [dataset]: result.json\n        }));\n        return;\n      }\n      if (result.text) {\n        throw new Error(`Presign response not JSON: ${result.text}`);\n      }\n      throw new Error(\"Unknown presign error\");\n    } catch (err) {\n      console.error(\"requestAccess error:\", err);\n      setError(err.message || \"Failed to request access\");\n    } finally {\n      setLoadingPresign(p => ({\n        ...p,\n        [dataset]: false\n      }));\n    }\n  }\n  function AccessControls({\n    domain,\n    dataset\n  }) {\n    const presign = presigns[dataset] || null;\n    const requesting = !!loadingPresign[dataset];\n    if (!presign) {\n      return /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"btn cloud-btn-view\",\n        onClick: () => requestAccess(domain, dataset),\n        disabled: requesting,\n        children: requesting ? \"Requesting…\" : \"Request access\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 9\n      }, this);\n    }\n    const {\n      raw_url,\n      curated_url,\n      metadata_url\n    } = presign || {};\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"access-buttons\",\n      role: \"group\",\n      \"aria-label\": `access-${dataset}`,\n      children: [raw_url ? /*#__PURE__*/_jsxDEV(\"a\", {\n        className: \"access-btn\",\n        href: raw_url,\n        target: \"_blank\",\n        rel: \"noreferrer\",\n        download: true,\n        title: \"Download raw file\",\n        children: \"Raw\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"access-btn disabled\",\n        \"aria-disabled\": \"true\",\n        title: \"Raw not available\",\n        children: \"Raw\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 11\n      }, this), curated_url ? /*#__PURE__*/_jsxDEV(\"a\", {\n        className: \"access-btn\",\n        href: curated_url,\n        target: \"_blank\",\n        rel: \"noreferrer\",\n        download: true,\n        title: \"Download curated file\",\n        children: \"Curated\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"access-btn disabled\",\n        \"aria-disabled\": \"true\",\n        title: \"Curated not available\",\n        children: \"Curated\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 11\n      }, this), metadata_url ? /*#__PURE__*/_jsxDEV(\"a\", {\n        className: \"access-btn\",\n        href: metadata_url,\n        target: \"_blank\",\n        rel: \"noreferrer\",\n        download: true,\n        title: \"Download metadata\",\n        children: \"Metadata\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"access-btn disabled\",\n        \"aria-disabled\": \"true\",\n        title: \"Metadata not available\",\n        children: \"Metadata\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 7\n    }, this);\n  }\n\n  // show readable base in UI: if usedBase is relative path, display 'same-origin' to avoid confusion\n  const readableApiUsed = lastApiUsed ? lastApiUsed.startsWith(\"/\") ? \"same-origin (relative /api/...)\" : lastApiUsed : null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"cloud-layout\",\n    children: [readableApiUsed && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: \"#071226\",\n        color: \"#fbbf24\",\n        padding: 8,\n        borderRadius: 6,\n        marginBottom: 8\n      },\n      children: [\"Using API: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n        style: {\n          color: \"#fff\"\n        },\n        children: readableApiUsed\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 22\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"cloud-domain-grid\",\n      role: \"tablist\",\n      \"aria-label\": \"domains\",\n      children: DOMAINS.map(dom => /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: dom.id === activeDomain ? \"cloud-domain-card cloud-domain-card-active\" : \"cloud-domain-card\",\n        onClick: () => setActiveDomain(dom.id),\n        \"aria-pressed\": dom.id === activeDomain,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cloud-domain-label\",\n          children: dom.label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"cloud-domain-desc\",\n          children: dom.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 13\n        }, this)]\n      }, dom.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"cloud-datasets-panel\",\n      \"aria-live\": \"polite\",\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        className: \"cloud-datasets-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"cloud-datasets-title\",\n            children: (activeDomainMeta === null || activeDomainMeta === void 0 ? void 0 : activeDomainMeta.label) || \"Selected domain\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"cloud-datasets-subtitle\",\n            children: loadingDatasets ? \"Loading datasets…\" : `${datasets.length} dataset${datasets.length !== 1 ? \"s\" : \"\"} registered`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cloud-datasets-meta\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"cloud-chip\",\n            children: [\"Node group:\", \" \", activeDomain === \"oceanography\" ? \"OCN-*\" : activeDomain === \"biodiversity\" ? \"BIO-*\" : activeDomain === \"molecular\" ? \"MOL-*\" : \"TAX-*\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cloud-dataset-list\",\n        children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: \"salmon\",\n            padding: 8,\n            fontWeight: 600\n          },\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 13\n        }, this), datasets.length === 0 && !loadingDatasets && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cloud-empty-state\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"cloud-empty-title\",\n            children: \"No datasets registered\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"cloud-empty-text\",\n            children: \"This domain does not have any datasets yet in the Cloud Data Server. Once ingestion pipelines are configured, they will appear here.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 13\n        }, this), datasets.map(name => /*#__PURE__*/_jsxDEV(\"article\", {\n          className: \"cloud-dataset-card\",\n          \"aria-label\": `dataset-${name}`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cloud-dataset-main\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"cloud-dataset-name\",\n              children: name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"cloud-dataset-type\",\n              children: \"Dataset\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 349,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cloud-dataset-tags\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cloud-pill cloud-pill-domain\",\n                children: activeDomainMeta === null || activeDomainMeta === void 0 ? void 0 : activeDomainMeta.label\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 352,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cloud-pill status-online\",\n                children: \"Status: Online\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 353,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cloud-dataset-meta\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"cloud-meta-line\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cloud-meta-label\",\n                children: \"Access:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 358,\n                columnNumber: 48\n              }, this), \" Controlled\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 358,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"cloud-meta-line\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cloud-meta-label\",\n                children: \"Updated:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 359,\n                columnNumber: 48\n              }, this), \" \\u2014\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 359,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(AccessControls, {\n              domain: activeDomain,\n              dataset: name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 361,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn cloud-btn-view\",\n              style: {\n                marginTop: 8\n              },\n              onClick: () => alert(`Open dataset detail for ${name}`),\n              children: \"View dataset\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 363,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 15\n          }, this)]\n        }, name, true, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 283,\n    columnNumber: 5\n  }, this);\n}\n_s(CloudDataServerModule, \"MCpdeLHvl059K34B242nRE0phwY=\");\n_c = CloudDataServerModule;\nvar _c;\n$RefreshReg$(_c, \"CloudDataServerModule\");","map":{"version":3,"names":["React","useState","useMemo","useEffect","jsxDEV","_jsxDEV","DOMAINS","id","label","description","DEFAULT_BACKEND","CloudDataServerModule","apiBase","_s","effectiveApiBase","window","__API_BASE__","activeDomain","setActiveDomain","datasets","setDatasets","loadingDatasets","setLoadingDatasets","presigns","setPresigns","loadingPresign","setLoadingPresign","error","setError","lastApiUsed","setLastApiUsed","triedFallbackThisCall","setTriedFallbackThisCall","activeDomainMeta","find","d","listDatasets","buildUrl","base","path","startsWith","replace","safeFetch","pathOrFullUrl","opts","explicitFullUrl","primaryBase","primaryUrl","_opts$cache","primaryResp","fetch","cache","ct","headers","get","includes","html","text","ok","status","contentType","usedBase","fallbackBase","fallbackUrl","body","_opts$cache2","fallbackResp","fct","json","fbErr","primaryText","err","_opts$cache3","domain","apiPath","encodeURIComponent","result","method","bodyText","JSON","stringify","Error","Array","isArray","substring","console","message","requestAccess","dataset","p","expires_in","AccessControls","presign","requesting","type","className","onClick","disabled","children","fileName","_jsxFileName","lineNumber","columnNumber","raw_url","curated_url","metadata_url","role","href","target","rel","download","title","readableApiUsed","style","background","color","padding","borderRadius","marginBottom","map","dom","length","fontWeight","name","marginTop","alert","_c","$RefreshReg$"],"sources":["C:/Users/Aryan/Desktop/SIH/final_frontend/src/modules/CloudDataServerModule.js"],"sourcesContent":["// src/modules/CloudDataServerModule.js\r\nimport React, { useState, useMemo, useEffect } from \"react\";\r\nimport \"./CloudDataServerModule.css\";\r\n\r\n/**\r\n * CloudDataServerModule (final patch)\r\n *\r\n * - Prefers apiBase prop, otherwise reads window.__API_BASE__ set by App.js\r\n * - Uses the effective base for all requests to avoid hitting the frontend dev server's index.html\r\n * - Still defensive about content-type and handles non-JSON responses cleanly\r\n * - Shows full URL used in the debug banner\r\n */\r\n\r\nconst DOMAINS = [\r\n  {\r\n    id: \"oceanographic\",\r\n    label: \"Oceanography\",\r\n    description: \"CTD, nutrients, currents, satellite SST & Chl-a grids.\",\r\n  },\r\n  {\r\n    id: \"biodiversity\",\r\n    label: \"Biodiversity\",\r\n    description: \"Species diversity, ecosystem assessments, biodiversity indices.\",\r\n  },\r\n  {\r\n    id: \"edna\",\r\n    label: \"Molecular / eDNA\",\r\n    description: \"DNA barcodes, eDNA reads, metabarcoding matrices.\",\r\n  },\r\n  {\r\n    id: \"otolith\",\r\n    label: \"Taxonomy & Systematics\",\r\n    description: \"Species checklists, occurrence tables, reference libraries.\",\r\n  },\r\n];\r\n\r\nconst DEFAULT_BACKEND = \"http://127.0.0.1:8000\";\r\n\r\nexport default function CloudDataServerModule({ apiBase = \"\" }) {\r\n  // effective base: prop -> window global -> empty string\r\n  const effectiveApiBase = apiBase || (window && window.__API_BASE__) || \"\";\r\n\r\n  const [activeDomain, setActiveDomain] = useState(\"oceanography\");\r\n  const [datasets, setDatasets] = useState([]);\r\n  const [loadingDatasets, setLoadingDatasets] = useState(false);\r\n  const [presigns, setPresigns] = useState({});\r\n  const [loadingPresign, setLoadingPresign] = useState({});\r\n  const [error, setError] = useState(null);\r\n  const [lastApiUsed, setLastApiUsed] = useState(null);\r\n  const [triedFallbackThisCall, setTriedFallbackThisCall] = useState(false);\r\n\r\n  const activeDomainMeta = useMemo(\r\n    () => DOMAINS.find((d) => d.id === activeDomain),\r\n    [activeDomain]\r\n  );\r\n\r\n  useEffect(() => {\r\n    listDatasets(activeDomain);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [activeDomain]);\r\n\r\n  function buildUrl(base, path) {\r\n    // If path already a full URL, return it\r\n    if (path.startsWith(\"http://\") || path.startsWith(\"https://\")) return path;\r\n    // If no base, return path (relative)\r\n    if (!base) return path.startsWith(\"/\") ? path : \"/\" + path;\r\n    // Ensure single slash\r\n    return base.replace(/\\/+$/, \"\") + (path.startsWith(\"/\") ? path : \"/\" + path);\r\n  }\r\n\r\n  // Unified fetch that uses effectiveApiBase and falls back to DEFAULT_BACKEND only if needed\r\n  async function safeFetch(pathOrFullUrl, opts = {}) {\r\n    const explicitFullUrl = pathOrFullUrl.startsWith(\"http://\") || pathOrFullUrl.startsWith(\"https://\");\r\n    const primaryBase = effectiveApiBase;\r\n    const primaryUrl = explicitFullUrl ? pathOrFullUrl : buildUrl(primaryBase, pathOrFullUrl);\r\n\r\n    try {\r\n      const primaryResp = await fetch(primaryUrl, { ...opts, cache: opts.cache ?? \"no-store\" });\r\n      const ct = primaryResp.headers.get(\"content-type\") || \"\";\r\n\r\n      // If content-type is HTML and we used a relative or frontend base, try fallback backend once\r\n      if (ct.includes(\"text/html\")) {\r\n        // If we already tried fallback for this call, return the HTML response (so caller can show debug)\r\n        if (triedFallbackThisCall) {\r\n          const html = await primaryResp.text();\r\n          setLastApiUsed(primaryUrl);\r\n          setTriedFallbackThisCall(false);\r\n          return { ok: primaryResp.ok, status: primaryResp.status, contentType: ct, text: html, usedBase: primaryUrl };\r\n        }\r\n\r\n        // Only try fallback when primaryBase is empty or looks like same-origin (to avoid unnecessary retries)\r\n        const fallbackBase = primaryBase ? primaryBase : DEFAULT_BACKEND;\r\n        // do not retry primary if primaryUrl already equals fallbackBase\r\n        const fallbackUrl = buildUrl(fallbackBase, pathOrFullUrl);\r\n\r\n        // If fallback same as primary, just return primary result\r\n        if (fallbackUrl === primaryUrl) {\r\n          const body = await primaryResp.text();\r\n          setLastApiUsed(primaryUrl);\r\n          return { ok: primaryResp.ok, status: primaryResp.status, contentType: ct, text: body, usedBase: primaryUrl };\r\n        }\r\n\r\n        // try fallback once\r\n        setTriedFallbackThisCall(true);\r\n        try {\r\n          const fallbackResp = await fetch(fallbackUrl, { ...opts, cache: opts.cache ?? \"no-store\" });\r\n          const fct = fallbackResp.headers.get(\"content-type\") || \"\";\r\n          if (fct.includes(\"application/json\")) {\r\n            const json = await fallbackResp.json();\r\n            setLastApiUsed(fallbackUrl);\r\n            setTriedFallbackThisCall(false);\r\n            return { ok: fallbackResp.ok, status: fallbackResp.status, contentType: fct, json, usedBase: fallbackUrl };\r\n          } else {\r\n            const text = await fallbackResp.text();\r\n            setLastApiUsed(fallbackUrl);\r\n            setTriedFallbackThisCall(false);\r\n            return { ok: fallbackResp.ok, status: fallbackResp.status, contentType: fct, text, usedBase: fallbackUrl };\r\n          }\r\n        } catch (fbErr) {\r\n          // fallback failed — return primary HTML so caller sees debug\r\n          const primaryText = await primaryResp.text();\r\n          setLastApiUsed(primaryUrl);\r\n          setTriedFallbackThisCall(false);\r\n          return { ok: primaryResp.ok, status: primaryResp.status, contentType: ct, text: primaryText, usedBase: primaryUrl, error: fbErr };\r\n        }\r\n      }\r\n\r\n      // If JSON, parse and return\r\n      if (ct.includes(\"application/json\")) {\r\n        const json = await primaryResp.json();\r\n        setLastApiUsed(primaryUrl);\r\n        setTriedFallbackThisCall(false);\r\n        return { ok: primaryResp.ok, status: primaryResp.status, contentType: ct, json, usedBase: primaryUrl };\r\n      }\r\n\r\n      // Otherwise return text\r\n      const text = await primaryResp.text();\r\n      setLastApiUsed(primaryUrl);\r\n      setTriedFallbackThisCall(false);\r\n      return { ok: primaryResp.ok, status: primaryResp.status, contentType: ct, text, usedBase: primaryUrl };\r\n    } catch (err) {\r\n      // network error — try fallback once\r\n      if (!triedFallbackThisCall) {\r\n        setTriedFallbackThisCall(true);\r\n        const fallbackUrl = buildUrl(DEFAULT_BACKEND, pathOrFullUrl);\r\n        try {\r\n          const fallbackResp = await fetch(fallbackUrl, { ...opts, cache: opts.cache ?? \"no-store\" });\r\n          const fct = fallbackResp.headers.get(\"content-type\") || \"\";\r\n          if (fct.includes(\"application/json\")) {\r\n            const json = await fallbackResp.json();\r\n            setLastApiUsed(fallbackUrl);\r\n            setTriedFallbackThisCall(false);\r\n            return { ok: fallbackResp.ok, status: fallbackResp.status, contentType: fct, json, usedBase: fallbackUrl };\r\n          } else {\r\n            const text = await fallbackResp.text();\r\n            setLastApiUsed(fallbackUrl);\r\n            setTriedFallbackThisCall(false);\r\n            return { ok: fallbackResp.ok, status: fallbackResp.status, contentType: fct, text, usedBase: fallbackUrl };\r\n          }\r\n        } catch (fbErr) {\r\n          setTriedFallbackThisCall(false);\r\n          return { ok: false, status: 0, error: fbErr, usedBase: null };\r\n        }\r\n      }\r\n      return { ok: false, status: 0, error: err, usedBase: null };\r\n    }\r\n  }\r\n\r\n  async function listDatasets(domain) {\r\n    setError(null);\r\n    setLoadingDatasets(true);\r\n    setDatasets([]);\r\n    try {\r\n      const apiPath = `/api/datasets/${encodeURIComponent(domain)}`;\r\n      const result = await safeFetch(apiPath, { method: \"GET\" });\r\n\r\n      if (result.usedBase) setLastApiUsed(result.usedBase);\r\n\r\n      if (!result.ok) {\r\n        const bodyText = result.text || JSON.stringify(result.json) || \"\";\r\n        throw new Error(`List failed: ${result.status} ${bodyText}`);\r\n      }\r\n\r\n      if (result.contentType && result.contentType.includes(\"application/json\") && Array.isArray(result.json)) {\r\n        setDatasets(result.json);\r\n        return;\r\n      }\r\n\r\n      if (result.text) {\r\n        throw new Error(`Expected JSON but server returned content-type=${result.contentType} body=${result.text.substring(0, 2000)}`);\r\n      }\r\n\r\n      setDatasets([]);\r\n    } catch (err) {\r\n      console.error(\"listDatasets error:\", err);\r\n      setError(err.message || \"Failed to list datasets\");\r\n    } finally {\r\n      setLoadingDatasets(false);\r\n    }\r\n  }\r\n\r\n  async function requestAccess(domain, dataset) {\r\n    setError(null);\r\n    setLoadingPresign((p) => ({ ...p, [dataset]: true }));\r\n    try {\r\n      const apiPath = `/api/presign`;\r\n      const result = await safeFetch(apiPath, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ domain, dataset, expires_in: 300 }),\r\n      });\r\n\r\n      if (result.usedBase) setLastApiUsed(result.usedBase);\r\n\r\n      if (!result.ok) {\r\n        const body = result.text || JSON.stringify(result.json) || \"\";\r\n        throw new Error(`Presign failed: ${result.status} ${body}`);\r\n      }\r\n\r\n      if (result.contentType && result.contentType.includes(\"application/json\") && result.json) {\r\n        setPresigns((p) => ({ ...p, [dataset]: result.json }));\r\n        return;\r\n      }\r\n\r\n      if (result.text) {\r\n        throw new Error(`Presign response not JSON: ${result.text}`);\r\n      }\r\n\r\n      throw new Error(\"Unknown presign error\");\r\n    } catch (err) {\r\n      console.error(\"requestAccess error:\", err);\r\n      setError(err.message || \"Failed to request access\");\r\n    } finally {\r\n      setLoadingPresign((p) => ({ ...p, [dataset]: false }));\r\n    }\r\n  }\r\n\r\n  function AccessControls({ domain, dataset }) {\r\n    const presign = presigns[dataset] || null;\r\n    const requesting = !!loadingPresign[dataset];\r\n\r\n    if (!presign) {\r\n      return (\r\n        <button\r\n          type=\"button\"\r\n          className=\"btn cloud-btn-view\"\r\n          onClick={() => requestAccess(domain, dataset)}\r\n          disabled={requesting}\r\n        >\r\n          {requesting ? \"Requesting…\" : \"Request access\"}\r\n        </button>\r\n      );\r\n    }\r\n\r\n    const { raw_url, curated_url, metadata_url } = presign || {};\r\n    return (\r\n      <div className=\"access-buttons\" role=\"group\" aria-label={`access-${dataset}`}>\r\n        {raw_url ? (\r\n          <a className=\"access-btn\" href={raw_url} target=\"_blank\" rel=\"noreferrer\" download title=\"Download raw file\">Raw</a>\r\n        ) : (\r\n          <button className=\"access-btn disabled\" aria-disabled=\"true\" title=\"Raw not available\">Raw</button>\r\n        )}\r\n\r\n        {curated_url ? (\r\n          <a className=\"access-btn\" href={curated_url} target=\"_blank\" rel=\"noreferrer\" download title=\"Download curated file\">Curated</a>\r\n        ) : (\r\n          <button className=\"access-btn disabled\" aria-disabled=\"true\" title=\"Curated not available\">Curated</button>\r\n        )}\r\n\r\n        {metadata_url ? (\r\n          <a className=\"access-btn\" href={metadata_url} target=\"_blank\" rel=\"noreferrer\" download title=\"Download metadata\">Metadata</a>\r\n        ) : (\r\n          <button className=\"access-btn disabled\" aria-disabled=\"true\" title=\"Metadata not available\">Metadata</button>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // show readable base in UI: if usedBase is relative path, display 'same-origin' to avoid confusion\r\n  const readableApiUsed = lastApiUsed ? (lastApiUsed.startsWith(\"/\") ? \"same-origin (relative /api/...)\" : lastApiUsed) : null;\r\n\r\n  return (\r\n    <div className=\"cloud-layout\">\r\n      {readableApiUsed && (\r\n        <div style={{ background: \"#071226\", color: \"#fbbf24\", padding: 8, borderRadius: 6, marginBottom: 8 }}>\r\n          Using API: <strong style={{ color: \"#fff\" }}>{readableApiUsed}</strong>\r\n        </div>\r\n      )}\r\n\r\n      <section className=\"cloud-domain-grid\" role=\"tablist\" aria-label=\"domains\">\r\n        {DOMAINS.map((dom) => (\r\n          <button\r\n            key={dom.id}\r\n            type=\"button\"\r\n            className={dom.id === activeDomain ? \"cloud-domain-card cloud-domain-card-active\" : \"cloud-domain-card\"}\r\n            onClick={() => setActiveDomain(dom.id)}\r\n            aria-pressed={dom.id === activeDomain}\r\n          >\r\n            <div className=\"cloud-domain-label\">{dom.label}</div>\r\n            <p className=\"cloud-domain-desc\">{dom.description}</p>\r\n          </button>\r\n        ))}\r\n      </section>\r\n\r\n      <section className=\"cloud-datasets-panel\" aria-live=\"polite\">\r\n        <header className=\"cloud-datasets-header\">\r\n          <div>\r\n            <h3 className=\"cloud-datasets-title\">{activeDomainMeta?.label || \"Selected domain\"}</h3>\r\n            <p className=\"cloud-datasets-subtitle\">\r\n              {loadingDatasets ? \"Loading datasets…\" : `${datasets.length} dataset${datasets.length !== 1 ? \"s\" : \"\"} registered`}\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"cloud-datasets-meta\">\r\n            <span className=\"cloud-chip\">\r\n              Node group:{\" \"}\r\n              {activeDomain === \"oceanography\"\r\n                ? \"OCN-*\"\r\n                : activeDomain === \"biodiversity\"\r\n                ? \"BIO-*\"\r\n                : activeDomain === \"molecular\"\r\n                ? \"MOL-*\"\r\n                : \"TAX-*\"}\r\n            </span>\r\n          </div>\r\n        </header>\r\n\r\n        <div className=\"cloud-dataset-list\">\r\n          {error && (\r\n            <div style={{ color: \"salmon\", padding: 8, fontWeight: 600 }}>\r\n              {error}\r\n            </div>\r\n          )}\r\n\r\n          {datasets.length === 0 && !loadingDatasets && (\r\n            <div className=\"cloud-empty-state\">\r\n              <p className=\"cloud-empty-title\">No datasets registered</p>\r\n              <p className=\"cloud-empty-text\">\r\n                This domain does not have any datasets yet in the Cloud Data Server.\r\n                Once ingestion pipelines are configured, they will appear here.\r\n              </p>\r\n            </div>\r\n          )}\r\n\r\n          {datasets.map((name) => (\r\n            <article key={name} className=\"cloud-dataset-card\" aria-label={`dataset-${name}`}>\r\n              <div className=\"cloud-dataset-main\">\r\n                <h4 className=\"cloud-dataset-name\">{name}</h4>\r\n                <p className=\"cloud-dataset-type\">Dataset</p>\r\n\r\n                <div className=\"cloud-dataset-tags\">\r\n                  <span className=\"cloud-pill cloud-pill-domain\">{activeDomainMeta?.label}</span>\r\n                  <span className=\"cloud-pill status-online\">Status: Online</span>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"cloud-dataset-meta\">\r\n                <p className=\"cloud-meta-line\"><span className=\"cloud-meta-label\">Access:</span> Controlled</p>\r\n                <p className=\"cloud-meta-line\"><span className=\"cloud-meta-label\">Updated:</span> —</p>\r\n\r\n                <AccessControls domain={activeDomain} dataset={name} />\r\n\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"btn cloud-btn-view\"\r\n                  style={{ marginTop: 8 }}\r\n                  onClick={() => alert(`Open dataset detail for ${name}`)}\r\n                >\r\n                  View dataset\r\n                </button>\r\n              </div>\r\n            </article>\r\n          ))}\r\n        </div>\r\n      </section>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,OAAO,EAAEC,SAAS,QAAQ,OAAO;AAC3D,OAAO,6BAA6B;;AAEpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA,SAAAC,MAAA,IAAAC,OAAA;AASA,MAAMC,OAAO,GAAG,CACd;EACEC,EAAE,EAAE,eAAe;EACnBC,KAAK,EAAE,cAAc;EACrBC,WAAW,EAAE;AACf,CAAC,EACD;EACEF,EAAE,EAAE,cAAc;EAClBC,KAAK,EAAE,cAAc;EACrBC,WAAW,EAAE;AACf,CAAC,EACD;EACEF,EAAE,EAAE,MAAM;EACVC,KAAK,EAAE,kBAAkB;EACzBC,WAAW,EAAE;AACf,CAAC,EACD;EACEF,EAAE,EAAE,SAAS;EACbC,KAAK,EAAE,wBAAwB;EAC/BC,WAAW,EAAE;AACf,CAAC,CACF;AAED,MAAMC,eAAe,GAAG,uBAAuB;AAE/C,eAAe,SAASC,qBAAqBA,CAAC;EAAEC,OAAO,GAAG;AAAG,CAAC,EAAE;EAAAC,EAAA;EAC9D;EACA,MAAMC,gBAAgB,GAAGF,OAAO,IAAKG,MAAM,IAAIA,MAAM,CAACC,YAAa,IAAI,EAAE;EAEzE,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGjB,QAAQ,CAAC,cAAc,CAAC;EAChE,MAAM,CAACkB,QAAQ,EAAEC,WAAW,CAAC,GAAGnB,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACoB,eAAe,EAAEC,kBAAkB,CAAC,GAAGrB,QAAQ,CAAC,KAAK,CAAC;EAC7D,MAAM,CAACsB,QAAQ,EAAEC,WAAW,CAAC,GAAGvB,QAAQ,CAAC,CAAC,CAAC,CAAC;EAC5C,MAAM,CAACwB,cAAc,EAAEC,iBAAiB,CAAC,GAAGzB,QAAQ,CAAC,CAAC,CAAC,CAAC;EACxD,MAAM,CAAC0B,KAAK,EAAEC,QAAQ,CAAC,GAAG3B,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAAC4B,WAAW,EAAEC,cAAc,CAAC,GAAG7B,QAAQ,CAAC,IAAI,CAAC;EACpD,MAAM,CAAC8B,qBAAqB,EAAEC,wBAAwB,CAAC,GAAG/B,QAAQ,CAAC,KAAK,CAAC;EAEzE,MAAMgC,gBAAgB,GAAG/B,OAAO,CAC9B,MAAMI,OAAO,CAAC4B,IAAI,CAAEC,CAAC,IAAKA,CAAC,CAAC5B,EAAE,KAAKU,YAAY,CAAC,EAChD,CAACA,YAAY,CACf,CAAC;EAEDd,SAAS,CAAC,MAAM;IACdiC,YAAY,CAACnB,YAAY,CAAC;IAC1B;EACF,CAAC,EAAE,CAACA,YAAY,CAAC,CAAC;EAElB,SAASoB,QAAQA,CAACC,IAAI,EAAEC,IAAI,EAAE;IAC5B;IACA,IAAIA,IAAI,CAACC,UAAU,CAAC,SAAS,CAAC,IAAID,IAAI,CAACC,UAAU,CAAC,UAAU,CAAC,EAAE,OAAOD,IAAI;IAC1E;IACA,IAAI,CAACD,IAAI,EAAE,OAAOC,IAAI,CAACC,UAAU,CAAC,GAAG,CAAC,GAAGD,IAAI,GAAG,GAAG,GAAGA,IAAI;IAC1D;IACA,OAAOD,IAAI,CAACG,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,IAAIF,IAAI,CAACC,UAAU,CAAC,GAAG,CAAC,GAAGD,IAAI,GAAG,GAAG,GAAGA,IAAI,CAAC;EAC9E;;EAEA;EACA,eAAeG,SAASA,CAACC,aAAa,EAAEC,IAAI,GAAG,CAAC,CAAC,EAAE;IACjD,MAAMC,eAAe,GAAGF,aAAa,CAACH,UAAU,CAAC,SAAS,CAAC,IAAIG,aAAa,CAACH,UAAU,CAAC,UAAU,CAAC;IACnG,MAAMM,WAAW,GAAGhC,gBAAgB;IACpC,MAAMiC,UAAU,GAAGF,eAAe,GAAGF,aAAa,GAAGN,QAAQ,CAACS,WAAW,EAAEH,aAAa,CAAC;IAEzF,IAAI;MAAA,IAAAK,WAAA;MACF,MAAMC,WAAW,GAAG,MAAMC,KAAK,CAACH,UAAU,EAAE;QAAE,GAAGH,IAAI;QAAEO,KAAK,GAAAH,WAAA,GAAEJ,IAAI,CAACO,KAAK,cAAAH,WAAA,cAAAA,WAAA,GAAI;MAAW,CAAC,CAAC;MACzF,MAAMI,EAAE,GAAGH,WAAW,CAACI,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC,IAAI,EAAE;;MAExD;MACA,IAAIF,EAAE,CAACG,QAAQ,CAAC,WAAW,CAAC,EAAE;QAC5B;QACA,IAAIxB,qBAAqB,EAAE;UACzB,MAAMyB,IAAI,GAAG,MAAMP,WAAW,CAACQ,IAAI,CAAC,CAAC;UACrC3B,cAAc,CAACiB,UAAU,CAAC;UAC1Bf,wBAAwB,CAAC,KAAK,CAAC;UAC/B,OAAO;YAAE0B,EAAE,EAAET,WAAW,CAACS,EAAE;YAAEC,MAAM,EAAEV,WAAW,CAACU,MAAM;YAAEC,WAAW,EAAER,EAAE;YAAEK,IAAI,EAAED,IAAI;YAAEK,QAAQ,EAAEd;UAAW,CAAC;QAC9G;;QAEA;QACA,MAAMe,YAAY,GAAGhB,WAAW,GAAGA,WAAW,GAAGpC,eAAe;QAChE;QACA,MAAMqD,WAAW,GAAG1B,QAAQ,CAACyB,YAAY,EAAEnB,aAAa,CAAC;;QAEzD;QACA,IAAIoB,WAAW,KAAKhB,UAAU,EAAE;UAC9B,MAAMiB,IAAI,GAAG,MAAMf,WAAW,CAACQ,IAAI,CAAC,CAAC;UACrC3B,cAAc,CAACiB,UAAU,CAAC;UAC1B,OAAO;YAAEW,EAAE,EAAET,WAAW,CAACS,EAAE;YAAEC,MAAM,EAAEV,WAAW,CAACU,MAAM;YAAEC,WAAW,EAAER,EAAE;YAAEK,IAAI,EAAEO,IAAI;YAAEH,QAAQ,EAAEd;UAAW,CAAC;QAC9G;;QAEA;QACAf,wBAAwB,CAAC,IAAI,CAAC;QAC9B,IAAI;UAAA,IAAAiC,YAAA;UACF,MAAMC,YAAY,GAAG,MAAMhB,KAAK,CAACa,WAAW,EAAE;YAAE,GAAGnB,IAAI;YAAEO,KAAK,GAAAc,YAAA,GAAErB,IAAI,CAACO,KAAK,cAAAc,YAAA,cAAAA,YAAA,GAAI;UAAW,CAAC,CAAC;UAC3F,MAAME,GAAG,GAAGD,YAAY,CAACb,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC,IAAI,EAAE;UAC1D,IAAIa,GAAG,CAACZ,QAAQ,CAAC,kBAAkB,CAAC,EAAE;YACpC,MAAMa,IAAI,GAAG,MAAMF,YAAY,CAACE,IAAI,CAAC,CAAC;YACtCtC,cAAc,CAACiC,WAAW,CAAC;YAC3B/B,wBAAwB,CAAC,KAAK,CAAC;YAC/B,OAAO;cAAE0B,EAAE,EAAEQ,YAAY,CAACR,EAAE;cAAEC,MAAM,EAAEO,YAAY,CAACP,MAAM;cAAEC,WAAW,EAAEO,GAAG;cAAEC,IAAI;cAAEP,QAAQ,EAAEE;YAAY,CAAC;UAC5G,CAAC,MAAM;YACL,MAAMN,IAAI,GAAG,MAAMS,YAAY,CAACT,IAAI,CAAC,CAAC;YACtC3B,cAAc,CAACiC,WAAW,CAAC;YAC3B/B,wBAAwB,CAAC,KAAK,CAAC;YAC/B,OAAO;cAAE0B,EAAE,EAAEQ,YAAY,CAACR,EAAE;cAAEC,MAAM,EAAEO,YAAY,CAACP,MAAM;cAAEC,WAAW,EAAEO,GAAG;cAAEV,IAAI;cAAEI,QAAQ,EAAEE;YAAY,CAAC;UAC5G;QACF,CAAC,CAAC,OAAOM,KAAK,EAAE;UACd;UACA,MAAMC,WAAW,GAAG,MAAMrB,WAAW,CAACQ,IAAI,CAAC,CAAC;UAC5C3B,cAAc,CAACiB,UAAU,CAAC;UAC1Bf,wBAAwB,CAAC,KAAK,CAAC;UAC/B,OAAO;YAAE0B,EAAE,EAAET,WAAW,CAACS,EAAE;YAAEC,MAAM,EAAEV,WAAW,CAACU,MAAM;YAAEC,WAAW,EAAER,EAAE;YAAEK,IAAI,EAAEa,WAAW;YAAET,QAAQ,EAAEd,UAAU;YAAEpB,KAAK,EAAE0C;UAAM,CAAC;QACnI;MACF;;MAEA;MACA,IAAIjB,EAAE,CAACG,QAAQ,CAAC,kBAAkB,CAAC,EAAE;QACnC,MAAMa,IAAI,GAAG,MAAMnB,WAAW,CAACmB,IAAI,CAAC,CAAC;QACrCtC,cAAc,CAACiB,UAAU,CAAC;QAC1Bf,wBAAwB,CAAC,KAAK,CAAC;QAC/B,OAAO;UAAE0B,EAAE,EAAET,WAAW,CAACS,EAAE;UAAEC,MAAM,EAAEV,WAAW,CAACU,MAAM;UAAEC,WAAW,EAAER,EAAE;UAAEgB,IAAI;UAAEP,QAAQ,EAAEd;QAAW,CAAC;MACxG;;MAEA;MACA,MAAMU,IAAI,GAAG,MAAMR,WAAW,CAACQ,IAAI,CAAC,CAAC;MACrC3B,cAAc,CAACiB,UAAU,CAAC;MAC1Bf,wBAAwB,CAAC,KAAK,CAAC;MAC/B,OAAO;QAAE0B,EAAE,EAAET,WAAW,CAACS,EAAE;QAAEC,MAAM,EAAEV,WAAW,CAACU,MAAM;QAAEC,WAAW,EAAER,EAAE;QAAEK,IAAI;QAAEI,QAAQ,EAAEd;MAAW,CAAC;IACxG,CAAC,CAAC,OAAOwB,GAAG,EAAE;MACZ;MACA,IAAI,CAACxC,qBAAqB,EAAE;QAC1BC,wBAAwB,CAAC,IAAI,CAAC;QAC9B,MAAM+B,WAAW,GAAG1B,QAAQ,CAAC3B,eAAe,EAAEiC,aAAa,CAAC;QAC5D,IAAI;UAAA,IAAA6B,YAAA;UACF,MAAMN,YAAY,GAAG,MAAMhB,KAAK,CAACa,WAAW,EAAE;YAAE,GAAGnB,IAAI;YAAEO,KAAK,GAAAqB,YAAA,GAAE5B,IAAI,CAACO,KAAK,cAAAqB,YAAA,cAAAA,YAAA,GAAI;UAAW,CAAC,CAAC;UAC3F,MAAML,GAAG,GAAGD,YAAY,CAACb,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC,IAAI,EAAE;UAC1D,IAAIa,GAAG,CAACZ,QAAQ,CAAC,kBAAkB,CAAC,EAAE;YACpC,MAAMa,IAAI,GAAG,MAAMF,YAAY,CAACE,IAAI,CAAC,CAAC;YACtCtC,cAAc,CAACiC,WAAW,CAAC;YAC3B/B,wBAAwB,CAAC,KAAK,CAAC;YAC/B,OAAO;cAAE0B,EAAE,EAAEQ,YAAY,CAACR,EAAE;cAAEC,MAAM,EAAEO,YAAY,CAACP,MAAM;cAAEC,WAAW,EAAEO,GAAG;cAAEC,IAAI;cAAEP,QAAQ,EAAEE;YAAY,CAAC;UAC5G,CAAC,MAAM;YACL,MAAMN,IAAI,GAAG,MAAMS,YAAY,CAACT,IAAI,CAAC,CAAC;YACtC3B,cAAc,CAACiC,WAAW,CAAC;YAC3B/B,wBAAwB,CAAC,KAAK,CAAC;YAC/B,OAAO;cAAE0B,EAAE,EAAEQ,YAAY,CAACR,EAAE;cAAEC,MAAM,EAAEO,YAAY,CAACP,MAAM;cAAEC,WAAW,EAAEO,GAAG;cAAEV,IAAI;cAAEI,QAAQ,EAAEE;YAAY,CAAC;UAC5G;QACF,CAAC,CAAC,OAAOM,KAAK,EAAE;UACdrC,wBAAwB,CAAC,KAAK,CAAC;UAC/B,OAAO;YAAE0B,EAAE,EAAE,KAAK;YAAEC,MAAM,EAAE,CAAC;YAAEhC,KAAK,EAAE0C,KAAK;YAAER,QAAQ,EAAE;UAAK,CAAC;QAC/D;MACF;MACA,OAAO;QAAEH,EAAE,EAAE,KAAK;QAAEC,MAAM,EAAE,CAAC;QAAEhC,KAAK,EAAE4C,GAAG;QAAEV,QAAQ,EAAE;MAAK,CAAC;IAC7D;EACF;EAEA,eAAezB,YAAYA,CAACqC,MAAM,EAAE;IAClC7C,QAAQ,CAAC,IAAI,CAAC;IACdN,kBAAkB,CAAC,IAAI,CAAC;IACxBF,WAAW,CAAC,EAAE,CAAC;IACf,IAAI;MACF,MAAMsD,OAAO,GAAG,iBAAiBC,kBAAkB,CAACF,MAAM,CAAC,EAAE;MAC7D,MAAMG,MAAM,GAAG,MAAMlC,SAAS,CAACgC,OAAO,EAAE;QAAEG,MAAM,EAAE;MAAM,CAAC,CAAC;MAE1D,IAAID,MAAM,CAACf,QAAQ,EAAE/B,cAAc,CAAC8C,MAAM,CAACf,QAAQ,CAAC;MAEpD,IAAI,CAACe,MAAM,CAAClB,EAAE,EAAE;QACd,MAAMoB,QAAQ,GAAGF,MAAM,CAACnB,IAAI,IAAIsB,IAAI,CAACC,SAAS,CAACJ,MAAM,CAACR,IAAI,CAAC,IAAI,EAAE;QACjE,MAAM,IAAIa,KAAK,CAAC,gBAAgBL,MAAM,CAACjB,MAAM,IAAImB,QAAQ,EAAE,CAAC;MAC9D;MAEA,IAAIF,MAAM,CAAChB,WAAW,IAAIgB,MAAM,CAAChB,WAAW,CAACL,QAAQ,CAAC,kBAAkB,CAAC,IAAI2B,KAAK,CAACC,OAAO,CAACP,MAAM,CAACR,IAAI,CAAC,EAAE;QACvGhD,WAAW,CAACwD,MAAM,CAACR,IAAI,CAAC;QACxB;MACF;MAEA,IAAIQ,MAAM,CAACnB,IAAI,EAAE;QACf,MAAM,IAAIwB,KAAK,CAAC,kDAAkDL,MAAM,CAAChB,WAAW,SAASgB,MAAM,CAACnB,IAAI,CAAC2B,SAAS,CAAC,CAAC,EAAE,IAAI,CAAC,EAAE,CAAC;MAChI;MAEAhE,WAAW,CAAC,EAAE,CAAC;IACjB,CAAC,CAAC,OAAOmD,GAAG,EAAE;MACZc,OAAO,CAAC1D,KAAK,CAAC,qBAAqB,EAAE4C,GAAG,CAAC;MACzC3C,QAAQ,CAAC2C,GAAG,CAACe,OAAO,IAAI,yBAAyB,CAAC;IACpD,CAAC,SAAS;MACRhE,kBAAkB,CAAC,KAAK,CAAC;IAC3B;EACF;EAEA,eAAeiE,aAAaA,CAACd,MAAM,EAAEe,OAAO,EAAE;IAC5C5D,QAAQ,CAAC,IAAI,CAAC;IACdF,iBAAiB,CAAE+D,CAAC,KAAM;MAAE,GAAGA,CAAC;MAAE,CAACD,OAAO,GAAG;IAAK,CAAC,CAAC,CAAC;IACrD,IAAI;MACF,MAAMd,OAAO,GAAG,cAAc;MAC9B,MAAME,MAAM,GAAG,MAAMlC,SAAS,CAACgC,OAAO,EAAE;QACtCG,MAAM,EAAE,MAAM;QACdxB,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CW,IAAI,EAAEe,IAAI,CAACC,SAAS,CAAC;UAAEP,MAAM;UAAEe,OAAO;UAAEE,UAAU,EAAE;QAAI,CAAC;MAC3D,CAAC,CAAC;MAEF,IAAId,MAAM,CAACf,QAAQ,EAAE/B,cAAc,CAAC8C,MAAM,CAACf,QAAQ,CAAC;MAEpD,IAAI,CAACe,MAAM,CAAClB,EAAE,EAAE;QACd,MAAMM,IAAI,GAAGY,MAAM,CAACnB,IAAI,IAAIsB,IAAI,CAACC,SAAS,CAACJ,MAAM,CAACR,IAAI,CAAC,IAAI,EAAE;QAC7D,MAAM,IAAIa,KAAK,CAAC,mBAAmBL,MAAM,CAACjB,MAAM,IAAIK,IAAI,EAAE,CAAC;MAC7D;MAEA,IAAIY,MAAM,CAAChB,WAAW,IAAIgB,MAAM,CAAChB,WAAW,CAACL,QAAQ,CAAC,kBAAkB,CAAC,IAAIqB,MAAM,CAACR,IAAI,EAAE;QACxF5C,WAAW,CAAEiE,CAAC,KAAM;UAAE,GAAGA,CAAC;UAAE,CAACD,OAAO,GAAGZ,MAAM,CAACR;QAAK,CAAC,CAAC,CAAC;QACtD;MACF;MAEA,IAAIQ,MAAM,CAACnB,IAAI,EAAE;QACf,MAAM,IAAIwB,KAAK,CAAC,8BAA8BL,MAAM,CAACnB,IAAI,EAAE,CAAC;MAC9D;MAEA,MAAM,IAAIwB,KAAK,CAAC,uBAAuB,CAAC;IAC1C,CAAC,CAAC,OAAOV,GAAG,EAAE;MACZc,OAAO,CAAC1D,KAAK,CAAC,sBAAsB,EAAE4C,GAAG,CAAC;MAC1C3C,QAAQ,CAAC2C,GAAG,CAACe,OAAO,IAAI,0BAA0B,CAAC;IACrD,CAAC,SAAS;MACR5D,iBAAiB,CAAE+D,CAAC,KAAM;QAAE,GAAGA,CAAC;QAAE,CAACD,OAAO,GAAG;MAAM,CAAC,CAAC,CAAC;IACxD;EACF;EAEA,SAASG,cAAcA,CAAC;IAAElB,MAAM;IAAEe;EAAQ,CAAC,EAAE;IAC3C,MAAMI,OAAO,GAAGrE,QAAQ,CAACiE,OAAO,CAAC,IAAI,IAAI;IACzC,MAAMK,UAAU,GAAG,CAAC,CAACpE,cAAc,CAAC+D,OAAO,CAAC;IAE5C,IAAI,CAACI,OAAO,EAAE;MACZ,oBACEvF,OAAA;QACEyF,IAAI,EAAC,QAAQ;QACbC,SAAS,EAAC,oBAAoB;QAC9BC,OAAO,EAAEA,CAAA,KAAMT,aAAa,CAACd,MAAM,EAAEe,OAAO,CAAE;QAC9CS,QAAQ,EAAEJ,UAAW;QAAAK,QAAA,EAEpBL,UAAU,GAAG,aAAa,GAAG;MAAgB;QAAAM,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACxC,CAAC;IAEb;IAEA,MAAM;MAAEC,OAAO;MAAEC,WAAW;MAAEC;IAAa,CAAC,GAAGb,OAAO,IAAI,CAAC,CAAC;IAC5D,oBACEvF,OAAA;MAAK0F,SAAS,EAAC,gBAAgB;MAACW,IAAI,EAAC,OAAO;MAAC,cAAY,UAAUlB,OAAO,EAAG;MAAAU,QAAA,GAC1EK,OAAO,gBACNlG,OAAA;QAAG0F,SAAS,EAAC,YAAY;QAACY,IAAI,EAAEJ,OAAQ;QAACK,MAAM,EAAC,QAAQ;QAACC,GAAG,EAAC,YAAY;QAACC,QAAQ;QAACC,KAAK,EAAC,mBAAmB;QAAAb,QAAA,EAAC;MAAG;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,gBAEpHjG,OAAA;QAAQ0F,SAAS,EAAC,qBAAqB;QAAC,iBAAc,MAAM;QAACgB,KAAK,EAAC,mBAAmB;QAAAb,QAAA,EAAC;MAAG;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CACnG,EAEAE,WAAW,gBACVnG,OAAA;QAAG0F,SAAS,EAAC,YAAY;QAACY,IAAI,EAAEH,WAAY;QAACI,MAAM,EAAC,QAAQ;QAACC,GAAG,EAAC,YAAY;QAACC,QAAQ;QAACC,KAAK,EAAC,uBAAuB;QAAAb,QAAA,EAAC;MAAO;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,gBAEhIjG,OAAA;QAAQ0F,SAAS,EAAC,qBAAqB;QAAC,iBAAc,MAAM;QAACgB,KAAK,EAAC,uBAAuB;QAAAb,QAAA,EAAC;MAAO;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAC3G,EAEAG,YAAY,gBACXpG,OAAA;QAAG0F,SAAS,EAAC,YAAY;QAACY,IAAI,EAAEF,YAAa;QAACG,MAAM,EAAC,QAAQ;QAACC,GAAG,EAAC,YAAY;QAACC,QAAQ;QAACC,KAAK,EAAC,mBAAmB;QAAAb,QAAA,EAAC;MAAQ;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,gBAE9HjG,OAAA;QAAQ0F,SAAS,EAAC,qBAAqB;QAAC,iBAAc,MAAM;QAACgB,KAAK,EAAC,wBAAwB;QAAAb,QAAA,EAAC;MAAQ;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAC7G;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC;EAEV;;EAEA;EACA,MAAMU,eAAe,GAAGnF,WAAW,GAAIA,WAAW,CAACW,UAAU,CAAC,GAAG,CAAC,GAAG,iCAAiC,GAAGX,WAAW,GAAI,IAAI;EAE5H,oBACExB,OAAA;IAAK0F,SAAS,EAAC,cAAc;IAAAG,QAAA,GAC1Bc,eAAe,iBACd3G,OAAA;MAAK4G,KAAK,EAAE;QAAEC,UAAU,EAAE,SAAS;QAAEC,KAAK,EAAE,SAAS;QAAEC,OAAO,EAAE,CAAC;QAAEC,YAAY,EAAE,CAAC;QAAEC,YAAY,EAAE;MAAE,CAAE;MAAApB,QAAA,GAAC,aAC1F,eAAA7F,OAAA;QAAQ4G,KAAK,EAAE;UAAEE,KAAK,EAAE;QAAO,CAAE;QAAAjB,QAAA,EAAEc;MAAe;QAAAb,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAS,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACpE,CACN,eAEDjG,OAAA;MAAS0F,SAAS,EAAC,mBAAmB;MAACW,IAAI,EAAC,SAAS;MAAC,cAAW,SAAS;MAAAR,QAAA,EACvE5F,OAAO,CAACiH,GAAG,CAAEC,GAAG,iBACfnH,OAAA;QAEEyF,IAAI,EAAC,QAAQ;QACbC,SAAS,EAAEyB,GAAG,CAACjH,EAAE,KAAKU,YAAY,GAAG,4CAA4C,GAAG,mBAAoB;QACxG+E,OAAO,EAAEA,CAAA,KAAM9E,eAAe,CAACsG,GAAG,CAACjH,EAAE,CAAE;QACvC,gBAAciH,GAAG,CAACjH,EAAE,KAAKU,YAAa;QAAAiF,QAAA,gBAEtC7F,OAAA;UAAK0F,SAAS,EAAC,oBAAoB;UAAAG,QAAA,EAAEsB,GAAG,CAAChH;QAAK;UAAA2F,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eACrDjG,OAAA;UAAG0F,SAAS,EAAC,mBAAmB;UAAAG,QAAA,EAAEsB,GAAG,CAAC/G;QAAW;UAAA0F,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC;MAAA,GAPjDkB,GAAG,CAACjH,EAAE;QAAA4F,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAQL,CACT;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACK,CAAC,eAEVjG,OAAA;MAAS0F,SAAS,EAAC,sBAAsB;MAAC,aAAU,QAAQ;MAAAG,QAAA,gBAC1D7F,OAAA;QAAQ0F,SAAS,EAAC,uBAAuB;QAAAG,QAAA,gBACvC7F,OAAA;UAAA6F,QAAA,gBACE7F,OAAA;YAAI0F,SAAS,EAAC,sBAAsB;YAAAG,QAAA,EAAE,CAAAjE,gBAAgB,aAAhBA,gBAAgB,uBAAhBA,gBAAgB,CAAEzB,KAAK,KAAI;UAAiB;YAAA2F,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,eACxFjG,OAAA;YAAG0F,SAAS,EAAC,yBAAyB;YAAAG,QAAA,EACnC7E,eAAe,GAAG,mBAAmB,GAAG,GAAGF,QAAQ,CAACsG,MAAM,WAAWtG,QAAQ,CAACsG,MAAM,KAAK,CAAC,GAAG,GAAG,GAAG,EAAE;UAAa;YAAAtB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAClH,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACD,CAAC,eAENjG,OAAA;UAAK0F,SAAS,EAAC,qBAAqB;UAAAG,QAAA,eAClC7F,OAAA;YAAM0F,SAAS,EAAC,YAAY;YAAAG,QAAA,GAAC,aAChB,EAAC,GAAG,EACdjF,YAAY,KAAK,cAAc,GAC5B,OAAO,GACPA,YAAY,KAAK,cAAc,GAC/B,OAAO,GACPA,YAAY,KAAK,WAAW,GAC5B,OAAO,GACP,OAAO;UAAA;YAAAkF,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACP;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACJ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACA,CAAC,eAETjG,OAAA;QAAK0F,SAAS,EAAC,oBAAoB;QAAAG,QAAA,GAChCvE,KAAK,iBACJtB,OAAA;UAAK4G,KAAK,EAAE;YAAEE,KAAK,EAAE,QAAQ;YAAEC,OAAO,EAAE,CAAC;YAAEM,UAAU,EAAE;UAAI,CAAE;UAAAxB,QAAA,EAC1DvE;QAAK;UAAAwE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CACN,EAEAnF,QAAQ,CAACsG,MAAM,KAAK,CAAC,IAAI,CAACpG,eAAe,iBACxChB,OAAA;UAAK0F,SAAS,EAAC,mBAAmB;UAAAG,QAAA,gBAChC7F,OAAA;YAAG0F,SAAS,EAAC,mBAAmB;YAAAG,QAAA,EAAC;UAAsB;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC,eAC3DjG,OAAA;YAAG0F,SAAS,EAAC,kBAAkB;YAAAG,QAAA,EAAC;UAGhC;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACD,CACN,EAEAnF,QAAQ,CAACoG,GAAG,CAAEI,IAAI,iBACjBtH,OAAA;UAAoB0F,SAAS,EAAC,oBAAoB;UAAC,cAAY,WAAW4B,IAAI,EAAG;UAAAzB,QAAA,gBAC/E7F,OAAA;YAAK0F,SAAS,EAAC,oBAAoB;YAAAG,QAAA,gBACjC7F,OAAA;cAAI0F,SAAS,EAAC,oBAAoB;cAAAG,QAAA,EAAEyB;YAAI;cAAAxB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eAC9CjG,OAAA;cAAG0F,SAAS,EAAC,oBAAoB;cAAAG,QAAA,EAAC;YAAO;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC,eAE7CjG,OAAA;cAAK0F,SAAS,EAAC,oBAAoB;cAAAG,QAAA,gBACjC7F,OAAA;gBAAM0F,SAAS,EAAC,8BAA8B;gBAAAG,QAAA,EAAEjE,gBAAgB,aAAhBA,gBAAgB,uBAAhBA,gBAAgB,CAAEzB;cAAK;gBAAA2F,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC,eAC/EjG,OAAA;gBAAM0F,SAAS,EAAC,0BAA0B;gBAAAG,QAAA,EAAC;cAAc;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC7D,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,eAENjG,OAAA;YAAK0F,SAAS,EAAC,oBAAoB;YAAAG,QAAA,gBACjC7F,OAAA;cAAG0F,SAAS,EAAC,iBAAiB;cAAAG,QAAA,gBAAC7F,OAAA;gBAAM0F,SAAS,EAAC,kBAAkB;gBAAAG,QAAA,EAAC;cAAO;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,eAAW;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC,eAC/FjG,OAAA;cAAG0F,SAAS,EAAC,iBAAiB;cAAAG,QAAA,gBAAC7F,OAAA;gBAAM0F,SAAS,EAAC,kBAAkB;gBAAAG,QAAA,EAAC;cAAQ;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,WAAE;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC,eAEvFjG,OAAA,CAACsF,cAAc;cAAClB,MAAM,EAAExD,YAAa;cAACuE,OAAO,EAAEmC;YAAK;cAAAxB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,eAEvDjG,OAAA;cACEyF,IAAI,EAAC,QAAQ;cACbC,SAAS,EAAC,oBAAoB;cAC9BkB,KAAK,EAAE;gBAAEW,SAAS,EAAE;cAAE,CAAE;cACxB5B,OAAO,EAAEA,CAAA,KAAM6B,KAAK,CAAC,2BAA2BF,IAAI,EAAE,CAAE;cAAAzB,QAAA,EACzD;YAED;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC;QAAA,GAzBMqB,IAAI;UAAAxB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OA0BT,CACV,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACP,CAAC;AAEV;AAACzF,EAAA,CAnVuBF,qBAAqB;AAAAmH,EAAA,GAArBnH,qBAAqB;AAAA,IAAAmH,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}