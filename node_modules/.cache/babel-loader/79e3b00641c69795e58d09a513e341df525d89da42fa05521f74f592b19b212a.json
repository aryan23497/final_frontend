{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Aryan\\\\Desktop\\\\SIH\\\\final_frontend\\\\src\\\\modules\\\\DataInsightsModule.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// DataInsightsModule.js\nimport React, { useState, useEffect, useCallback, useRef } from \"react\";\nimport \"./DataInsightsModule.css\";\nimport axios from \"axios\";\n\n/*\r\n  DataInsightsModule (Domain: Taxonomy | Otolith | eDNA)\r\n  - Robust eDNA upload:\r\n    * previews first non-empty line from selected .fasta\r\n    * validates presence of leading '>' (warns, but still allows upload)\r\n    * attempts multiple multipart field names on 422 (fasta, file, fasta_file, upload)\r\n    * surfaces server response JSON/text to UI (no [object Object])\r\n  - eDNA analyze: sends text/plain to /edna/analyze (fallback to JSON)\r\n  - Uploads go to /edna/upload_files on baseEdnaBackend\r\n*/\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction formatDate(iso) {\n  try {\n    const d = new Date(iso);\n    return d.toLocaleString(undefined, {\n      year: \"numeric\",\n      month: \"short\",\n      day: \"2-digit\",\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n      hour12: false,\n      timeZoneName: \"short\"\n    });\n  } catch (e) {\n    return iso;\n  }\n}\nfunction shortId(id) {\n  if (!id) return \"\";\n  return id.length > 10 ? `${id.slice(0, 8)}…` : id;\n}\nfunction normalizeResponse(raw) {\n  if (!raw) return {\n    count: 0,\n    data: []\n  };\n  if (typeof raw === \"object\" && !Array.isArray(raw) && Array.isArray(raw.data)) {\n    return {\n      count: typeof raw.count === \"number\" ? raw.count : raw.data.length,\n      data: raw.data\n    };\n  }\n  if (Array.isArray(raw)) {\n    return {\n      count: raw.length,\n      data: raw\n    };\n  }\n  if (typeof raw === \"object\" && Array.isArray(raw.results)) {\n    return {\n      count: typeof raw.count === \"number\" ? raw.count : raw.results.length,\n      data: raw.results\n    };\n  }\n  if (typeof raw === \"object\" && Array.isArray(raw.items)) {\n    return {\n      count: typeof raw.total === \"number\" ? raw.total : raw.items.length,\n      data: raw.items\n    };\n  }\n  if (typeof raw === \"object\" && (raw.id || raw.scientific_name || raw.species || raw.otolith_id || raw.sequence_id)) {\n    return {\n      count: 1,\n      data: [raw]\n    };\n  }\n  return {\n    count: 0,\n    data: []\n  };\n}\nfunction humanize(key) {\n  if (!key) return \"\";\n  return key.replace(/_/g, \" \").replace(/\\b\\w/g, c => c.toUpperCase());\n}\n\n/* ---------- Results view (table/cards/modal) ---------- */\nfunction DataResultView({\n  normalized\n}) {\n  _s();\n  const [previewUrl, setPreviewUrl] = useState(null);\n  const [previewAlt, setPreviewAlt] = useState(\"\");\n  const items = normalized && normalized.data || [];\n  const count = typeof (normalized === null || normalized === void 0 ? void 0 : normalized.count) === \"number\" ? normalized.count : items.length;\n  const speciesNames = items.map(r => r.scientific_name || r.species || r.name).filter(Boolean);\n\n  // collect union of keys\n  const keysSet = new Set();\n  items.forEach(it => {\n    Object.keys(it || {}).forEach(k => keysSet.add(k));\n  });\n\n  // remove storage_path by default (if present)\n  keysSet.delete(\"storage_path\");\n\n  // preferred order\n  const preferred = [\"id\", \"sequence_id\", \"otolith_id\", \"scientific_name\", \"species\", \"family\", \"genus\", \"locality\", \"original_image_url\", \"lat\", \"lon\", \"created_at\"];\n  const remaining = Array.from(keysSet).filter(k => !preferred.includes(k)).sort();\n  const columns = [...preferred.filter(k => keysSet.has(k)), ...remaining];\n  const safeSrc = url => url || \"\";\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: \"100%\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        gap: 12,\n        alignItems: \"center\",\n        marginBottom: 12\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          style: {\n            margin: 0,\n            color: \"#e6eef6\"\n          },\n          children: [\"Found \", count, \" record\", count !== 1 ? \"s\" : \"\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: \"#9fb4d8\",\n            fontSize: 13,\n            marginTop: 6\n          },\n          children: [\"Species (first \", Math.min(5, speciesNames.length), \"): \", speciesNames.slice(0, 5).join(\", \") || \"—\", speciesNames.length > 5 ? ` + ${speciesNames.length - 5} more` : \"\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          gap: 8\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"ins-action-btn\",\n          onClick: () => {\n            try {\n              navigator.clipboard.writeText(JSON.stringify(normalized, null, 2));\n            } catch (e) {\n              console.warn(e);\n            }\n          },\n          children: \"Copy JSON\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          className: \"ins-action-btn\",\n          style: {\n            textDecoration: \"none\"\n          },\n          href: `data:application/json;charset=utf-8,${encodeURIComponent(JSON.stringify(normalized, null, 2))}`,\n          download: \"response_pretty.json\",\n          children: \"Download\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tax-table-wrap dynamic-table-wrap\",\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"tax-table dynamic-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: columns.map(col => /*#__PURE__*/_jsxDEV(\"th\", {\n              children: humanize(col)\n            }, col, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 39\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: items.map((it, rowIdx) => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: columns.map(col => {\n              const value = it[col];\n\n              // thumbnail columns (display small clickable thumbnail)\n              if (col === \"original_image_url\" && value) {\n                const src = safeSrc(value);\n                return /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"thumb-cell\",\n                    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                      className: \"thumb-img\",\n                      src: src,\n                      alt: it.scientific_name || it.otolith_id || \"image\",\n                      onClick: () => {\n                        setPreviewUrl(src);\n                        setPreviewAlt(it.scientific_name || it.otolith_id || \"image\");\n                      },\n                      onError: e => {\n                        e.currentTarget.style.display = \"none\";\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 167,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"thumb-actions\",\n                      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"ins-action-btn small\",\n                        onClick: () => {\n                          setPreviewUrl(src);\n                          setPreviewAlt(it.scientific_name || it.otolith_id || \"image\");\n                        },\n                        children: \"View\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 175,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                        className: \"ins-action-btn small\",\n                        style: {\n                          textDecoration: \"none\"\n                        },\n                        href: src,\n                        target: \"_blank\",\n                        rel: \"noreferrer\",\n                        children: \"Open\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 176,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 174,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 166,\n                    columnNumber: 25\n                  }, this)\n                }, col, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 165,\n                  columnNumber: 23\n                }, this);\n              }\n\n              // show sequence text lightly if it's a long FASTA sequence field\n              if ((col === \"sequence\" || col === \"fasta\" || col === \"sequence_text\") && typeof value === \"string\") {\n                const short = value.length > 140 ? `${value.slice(0, 140)}…` : value;\n                return /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"pre\", {\n                    className: \"inline-pre\",\n                    children: short\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 186,\n                    columnNumber: 42\n                  }, this)\n                }, col, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 186,\n                  columnNumber: 28\n                }, this);\n              }\n\n              // lat/lon linking when both exist\n              if ((col === \"lat\" || col === \"lon\") && it.lat != null && it.lon != null) {\n                if (col === \"lat\") {\n                  return /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: /*#__PURE__*/_jsxDEV(\"a\", {\n                      href: `https://www.openstreetmap.org/?mlat=${it.lat}&mlon=${it.lon}#map=12/${it.lat}/${it.lon}`,\n                      target: \"_blank\",\n                      rel: \"noreferrer\",\n                      children: it.lat\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 194,\n                      columnNumber: 27\n                    }, this)\n                  }, col, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 193,\n                    columnNumber: 25\n                  }, this);\n                }\n                return /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"a\", {\n                    href: `https://www.openstreetmap.org/?mlat=${it.lat}&mlon=${it.lon}#map=12/${it.lat}/${it.lon}`,\n                    target: \"_blank\",\n                    rel: \"noreferrer\",\n                    children: it.lon\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 200,\n                    columnNumber: 25\n                  }, this)\n                }, col, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 199,\n                  columnNumber: 23\n                }, this);\n              }\n              if (col === \"created_at\" && value) return /*#__PURE__*/_jsxDEV(\"td\", {\n                children: formatDate(value)\n              }, col, false, {\n                fileName: _jsxFileName,\n                lineNumber: 205,\n                columnNumber: 61\n              }, this);\n              if (col === \"id\" && value) return /*#__PURE__*/_jsxDEV(\"td\", {\n                title: value,\n                children: shortId(String(value))\n              }, col, false, {\n                fileName: _jsxFileName,\n                lineNumber: 206,\n                columnNumber: 53\n              }, this);\n              if (value === null || value === undefined || value === \"\") return /*#__PURE__*/_jsxDEV(\"td\", {\n                children: \"\\u2014\"\n              }, col, false, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 85\n              }, this);\n              if (typeof value === \"object\") {\n                try {\n                  return /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: /*#__PURE__*/_jsxDEV(\"pre\", {\n                      className: \"inline-pre\",\n                      children: JSON.stringify(value)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 210,\n                      columnNumber: 48\n                    }, this)\n                  }, col, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 210,\n                    columnNumber: 34\n                  }, this);\n                } catch (e) {\n                  return /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: /*#__PURE__*/_jsxDEV(\"pre\", {\n                      className: \"inline-pre\",\n                      children: \"[object]\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 211,\n                      columnNumber: 54\n                    }, this)\n                  }, col, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 211,\n                    columnNumber: 40\n                  }, this);\n                }\n              }\n              return /*#__PURE__*/_jsxDEV(\"td\", {\n                children: String(value)\n              }, col, false, {\n                fileName: _jsxFileName,\n                lineNumber: 214,\n                columnNumber: 26\n              }, this);\n            })\n          }, it.id || it.otolith_id || it.sequence_id || `${rowIdx}-${JSON.stringify(it).slice(0, 20)}`, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }, this), previewUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"image-modal\",\n      role: \"dialog\",\n      \"aria-modal\": \"true\",\n      onClick: () => setPreviewUrl(null),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"image-modal-content\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"image-modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: \"#e6eef6\",\n              fontWeight: 700\n            },\n            children: previewAlt\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"ins-action-btn small close-btn\",\n            onClick: () => setPreviewUrl(null),\n            children: \"Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"image-modal-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: previewUrl,\n            alt: previewAlt,\n            className: \"image-modal-img\",\n            onError: e => {\n              e.currentTarget.style.display = \"none\";\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 8,\n              display: \"flex\",\n              gap: 8\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"a\", {\n              className: \"ins-action-btn small\",\n              style: {\n                textDecoration: \"none\"\n              },\n              href: previewUrl,\n              target: \"_blank\",\n              rel: \"noreferrer\",\n              children: \"Open in new tab\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n              className: \"ins-action-btn small\",\n              style: {\n                textDecoration: \"none\"\n              },\n              href: previewUrl,\n              download: true,\n              children: \"Download\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 14,\n        display: \"grid\",\n        gridTemplateColumns: \"repeat(auto-fit, minmax(320px, 1fr))\",\n        gap: 12\n      },\n      children: items.map(it => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tax-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"tax-card-head\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontWeight: 700\n            },\n            children: it.scientific_name || it.species || it.name || it.otolith_id || it.sequence_id || \"Unknown\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: \"#94a3b8\",\n              fontSize: 12\n            },\n            children: it.family || it.genus || \"—\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"tax-card-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Genus:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 20\n            }, this), \" \", it.genus || \"—\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Locality:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 20\n            }, this), \" \", it.locality || \"—\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Location:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 20\n            }, this), \" \", it.lat != null ? `${it.lat}, ${it.lon}` : \"—\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Created:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 20\n            }, this), \" \", formatDate(it.created_at)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"details\", {\n          style: {\n            marginTop: 8,\n            color: \"#cfe7ff\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"summary\", {\n            style: {\n              cursor: \"pointer\"\n            },\n            children: \"More fields\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n            style: {\n              marginTop: 8,\n              whiteSpace: \"pre-wrap\",\n              color: \"#e6eef6\",\n              fontSize: 13\n            },\n            children: Object.entries(it).map(([k, v]) => `${k}: ${v}\\n`).join(\"\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 13\n        }, this)]\n      }, it.id || it.otolith_id || it.sequence_id || Math.random(), true, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 117,\n    columnNumber: 5\n  }, this);\n}\n\n/* ---------- Main component ---------- */\n_s(DataResultView, \"8Zsz3i/SlcxeYUGXjtv7aM+zPak=\");\n_c = DataResultView;\nconst DataInsightsModule = () => {\n  _s2();\n  const [domain, setDomain] = useState(\"Taxonomy\");\n\n  // Taxonomy state\n  const [taxAction, setTaxAction] = useState(\"\");\n  const [taxListCount, setTaxListCount] = useState(\"\");\n  const [taxScientificName, setTaxScientificName] = useState(\"\");\n  const [taxFamily, setTaxFamily] = useState(\"\");\n  const [taxGenus, setTaxGenus] = useState(\"\");\n  const [taxOrder, setTaxOrder] = useState(\"\");\n\n  // Otolith state\n  const [otAction, setOtAction] = useState(\"\");\n  const [otListCount, setOtListCount] = useState(\"\");\n  const [otOtolithID, setOtOtolithID] = useState(\"\");\n\n  // eDNA state\n  const [edAction, setEdAction] = useState(\"\"); // analyze | upload\n  const [edFastaText, setEdFastaText] = useState(\"\");\n  const [edFile, setEdFile] = useState(null);\n  const [edFilePreviewLine, setEdFilePreviewLine] = useState(\"\");\n  const [edFileWarning, setEdFileWarning] = useState(\"\");\n\n  // results & control\n  const [normalizedResult, setNormalizedResult] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const controllerRef = useRef(null);\n  const mountedRef = useRef(true);\n  useEffect(() => {\n    mountedRef.current = true;\n    return () => {\n      mountedRef.current = false;\n      if (controllerRef.current) {\n        try {\n          controllerRef.current.abort();\n        } catch (e) {}\n      }\n    };\n  }, []);\n\n  // reset domain-specific states when domain changes\n  useEffect(() => {\n    setNormalizedResult(null);\n    setError(null);\n    setLoading(false);\n\n    // reset taxonomy\n    setTaxAction(\"\");\n    setTaxListCount(\"\");\n    setTaxScientificName(\"\");\n    setTaxFamily(\"\");\n    setTaxGenus(\"\");\n    setTaxOrder(\"\");\n\n    // reset otolith\n    setOtAction(\"\");\n    setOtListCount(\"\");\n    setOtOtolithID(\"\");\n\n    // reset eDNA\n    setEdAction(\"\");\n    setEdFastaText(\"\");\n    setEdFile(null);\n    setEdFilePreviewLine(\"\");\n    setEdFileWarning(\"\");\n  }, [domain]);\n\n  // file preview helper: reads first few lines (async)\n  const readFilePreview = file => {\n    setEdFilePreviewLine(\"\");\n    setEdFileWarning(\"\");\n    if (!file) return;\n    const reader = new FileReader();\n    reader.onload = () => {\n      const txt = String(reader.result || \"\");\n      // get first non-empty line\n      const lines = txt.split(/\\r?\\n/).map(l => l.trim()).filter(Boolean);\n      const first = lines.length ? lines[0] : \"\";\n      setEdFilePreviewLine(first);\n      if (!first.startsWith(\">\")) {\n        setEdFileWarning(\"Warning: FASTA header does not start with '>' — some servers expect a proper FASTA header.\");\n      } else {\n        setEdFileWarning(\"\");\n      }\n    };\n    reader.onerror = () => {\n      setEdFilePreviewLine(\"\");\n      setEdFileWarning(\"Unable to read file preview.\");\n    };\n    reader.readAsText(file.slice(0, 1024 * 100)); // read up to 100KB for preview\n  };\n\n  // handle file select\n  const onFileSelect = file => {\n    setEdFile(file || null);\n    setEdFilePreviewLine(\"\");\n    setEdFileWarning(\"\");\n    if (file) readFilePreview(file);\n  };\n  const handleApply = useCallback(async () => {\n    setError(null);\n\n    // Validation\n    if (domain === \"Taxonomy\") {\n      if (!taxAction) {\n        setError(new Error(\"Select an action for Taxonomy.\"));\n        return;\n      }\n      if (taxAction === \"list\" && !taxListCount) {\n        setError(new Error(\"Enter number of species.\"));\n        return;\n      }\n      if (taxAction === \"species\" && !taxScientificName) {\n        setError(new Error(\"Enter scientific name.\"));\n        return;\n      }\n      if (taxAction === \"filter\" && !taxFamily && !taxGenus && !taxOrder) {\n        setError(new Error(\"Enter at least one of Family/Genus/Order.\"));\n        return;\n      }\n    } else if (domain === \"Otolith\") {\n      if (!otAction) {\n        setError(new Error(\"Select an action for Otolith.\"));\n        return;\n      }\n      if (otAction === \"list\" && !otListCount) {\n        setError(new Error(\"Enter number of species.\"));\n        return;\n      }\n      if (otAction === \"byid\" && !otOtolithID) {\n        setError(new Error(\"Enter OtolithID.\"));\n        return;\n      }\n    } else if (domain === \"eDNA\") {\n      if (!edAction) {\n        setError(new Error(\"Select an action for eDNA.\"));\n        return;\n      }\n      if (edAction === \"analyze\" && !edFastaText) {\n        setError(new Error(\"Enter FASTA code to analyze.\"));\n        return;\n      }\n      if (edAction === \"upload\" && !edFile) {\n        setError(new Error(\"Choose a .fasta file to upload.\"));\n        return;\n      }\n    }\n    setLoading(true);\n    setNormalizedResult(null);\n    if (controllerRef.current) {\n      try {\n        controllerRef.current.abort();\n      } catch (e) {}\n    }\n    const controller = new AbortController();\n    controllerRef.current = controller;\n\n    // Backends (update host if needed)\n    const baseTaxonomyBackend = \"http://192.168.0.2:8000/taxonomy\";\n    const baseOtolithBackend = \"http://192.168.0.2:8000/otolith\";\n    const baseEdnaBackend = \"http://192.168.0.2:8000\"; // base for eDNA endpoints\n\n    try {\n      if (domain === \"Taxonomy\") {\n        let route = \"/list\";\n        if (taxAction === \"list\") route = \"/list\";else if (taxAction === \"species\") route = `/species/${encodeURIComponent(taxScientificName)}`;else if (taxAction === \"filter\") route = \"/filter\";\n        const suffix = route.replace(/^\\/taxonomy/, \"\");\n        const taxonomyUrl = `${baseTaxonomyBackend}${suffix}`;\n        let q = \"\";\n        if (taxAction === \"filter\") {\n          const qp = [];\n          if (taxFamily) qp.push(`family=${encodeURIComponent(taxFamily)}`);\n          if (taxGenus) qp.push(`genus=${encodeURIComponent(taxGenus)}`);\n          if (taxOrder) qp.push(`order=${encodeURIComponent(taxOrder)}`);\n          q = qp.length ? `?${qp.join(\"&\")}` : \"\";\n        } else if (taxAction === \"list\") {\n          if (taxListCount) q = `?limit=${encodeURIComponent(taxListCount)}&offset=0`;else q = `?offset=0`;\n        }\n        try {\n          const resp = await axios.get(`${taxonomyUrl}${q}`, {\n            responseType: \"json\",\n            timeout: 45000,\n            signal: controller.signal,\n            headers: {\n              Accept: \"application/json\"\n            }\n          });\n          if (!mountedRef.current) return;\n          const normalized = normalizeResponse(resp.data);\n          setNormalizedResult(normalized);\n          setError(null);\n          return;\n        } catch (getErr) {\n          try {\n            const postResp = await axios.post(`${baseTaxonomyBackend}${suffix}`, {\n              taxonomy_action: taxAction,\n              count: taxListCount,\n              scientific_name: taxScientificName,\n              family: taxFamily,\n              genus: taxGenus,\n              order: taxOrder\n            }, {\n              responseType: \"json\",\n              timeout: 45000,\n              signal: controller.signal,\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Accept: \"application/json\"\n              }\n            });\n            if (!mountedRef.current) return;\n            const normalized = normalizeResponse(postResp.data);\n            setNormalizedResult(normalized);\n            setError(null);\n            return;\n          } catch (postErr) {\n            throw postErr || getErr;\n          }\n        }\n      } else if (domain === \"Otolith\") {\n        let route = \"/list\";\n        if (otAction === \"list\") route = \"/list\";else if (otAction === \"byid\") route = `/by-otolithid/${encodeURIComponent(otOtolithID)}`;\n        const suffix = route.replace(/^\\/otolith/, \"\");\n        const otolithUrl = `${baseOtolithBackend}${suffix}`;\n        let q = \"\";\n        if (otAction === \"list\") {\n          if (otListCount) q = `?limit=${encodeURIComponent(otListCount)}&offset=0`;else q = `?offset=0`;\n        }\n        try {\n          const resp = await axios.get(`${otolithUrl}${q}`, {\n            responseType: \"json\",\n            timeout: 45000,\n            signal: controller.signal,\n            headers: {\n              Accept: \"application/json\"\n            }\n          });\n          if (!mountedRef.current) return;\n          const normalized = normalizeResponse(resp.data);\n          setNormalizedResult(normalized);\n          setError(null);\n          return;\n        } catch (getErr) {\n          try {\n            const postResp = await axios.post(`${baseOtolithBackend}${suffix}`, {\n              action: otAction,\n              count: otListCount,\n              otolith_id: otOtolithID\n            }, {\n              responseType: \"json\",\n              timeout: 45000,\n              signal: controller.signal,\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Accept: \"application/json\"\n              }\n            });\n            if (!mountedRef.current) return;\n            const normalized = normalizeResponse(postResp.data);\n            setNormalizedResult(normalized);\n            setError(null);\n            return;\n          } catch (postErr) {\n            throw postErr || getErr;\n          }\n        }\n      } else if (domain === \"eDNA\") {\n        // eDNA actions\n        if (edAction === \"analyze\") {\n          const analyzeTxtUrl = `${baseEdnaBackend}/edna/analyze`;\n          const analyzeJsonUrl = `${baseEdnaBackend}/post/edna/analyze`;\n\n          // Try text/plain first\n          try {\n            const resp = await axios.post(analyzeTxtUrl, edFastaText, {\n              responseType: \"json\",\n              timeout: 90000,\n              signal: controller.signal,\n              headers: {\n                \"Content-Type\": \"text/plain\",\n                Accept: \"application/json\"\n              }\n            });\n            if (!mountedRef.current) return;\n            const normalized = normalizeResponse(resp.data);\n            setNormalizedResult(normalized);\n            setError(null);\n            return;\n          } catch (txtErr) {\n            // If text/plain failed, try JSON endpoint as fallback\n            try {\n              const resp2 = await axios.post(analyzeJsonUrl, {\n                fasta: edFastaText\n              }, {\n                responseType: \"json\",\n                timeout: 90000,\n                signal: controller.signal,\n                headers: {\n                  \"Content-Type\": \"application/json\",\n                  Accept: \"application/json\"\n                }\n              });\n              if (!mountedRef.current) return;\n              const normalized = normalizeResponse(resp2.data);\n              setNormalizedResult(normalized);\n              setError(null);\n              return;\n            } catch (jsonErr) {\n              throw txtErr || jsonErr;\n            }\n          }\n        } else if (edAction === \"upload\") {\n          // NEW: route uploads to /edna/upload_files\n          const urlBase = `${baseEdnaBackend}/edna/upload-fasta`;\n\n          // Candidate field names to try when server expects different multipart field name\n          const candidateFieldNames = [\"fasta\", \"file\", \"fasta_file\", \"upload\"];\n\n          // Build base FormData once (we will clone for each attempt)\n          const buildForm = fieldName => {\n            const f = new FormData();\n            f.append(fieldName, edFile, edFile.name);\n            // include optional metadata as convenience (server may accept them)\n            f.append(\"original_filename\", edFile.name);\n            return f;\n          };\n          let lastErr = null;\n          for (let i = 0; i < candidateFieldNames.length; i++) {\n            const field = candidateFieldNames[i];\n            const form = buildForm(field);\n            try {\n              // IMPORTANT: do NOT set Content-Type (browser/axios will set boundary)\n              const resp = await axios.post(urlBase, form, {\n                responseType: \"json\",\n                timeout: 120000,\n                signal: controller.signal,\n                headers: {\n                  Accept: \"application/json\"\n                } // no Content-Type\n              });\n              if (!mountedRef.current) return;\n              const normalized = normalizeResponse(resp.data);\n              setNormalizedResult(normalized);\n              setError(null);\n              return;\n            } catch (errAttempt) {\n              var _errAttempt$response;\n              lastErr = errAttempt;\n              // If server returned 422, try next field name. Otherwise break and rethrow.\n              const status = errAttempt === null || errAttempt === void 0 ? void 0 : (_errAttempt$response = errAttempt.response) === null || _errAttempt$response === void 0 ? void 0 : _errAttempt$response.status;\n              if (status === 422) {\n                // try next candidate\n                continue;\n              } else {\n                throw errAttempt;\n              }\n            }\n          }\n\n          // If we exhausted candidates and still failed, throw lastErr to be handled below\n          if (lastErr) throw lastErr;\n        }\n      }\n    } catch (err) {\n      if (!mountedRef.current) return;\n      console.error(\"Request failed:\", err);\n\n      // Better error message extraction\n      if (err.response) {\n        const data = err.response.data;\n        let msg;\n        try {\n          if (typeof data === \"string\") msg = data;else if (typeof data === \"object\") msg = JSON.stringify(data, null, 2);else msg = String(data);\n        } catch (e) {\n          msg = String(data);\n        }\n        setError(new Error(`Server returned ${err.response.status}: ${msg}`));\n      } else if (err.request) {\n        setError(new Error(\"No response from server. Check backend & CORS.\"));\n      } else {\n        setError(new Error(err.message || \"Unknown error\"));\n      }\n    } finally {\n      if (mountedRef.current) setLoading(false);\n    }\n  }, [domain, taxAction, taxListCount, taxScientificName, taxFamily, taxGenus, taxOrder, otAction, otListCount, otOtolithID, edAction, edFastaText, edFile]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"ins-layout\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ins-banner\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"ins-banner-label\",\n        children: \"DATA INSIGHTS\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 628,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"ins-banner-sub\",\n        children: \"Switch domain to view taxonomy, otolith or eDNA endpoints\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 629,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 627,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"ins-grid\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ins-panel ins-left\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"ins-title\",\n          children: \"Controls\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 634,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"ins-text\",\n          children: \"Choose a domain and action, provide inputs and Apply.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 635,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ins-field\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Domain\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 639,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: domain,\n            onChange: e => setDomain(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Taxonomy\",\n              children: \"Taxonomy\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 641,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Otolith\",\n              children: \"Otolith\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 642,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"eDNA\",\n              children: \"eDNA\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 643,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 640,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 638,\n          columnNumber: 11\n        }, this), domain === \"Taxonomy\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ins-field\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Select:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 651,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: taxAction,\n              onChange: e => {\n                setTaxAction(e.target.value);\n                setNormalizedResult(null);\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"-- choose action --\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 653,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"list\",\n                children: \"List Species\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 654,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"species\",\n                children: \"Species Taxonomy\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 655,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"filter\",\n                children: \"Filter Taxonomy\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 656,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 652,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 650,\n            columnNumber: 15\n          }, this), taxAction === \"list\" && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ins-field\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Enter number of species\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 662,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              placeholder: \"Enter number of species\",\n              value: taxListCount,\n              onChange: e => setTaxListCount(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 663,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n              className: \"ins-note\",\n              children: \"Requests /taxonomy/list?limit=&offset=0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 664,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 661,\n            columnNumber: 17\n          }, this), taxAction === \"species\" && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ins-field\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Enter Scientific Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 670,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              placeholder: \"Enter Scientific Name\",\n              value: taxScientificName,\n              onChange: e => setTaxScientificName(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 671,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n              className: \"ins-note\",\n              children: [\"Requests /taxonomy/species/\", `{name}`]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 672,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 669,\n            columnNumber: 17\n          }, this), taxAction === \"filter\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ins-field\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Family\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 678,\n                columnNumber: 46\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                placeholder: \"Enter Family\",\n                value: taxFamily,\n                onChange: e => setTaxFamily(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 678,\n                columnNumber: 67\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 678,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ins-field\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Genus\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 679,\n                columnNumber: 46\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                placeholder: \"Enter Genus\",\n                value: taxGenus,\n                onChange: e => setTaxGenus(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 679,\n                columnNumber: 66\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 679,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ins-field\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Order\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 680,\n                columnNumber: 46\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                placeholder: \"Enter Order\",\n                value: taxOrder,\n                onChange: e => setTaxOrder(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 680,\n                columnNumber: 66\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 680,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n              className: \"ins-note\",\n              children: \"Requests /taxonomy/filter?family=&genus=&order=\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 681,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true)]\n        }, void 0, true), domain === \"Otolith\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ins-field\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Select:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 691,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: otAction,\n              onChange: e => {\n                setOtAction(e.target.value);\n                setNormalizedResult(null);\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"-- choose action --\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 693,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"list\",\n                children: \"List Species\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 694,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"byid\",\n                children: \"Get by Otolith ID\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 695,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 692,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 690,\n            columnNumber: 15\n          }, this), otAction === \"list\" && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ins-field\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Enter number of species\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 701,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              placeholder: \"Enter number of species\",\n              value: otListCount,\n              onChange: e => setOtListCount(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 702,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n              className: \"ins-note\",\n              children: \"Requests /otolith/list?limit=&offset=0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 703,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 700,\n            columnNumber: 17\n          }, this), otAction === \"byid\" && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ins-field\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Enter OtolithID\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 709,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              placeholder: \"Enter OtolithID\",\n              value: otOtolithID,\n              onChange: e => setOtOtolithID(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 710,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n              className: \"ins-note\",\n              children: [\"Requests /otolith/by-otolithid/\", `{id}`]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 711,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 708,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true), domain === \"eDNA\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ins-field\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Select:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 721,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: edAction,\n              onChange: e => {\n                setEdAction(e.target.value);\n                setNormalizedResult(null);\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"-- choose action --\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 723,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"analyze\",\n                children: \"FASTA Analysis\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 724,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"upload\",\n                children: \"Upload FASTA File\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 725,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 722,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 720,\n            columnNumber: 15\n          }, this), edAction === \"analyze\" && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ins-field\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Enter FASTA Code\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 731,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              placeholder: \"Enter FASTA Code (start with >header line)\",\n              value: edFastaText,\n              onChange: e => setEdFastaText(e.target.value),\n              rows: 6\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 732,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n              className: \"ins-note\",\n              children: \"POST /edna/analyze with Content-Type: text/plain (fallback /post/edna/analyze)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 738,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 730,\n            columnNumber: 17\n          }, this), edAction === \"upload\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ins-field\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Upload FASTA File\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 745,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                accept: \".fasta,.fa,.fna\",\n                onChange: e => {\n                  const f = e.target.files && e.target.files[0];\n                  onFileSelect(f || null);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 746,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                className: \"ins-note\",\n                children: \"POST /edna/upload_files (multipart/form-data). Field names tried: fasta,file,fasta_file,upload\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 754,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 744,\n              columnNumber: 19\n            }, this), edFile && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginTop: 8,\n                color: \"#cfe7ff\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Selected:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 759,\n                  columnNumber: 28\n                }, this), \" \", edFile.name, \" \\u2014 \", (edFile.size / 1024).toFixed(1), \" KB\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 759,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginTop: 6\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Preview (first non-empty line):\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 761,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    marginTop: 6,\n                    background: \"rgba(2,6,23,0.5)\",\n                    padding: 8,\n                    borderRadius: 6,\n                    color: \"#dbeafe\"\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"code\", {\n                    style: {\n                      whiteSpace: \"pre-wrap\"\n                    },\n                    children: edFilePreviewLine || \"—\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 763,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 762,\n                  columnNumber: 25\n                }, this), edFileWarning && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    marginTop: 6,\n                    color: \"#ffcccb\"\n                  },\n                  children: edFileWarning\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 765,\n                  columnNumber: 43\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 760,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 758,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: 10\n          },\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"ins-action-btn\",\n            onClick: handleApply,\n            disabled: loading,\n            children: loading ? \"Fetching…\" : \"Apply\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 775,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 774,\n          columnNumber: 11\n        }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: 10,\n            color: \"#ffbdbd\",\n            whiteSpace: \"pre-wrap\"\n          },\n          children: error.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 778,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 633,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ins-panel ins-right\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"ins-title\",\n          children: \"Results\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 782,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"ins-text\",\n          children: \"Response will appear here (table + cards). All keys are shown as columns.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 783,\n          columnNumber: 11\n        }, this), normalizedResult ? /*#__PURE__*/_jsxDEV(DataResultView, {\n          normalized: normalizedResult\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 786,\n          columnNumber: 13\n        }, this) : loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: \"#9fb4d8\"\n          },\n          children: \"Fetching data\\u2026\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 788,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: \"#9ca3af\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"No response yet. Choose domain + action and click Apply.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 791,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 790,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 781,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 632,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 626,\n    columnNumber: 5\n  }, this);\n};\n_s2(DataInsightsModule, \"V5xYVKI+pJVkkr2/8bBvLEgtTfM=\");\n_c2 = DataInsightsModule;\nexport default DataInsightsModule;\nvar _c, _c2;\n$RefreshReg$(_c, \"DataResultView\");\n$RefreshReg$(_c2, \"DataInsightsModule\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useRef","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","formatDate","iso","d","Date","toLocaleString","undefined","year","month","day","hour","minute","hour12","timeZoneName","e","shortId","id","length","slice","normalizeResponse","raw","count","data","Array","isArray","results","items","total","scientific_name","species","otolith_id","sequence_id","humanize","key","replace","c","toUpperCase","DataResultView","normalized","_s","previewUrl","setPreviewUrl","previewAlt","setPreviewAlt","speciesNames","map","r","name","filter","Boolean","keysSet","Set","forEach","it","Object","keys","k","add","delete","preferred","remaining","from","includes","sort","columns","has","safeSrc","url","style","width","children","display","justifyContent","gap","alignItems","marginBottom","margin","color","fileName","_jsxFileName","lineNumber","columnNumber","fontSize","marginTop","Math","min","join","className","onClick","navigator","clipboard","writeText","JSON","stringify","console","warn","textDecoration","href","encodeURIComponent","download","col","rowIdx","value","src","alt","onError","currentTarget","target","rel","short","lat","lon","title","String","role","stopPropagation","fontWeight","gridTemplateColumns","family","genus","locality","created_at","cursor","whiteSpace","entries","v","random","_c","DataInsightsModule","_s2","domain","setDomain","taxAction","setTaxAction","taxListCount","setTaxListCount","taxScientificName","setTaxScientificName","taxFamily","setTaxFamily","taxGenus","setTaxGenus","taxOrder","setTaxOrder","otAction","setOtAction","otListCount","setOtListCount","otOtolithID","setOtOtolithID","edAction","setEdAction","edFastaText","setEdFastaText","edFile","setEdFile","edFilePreviewLine","setEdFilePreviewLine","edFileWarning","setEdFileWarning","normalizedResult","setNormalizedResult","loading","setLoading","error","setError","controllerRef","mountedRef","current","abort","readFilePreview","file","reader","FileReader","onload","txt","result","lines","split","l","trim","first","startsWith","onerror","readAsText","onFileSelect","handleApply","Error","controller","AbortController","baseTaxonomyBackend","baseOtolithBackend","baseEdnaBackend","route","suffix","taxonomyUrl","q","qp","push","resp","get","responseType","timeout","signal","headers","Accept","getErr","postResp","post","taxonomy_action","order","postErr","otolithUrl","action","analyzeTxtUrl","analyzeJsonUrl","txtErr","resp2","fasta","jsonErr","urlBase","candidateFieldNames","buildForm","fieldName","f","FormData","append","lastErr","i","field","form","errAttempt","_errAttempt$response","status","response","err","msg","request","message","onChange","placeholder","rows","type","accept","files","size","toFixed","background","padding","borderRadius","disabled","_c2","$RefreshReg$"],"sources":["C:/Users/Aryan/Desktop/SIH/final_frontend/src/modules/DataInsightsModule.js"],"sourcesContent":["// DataInsightsModule.js\r\nimport React, { useState, useEffect, useCallback, useRef } from \"react\";\r\nimport \"./DataInsightsModule.css\";\r\nimport axios from \"axios\";\r\n\r\n/*\r\n  DataInsightsModule (Domain: Taxonomy | Otolith | eDNA)\r\n  - Robust eDNA upload:\r\n    * previews first non-empty line from selected .fasta\r\n    * validates presence of leading '>' (warns, but still allows upload)\r\n    * attempts multiple multipart field names on 422 (fasta, file, fasta_file, upload)\r\n    * surfaces server response JSON/text to UI (no [object Object])\r\n  - eDNA analyze: sends text/plain to /edna/analyze (fallback to JSON)\r\n  - Uploads go to /edna/upload_files on baseEdnaBackend\r\n*/\r\n\r\nfunction formatDate(iso) {\r\n  try {\r\n    const d = new Date(iso);\r\n    return d.toLocaleString(undefined, {\r\n      year: \"numeric\",\r\n      month: \"short\",\r\n      day: \"2-digit\",\r\n      hour: \"2-digit\",\r\n      minute: \"2-digit\",\r\n      hour12: false,\r\n      timeZoneName: \"short\",\r\n    });\r\n  } catch (e) {\r\n    return iso;\r\n  }\r\n}\r\n\r\nfunction shortId(id) {\r\n  if (!id) return \"\";\r\n  return id.length > 10 ? `${id.slice(0, 8)}…` : id;\r\n}\r\n\r\nfunction normalizeResponse(raw) {\r\n  if (!raw) return { count: 0, data: [] };\r\n\r\n  if (typeof raw === \"object\" && !Array.isArray(raw) && Array.isArray(raw.data)) {\r\n    return {\r\n      count: typeof raw.count === \"number\" ? raw.count : raw.data.length,\r\n      data: raw.data,\r\n    };\r\n  }\r\n\r\n  if (Array.isArray(raw)) {\r\n    return { count: raw.length, data: raw };\r\n  }\r\n\r\n  if (typeof raw === \"object\" && Array.isArray(raw.results)) {\r\n    return {\r\n      count: typeof raw.count === \"number\" ? raw.count : raw.results.length,\r\n      data: raw.results,\r\n    };\r\n  }\r\n\r\n  if (typeof raw === \"object\" && Array.isArray(raw.items)) {\r\n    return {\r\n      count: typeof raw.total === \"number\" ? raw.total : raw.items.length,\r\n      data: raw.items,\r\n    };\r\n  }\r\n\r\n  if (typeof raw === \"object\" && (raw.id || raw.scientific_name || raw.species || raw.otolith_id || raw.sequence_id)) {\r\n    return { count: 1, data: [raw] };\r\n  }\r\n\r\n  return { count: 0, data: [] };\r\n}\r\n\r\nfunction humanize(key) {\r\n  if (!key) return \"\";\r\n  return key.replace(/_/g, \" \").replace(/\\b\\w/g, (c) => c.toUpperCase());\r\n}\r\n\r\n/* ---------- Results view (table/cards/modal) ---------- */\r\nfunction DataResultView({ normalized }) {\r\n  const [previewUrl, setPreviewUrl] = useState(null);\r\n  const [previewAlt, setPreviewAlt] = useState(\"\");\r\n  const items = (normalized && normalized.data) || [];\r\n  const count = typeof normalized?.count === \"number\" ? normalized.count : items.length;\r\n  const speciesNames = items.map((r) => r.scientific_name || r.species || r.name).filter(Boolean);\r\n\r\n  // collect union of keys\r\n  const keysSet = new Set();\r\n  items.forEach((it) => {\r\n    Object.keys(it || {}).forEach((k) => keysSet.add(k));\r\n  });\r\n\r\n  // remove storage_path by default (if present)\r\n  keysSet.delete(\"storage_path\");\r\n\r\n  // preferred order\r\n  const preferred = [\r\n    \"id\",\r\n    \"sequence_id\",\r\n    \"otolith_id\",\r\n    \"scientific_name\",\r\n    \"species\",\r\n    \"family\",\r\n    \"genus\",\r\n    \"locality\",\r\n    \"original_image_url\",\r\n    \"lat\",\r\n    \"lon\",\r\n    \"created_at\",\r\n  ];\r\n  const remaining = Array.from(keysSet).filter((k) => !preferred.includes(k)).sort();\r\n  const columns = [...preferred.filter((k) => keysSet.has(k)), ...remaining];\r\n\r\n  const safeSrc = (url) => url || \"\";\r\n\r\n  return (\r\n    <div style={{ width: \"100%\" }}>\r\n      {/* Summary & actions */}\r\n      <div style={{ display: \"flex\", justifyContent: \"space-between\", gap: 12, alignItems: \"center\", marginBottom: 12 }}>\r\n        <div>\r\n          <h4 style={{ margin: 0, color: \"#e6eef6\" }}>Found {count} record{count !== 1 ? \"s\" : \"\"}</h4>\r\n          <div style={{ color: \"#9fb4d8\", fontSize: 13, marginTop: 6 }}>\r\n            Species (first {Math.min(5, speciesNames.length)}): {speciesNames.slice(0, 5).join(\", \") || \"—\"}\r\n            {speciesNames.length > 5 ? ` + ${speciesNames.length - 5} more` : \"\"}\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{ display: \"flex\", gap: 8 }}>\r\n          <button\r\n            className=\"ins-action-btn\"\r\n            onClick={() => {\r\n              try { navigator.clipboard.writeText(JSON.stringify(normalized, null, 2)); } catch (e) { console.warn(e); }\r\n            }}\r\n          >\r\n            Copy JSON\r\n          </button>\r\n\r\n          <a\r\n            className=\"ins-action-btn\"\r\n            style={{ textDecoration: \"none\" }}\r\n            href={`data:application/json;charset=utf-8,${encodeURIComponent(JSON.stringify(normalized, null, 2))}`}\r\n            download=\"response_pretty.json\"\r\n          >\r\n            Download\r\n          </a>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Dynamic table */}\r\n      <div className=\"tax-table-wrap dynamic-table-wrap\">\r\n        <table className=\"tax-table dynamic-table\">\r\n          <thead>\r\n            <tr>{columns.map((col) => <th key={col}>{humanize(col)}</th>)}</tr>\r\n          </thead>\r\n          <tbody>\r\n            {items.map((it, rowIdx) => (\r\n              <tr key={it.id || it.otolith_id || it.sequence_id || `${rowIdx}-${JSON.stringify(it).slice(0,20)}`}>\r\n                {columns.map((col) => {\r\n                  const value = it[col];\r\n\r\n                  // thumbnail columns (display small clickable thumbnail)\r\n                  if ((col === \"original_image_url\") && value) {\r\n                    const src = safeSrc(value);\r\n                    return (\r\n                      <td key={col}>\r\n                        <div className=\"thumb-cell\">\r\n                          <img\r\n                            className=\"thumb-img\"\r\n                            src={src}\r\n                            alt={it.scientific_name || it.otolith_id || \"image\"}\r\n                            onClick={() => { setPreviewUrl(src); setPreviewAlt(it.scientific_name || it.otolith_id || \"image\"); }}\r\n                            onError={(e) => { e.currentTarget.style.display = \"none\"; }}\r\n                          />\r\n                          <div className=\"thumb-actions\">\r\n                            <button className=\"ins-action-btn small\" onClick={() => { setPreviewUrl(src); setPreviewAlt(it.scientific_name || it.otolith_id || \"image\"); }}>View</button>\r\n                            <a className=\"ins-action-btn small\" style={{ textDecoration: \"none\" }} href={src} target=\"_blank\" rel=\"noreferrer\">Open</a>\r\n                          </div>\r\n                        </div>\r\n                      </td>\r\n                    );\r\n                  }\r\n\r\n                  // show sequence text lightly if it's a long FASTA sequence field\r\n                  if ((col === \"sequence\" || col === \"fasta\" || col === \"sequence_text\") && typeof value === \"string\") {\r\n                    const short = value.length > 140 ? `${value.slice(0, 140)}…` : value;\r\n                    return <td key={col}><pre className=\"inline-pre\">{short}</pre></td>;\r\n                  }\r\n\r\n                  // lat/lon linking when both exist\r\n                  if ((col === \"lat\" || col === \"lon\") && (it.lat != null && it.lon != null)) {\r\n                    if (col === \"lat\") {\r\n                      return (\r\n                        <td key={col}>\r\n                          <a href={`https://www.openstreetmap.org/?mlat=${it.lat}&mlon=${it.lon}#map=12/${it.lat}/${it.lon}`} target=\"_blank\" rel=\"noreferrer\">{it.lat}</a>\r\n                        </td>\r\n                      );\r\n                    }\r\n                    return (\r\n                      <td key={col}>\r\n                        <a href={`https://www.openstreetmap.org/?mlat=${it.lat}&mlon=${it.lon}#map=12/${it.lat}/${it.lon}`} target=\"_blank\" rel=\"noreferrer\">{it.lon}</a>\r\n                      </td>\r\n                    );\r\n                  }\r\n\r\n                  if (col === \"created_at\" && value) return <td key={col}>{formatDate(value)}</td>;\r\n                  if (col === \"id\" && value) return <td key={col} title={value}>{shortId(String(value))}</td>;\r\n\r\n                  if (value === null || value === undefined || value === \"\") return <td key={col}>—</td>;\r\n                  if (typeof value === \"object\") {\r\n                    try { return <td key={col}><pre className=\"inline-pre\">{JSON.stringify(value)}</pre></td>; }\r\n                    catch (e) { return <td key={col}><pre className=\"inline-pre\">[object]</pre></td>; }\r\n                  }\r\n\r\n                  return <td key={col}>{String(value)}</td>;\r\n                })}\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {/* Image modal */}\r\n      {previewUrl && (\r\n        <div className=\"image-modal\" role=\"dialog\" aria-modal=\"true\" onClick={() => setPreviewUrl(null)}>\r\n          <div className=\"image-modal-content\" onClick={(e) => e.stopPropagation()}>\r\n            <div className=\"image-modal-header\">\r\n              <div style={{ color: \"#e6eef6\", fontWeight: 700 }}>{previewAlt}</div>\r\n              <button className=\"ins-action-btn small close-btn\" onClick={() => setPreviewUrl(null)}>Close</button>\r\n            </div>\r\n            <div className=\"image-modal-body\">\r\n              <img src={previewUrl} alt={previewAlt} className=\"image-modal-img\" onError={(e) => { e.currentTarget.style.display = \"none\"; }} />\r\n              <div style={{ marginTop: 8, display: \"flex\", gap: 8 }}>\r\n                <a className=\"ins-action-btn small\" style={{ textDecoration: \"none\" }} href={previewUrl} target=\"_blank\" rel=\"noreferrer\">Open in new tab</a>\r\n                <a className=\"ins-action-btn small\" style={{ textDecoration: \"none\" }} href={previewUrl} download>Download</a>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Card view */}\r\n      <div style={{ marginTop: 14, display: \"grid\", gridTemplateColumns: \"repeat(auto-fit, minmax(320px, 1fr))\", gap: 12 }}>\r\n        {items.map((it) => (\r\n          <div key={it.id || it.otolith_id || it.sequence_id || Math.random()} className=\"tax-card\">\r\n            <div className=\"tax-card-head\">\r\n              <div style={{ fontWeight: 700 }}>{it.scientific_name || it.species || it.name || it.otolith_id || it.sequence_id || \"Unknown\"}</div>\r\n              <div style={{ color: \"#94a3b8\", fontSize: 12 }}>{it.family || it.genus || \"—\"}</div>\r\n            </div>\r\n\r\n            <div className=\"tax-card-body\">\r\n              <div><strong>Genus:</strong> {it.genus || \"—\"}</div>\r\n              <div><strong>Locality:</strong> {it.locality || \"—\"}</div>\r\n              <div><strong>Location:</strong> {it.lat != null ? `${it.lat}, ${it.lon}` : \"—\"}</div>\r\n              <div><strong>Created:</strong> {formatDate(it.created_at)}</div>\r\n            </div>\r\n\r\n            <details style={{ marginTop: 8, color: \"#cfe7ff\" }}>\r\n              <summary style={{ cursor: \"pointer\" }}>More fields</summary>\r\n              <pre style={{ marginTop: 8, whiteSpace: \"pre-wrap\", color: \"#e6eef6\", fontSize: 13 }}>\r\n                {Object.entries(it).map(([k, v]) => `${k}: ${v}\\n`).join(\"\")}\r\n              </pre>\r\n            </details>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* ---------- Main component ---------- */\r\nconst DataInsightsModule = () => {\r\n  const [domain, setDomain] = useState(\"Taxonomy\");\r\n\r\n  // Taxonomy state\r\n  const [taxAction, setTaxAction] = useState(\"\");\r\n  const [taxListCount, setTaxListCount] = useState(\"\");\r\n  const [taxScientificName, setTaxScientificName] = useState(\"\");\r\n  const [taxFamily, setTaxFamily] = useState(\"\");\r\n  const [taxGenus, setTaxGenus] = useState(\"\");\r\n  const [taxOrder, setTaxOrder] = useState(\"\");\r\n\r\n  // Otolith state\r\n  const [otAction, setOtAction] = useState(\"\");\r\n  const [otListCount, setOtListCount] = useState(\"\");\r\n  const [otOtolithID, setOtOtolithID] = useState(\"\");\r\n\r\n  // eDNA state\r\n  const [edAction, setEdAction] = useState(\"\"); // analyze | upload\r\n  const [edFastaText, setEdFastaText] = useState(\"\");\r\n  const [edFile, setEdFile] = useState(null);\r\n  const [edFilePreviewLine, setEdFilePreviewLine] = useState(\"\");\r\n  const [edFileWarning, setEdFileWarning] = useState(\"\");\r\n\r\n  // results & control\r\n  const [normalizedResult, setNormalizedResult] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const controllerRef = useRef(null);\r\n  const mountedRef = useRef(true);\r\n\r\n  useEffect(() => {\r\n    mountedRef.current = true;\r\n    return () => {\r\n      mountedRef.current = false;\r\n      if (controllerRef.current) {\r\n        try { controllerRef.current.abort(); } catch (e) {}\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // reset domain-specific states when domain changes\r\n  useEffect(() => {\r\n    setNormalizedResult(null);\r\n    setError(null);\r\n    setLoading(false);\r\n\r\n    // reset taxonomy\r\n    setTaxAction(\"\");\r\n    setTaxListCount(\"\");\r\n    setTaxScientificName(\"\");\r\n    setTaxFamily(\"\");\r\n    setTaxGenus(\"\");\r\n    setTaxOrder(\"\");\r\n\r\n    // reset otolith\r\n    setOtAction(\"\");\r\n    setOtListCount(\"\");\r\n    setOtOtolithID(\"\");\r\n\r\n    // reset eDNA\r\n    setEdAction(\"\");\r\n    setEdFastaText(\"\");\r\n    setEdFile(null);\r\n    setEdFilePreviewLine(\"\");\r\n    setEdFileWarning(\"\");\r\n  }, [domain]);\r\n\r\n  // file preview helper: reads first few lines (async)\r\n  const readFilePreview = (file) => {\r\n    setEdFilePreviewLine(\"\");\r\n    setEdFileWarning(\"\");\r\n    if (!file) return;\r\n\r\n    const reader = new FileReader();\r\n    reader.onload = () => {\r\n      const txt = String(reader.result || \"\");\r\n      // get first non-empty line\r\n      const lines = txt.split(/\\r?\\n/).map(l => l.trim()).filter(Boolean);\r\n      const first = lines.length ? lines[0] : \"\";\r\n      setEdFilePreviewLine(first);\r\n\r\n      if (!first.startsWith(\">\")) {\r\n        setEdFileWarning(\"Warning: FASTA header does not start with '>' — some servers expect a proper FASTA header.\");\r\n      } else {\r\n        setEdFileWarning(\"\");\r\n      }\r\n    };\r\n    reader.onerror = () => {\r\n      setEdFilePreviewLine(\"\");\r\n      setEdFileWarning(\"Unable to read file preview.\");\r\n    };\r\n    reader.readAsText(file.slice(0, 1024 * 100)); // read up to 100KB for preview\r\n  };\r\n\r\n  // handle file select\r\n  const onFileSelect = (file) => {\r\n    setEdFile(file || null);\r\n    setEdFilePreviewLine(\"\");\r\n    setEdFileWarning(\"\");\r\n    if (file) readFilePreview(file);\r\n  };\r\n\r\n  const handleApply = useCallback(async () => {\r\n    setError(null);\r\n\r\n    // Validation\r\n    if (domain === \"Taxonomy\") {\r\n      if (!taxAction) { setError(new Error(\"Select an action for Taxonomy.\")); return; }\r\n      if (taxAction === \"list\" && !taxListCount) { setError(new Error(\"Enter number of species.\")); return; }\r\n      if (taxAction === \"species\" && !taxScientificName) { setError(new Error(\"Enter scientific name.\")); return; }\r\n      if (taxAction === \"filter\" && !taxFamily && !taxGenus && !taxOrder) { setError(new Error(\"Enter at least one of Family/Genus/Order.\")); return; }\r\n    } else if (domain === \"Otolith\") {\r\n      if (!otAction) { setError(new Error(\"Select an action for Otolith.\")); return; }\r\n      if (otAction === \"list\" && !otListCount) { setError(new Error(\"Enter number of species.\")); return; }\r\n      if (otAction === \"byid\" && !otOtolithID) { setError(new Error(\"Enter OtolithID.\")); return; }\r\n    } else if (domain === \"eDNA\") {\r\n      if (!edAction) { setError(new Error(\"Select an action for eDNA.\")); return; }\r\n      if (edAction === \"analyze\" && !edFastaText) { setError(new Error(\"Enter FASTA code to analyze.\")); return; }\r\n      if (edAction === \"upload\" && !edFile) { setError(new Error(\"Choose a .fasta file to upload.\")); return; }\r\n    }\r\n\r\n    setLoading(true);\r\n    setNormalizedResult(null);\r\n\r\n    if (controllerRef.current) {\r\n      try { controllerRef.current.abort(); } catch (e) {}\r\n    }\r\n    const controller = new AbortController();\r\n    controllerRef.current = controller;\r\n\r\n    // Backends (update host if needed)\r\n    const baseTaxonomyBackend = \"http://192.168.0.2:8000/taxonomy\";\r\n    const baseOtolithBackend = \"http://192.168.0.2:8000/otolith\";\r\n    const baseEdnaBackend = \"http://192.168.0.2:8000\"; // base for eDNA endpoints\r\n\r\n    try {\r\n      if (domain === \"Taxonomy\") {\r\n        let route = \"/list\";\r\n        if (taxAction === \"list\") route = \"/list\";\r\n        else if (taxAction === \"species\") route = `/species/${encodeURIComponent(taxScientificName)}`;\r\n        else if (taxAction === \"filter\") route = \"/filter\";\r\n        const suffix = route.replace(/^\\/taxonomy/, \"\");\r\n        const taxonomyUrl = `${baseTaxonomyBackend}${suffix}`;\r\n\r\n        let q = \"\";\r\n        if (taxAction === \"filter\") {\r\n          const qp = [];\r\n          if (taxFamily) qp.push(`family=${encodeURIComponent(taxFamily)}`);\r\n          if (taxGenus) qp.push(`genus=${encodeURIComponent(taxGenus)}`);\r\n          if (taxOrder) qp.push(`order=${encodeURIComponent(taxOrder)}`);\r\n          q = qp.length ? `?${qp.join(\"&\")}` : \"\";\r\n        } else if (taxAction === \"list\") {\r\n          if (taxListCount) q = `?limit=${encodeURIComponent(taxListCount)}&offset=0`; else q = `?offset=0`;\r\n        }\r\n\r\n        try {\r\n          const resp = await axios.get(`${taxonomyUrl}${q}`, {\r\n            responseType: \"json\",\r\n            timeout: 45000,\r\n            signal: controller.signal,\r\n            headers: { Accept: \"application/json\" },\r\n          });\r\n          if (!mountedRef.current) return;\r\n          const normalized = normalizeResponse(resp.data);\r\n          setNormalizedResult(normalized);\r\n          setError(null);\r\n          return;\r\n        } catch (getErr) {\r\n          try {\r\n            const postResp = await axios.post(`${baseTaxonomyBackend}${suffix}`, {\r\n              taxonomy_action: taxAction,\r\n              count: taxListCount,\r\n              scientific_name: taxScientificName,\r\n              family: taxFamily,\r\n              genus: taxGenus,\r\n              order: taxOrder,\r\n            }, {\r\n              responseType: \"json\",\r\n              timeout: 45000,\r\n              signal: controller.signal,\r\n              headers: { \"Content-Type\": \"application/json\", Accept: \"application/json\" }\r\n            });\r\n            if (!mountedRef.current) return;\r\n            const normalized = normalizeResponse(postResp.data);\r\n            setNormalizedResult(normalized);\r\n            setError(null);\r\n            return;\r\n          } catch (postErr) {\r\n            throw postErr || getErr;\r\n          }\r\n        }\r\n      } else if (domain === \"Otolith\") {\r\n        let route = \"/list\";\r\n        if (otAction === \"list\") route = \"/list\";\r\n        else if (otAction === \"byid\") route = `/by-otolithid/${encodeURIComponent(otOtolithID)}`;\r\n        const suffix = route.replace(/^\\/otolith/, \"\");\r\n        const otolithUrl = `${baseOtolithBackend}${suffix}`;\r\n\r\n        let q = \"\";\r\n        if (otAction === \"list\") {\r\n          if (otListCount) q = `?limit=${encodeURIComponent(otListCount)}&offset=0`; else q = `?offset=0`;\r\n        }\r\n\r\n        try {\r\n          const resp = await axios.get(`${otolithUrl}${q}`, {\r\n            responseType: \"json\",\r\n            timeout: 45000,\r\n            signal: controller.signal,\r\n            headers: { Accept: \"application/json\" },\r\n          });\r\n          if (!mountedRef.current) return;\r\n          const normalized = normalizeResponse(resp.data);\r\n          setNormalizedResult(normalized);\r\n          setError(null);\r\n          return;\r\n        } catch (getErr) {\r\n          try {\r\n            const postResp = await axios.post(`${baseOtolithBackend}${suffix}`, {\r\n              action: otAction,\r\n              count: otListCount,\r\n              otolith_id: otOtolithID,\r\n            }, {\r\n              responseType: \"json\",\r\n              timeout: 45000,\r\n              signal: controller.signal,\r\n              headers: { \"Content-Type\": \"application/json\", Accept: \"application/json\" }\r\n            });\r\n            if (!mountedRef.current) return;\r\n            const normalized = normalizeResponse(postResp.data);\r\n            setNormalizedResult(normalized);\r\n            setError(null);\r\n            return;\r\n          } catch (postErr) {\r\n            throw postErr || getErr;\r\n          }\r\n        }\r\n      } else if (domain === \"eDNA\") {\r\n        // eDNA actions\r\n        if (edAction === \"analyze\") {\r\n          const analyzeTxtUrl = `${baseEdnaBackend}/edna/analyze`;\r\n          const analyzeJsonUrl = `${baseEdnaBackend}/post/edna/analyze`;\r\n\r\n          // Try text/plain first\r\n          try {\r\n            const resp = await axios.post(analyzeTxtUrl, edFastaText, {\r\n              responseType: \"json\",\r\n              timeout: 90000,\r\n              signal: controller.signal,\r\n              headers: { \"Content-Type\": \"text/plain\", Accept: \"application/json\" },\r\n            });\r\n            if (!mountedRef.current) return;\r\n            const normalized = normalizeResponse(resp.data);\r\n            setNormalizedResult(normalized);\r\n            setError(null);\r\n            return;\r\n          } catch (txtErr) {\r\n            // If text/plain failed, try JSON endpoint as fallback\r\n            try {\r\n              const resp2 = await axios.post(analyzeJsonUrl, { fasta: edFastaText }, {\r\n                responseType: \"json\",\r\n                timeout: 90000,\r\n                signal: controller.signal,\r\n                headers: { \"Content-Type\": \"application/json\", Accept: \"application/json\" },\r\n              });\r\n              if (!mountedRef.current) return;\r\n              const normalized = normalizeResponse(resp2.data);\r\n              setNormalizedResult(normalized);\r\n              setError(null);\r\n              return;\r\n            } catch (jsonErr) {\r\n              throw txtErr || jsonErr;\r\n            }\r\n          }\r\n        } else if (edAction === \"upload\") {\r\n          // NEW: route uploads to /edna/upload_files\r\n          const urlBase = `${baseEdnaBackend}/edna/upload-fasta`;\r\n\r\n          // Candidate field names to try when server expects different multipart field name\r\n          const candidateFieldNames = [\"fasta\", \"file\", \"fasta_file\", \"upload\"];\r\n\r\n          // Build base FormData once (we will clone for each attempt)\r\n          const buildForm = (fieldName) => {\r\n            const f = new FormData();\r\n            f.append(fieldName, edFile, edFile.name);\r\n            // include optional metadata as convenience (server may accept them)\r\n            f.append(\"original_filename\", edFile.name);\r\n            return f;\r\n          };\r\n\r\n          let lastErr = null;\r\n          for (let i = 0; i < candidateFieldNames.length; i++) {\r\n            const field = candidateFieldNames[i];\r\n            const form = buildForm(field);\r\n            try {\r\n              // IMPORTANT: do NOT set Content-Type (browser/axios will set boundary)\r\n              const resp = await axios.post(urlBase, form, {\r\n                responseType: \"json\",\r\n                timeout: 120000,\r\n                signal: controller.signal,\r\n                headers: { Accept: \"application/json\" } // no Content-Type\r\n              });\r\n              if (!mountedRef.current) return;\r\n              const normalized = normalizeResponse(resp.data);\r\n              setNormalizedResult(normalized);\r\n              setError(null);\r\n              return;\r\n            } catch (errAttempt) {\r\n              lastErr = errAttempt;\r\n              // If server returned 422, try next field name. Otherwise break and rethrow.\r\n              const status = errAttempt?.response?.status;\r\n              if (status === 422) {\r\n                // try next candidate\r\n                continue;\r\n              } else {\r\n                throw errAttempt;\r\n              }\r\n            }\r\n          }\r\n\r\n          // If we exhausted candidates and still failed, throw lastErr to be handled below\r\n          if (lastErr) throw lastErr;\r\n        }\r\n      }\r\n    } catch (err) {\r\n      if (!mountedRef.current) return;\r\n      console.error(\"Request failed:\", err);\r\n\r\n      // Better error message extraction\r\n      if (err.response) {\r\n        const data = err.response.data;\r\n        let msg;\r\n        try {\r\n          if (typeof data === \"string\") msg = data;\r\n          else if (typeof data === \"object\") msg = JSON.stringify(data, null, 2);\r\n          else msg = String(data);\r\n        } catch (e) {\r\n          msg = String(data);\r\n        }\r\n        setError(new Error(`Server returned ${err.response.status}: ${msg}`));\r\n      } else if (err.request) {\r\n        setError(new Error(\"No response from server. Check backend & CORS.\"));\r\n      } else {\r\n        setError(new Error(err.message || \"Unknown error\"));\r\n      }\r\n    } finally {\r\n      if (mountedRef.current) setLoading(false);\r\n    }\r\n  }, [\r\n    domain,\r\n    taxAction, taxListCount, taxScientificName, taxFamily, taxGenus, taxOrder,\r\n    otAction, otListCount, otOtolithID,\r\n    edAction, edFastaText, edFile\r\n  ]);\r\n\r\n  return (\r\n    <div className=\"ins-layout\">\r\n      <div className=\"ins-banner\">\r\n        <span className=\"ins-banner-label\">DATA INSIGHTS</span>\r\n        <span className=\"ins-banner-sub\">Switch domain to view taxonomy, otolith or eDNA endpoints</span>\r\n      </div>\r\n\r\n      <section className=\"ins-grid\">\r\n        <div className=\"ins-panel ins-left\">\r\n          <h3 className=\"ins-title\">Controls</h3>\r\n          <p className=\"ins-text\">Choose a domain and action, provide inputs and Apply.</p>\r\n\r\n          {/* Domain selector */}\r\n          <div className=\"ins-field\">\r\n            <label>Domain</label>\r\n            <select value={domain} onChange={(e) => setDomain(e.target.value)}>\r\n              <option value=\"Taxonomy\">Taxonomy</option>\r\n              <option value=\"Otolith\">Otolith</option>\r\n              <option value=\"eDNA\">eDNA</option>\r\n            </select>\r\n          </div>\r\n\r\n          {/* Taxonomy UI */}\r\n          {domain === \"Taxonomy\" && (\r\n            <>\r\n              <div className=\"ins-field\">\r\n                <label>Select:</label>\r\n                <select value={taxAction} onChange={(e) => { setTaxAction(e.target.value); setNormalizedResult(null); }}>\r\n                  <option value=\"\">-- choose action --</option>\r\n                  <option value=\"list\">List Species</option>\r\n                  <option value=\"species\">Species Taxonomy</option>\r\n                  <option value=\"filter\">Filter Taxonomy</option>\r\n                </select>\r\n              </div>\r\n\r\n              {taxAction === \"list\" && (\r\n                <div className=\"ins-field\">\r\n                  <label>Enter number of species</label>\r\n                  <input placeholder=\"Enter number of species\" value={taxListCount} onChange={(e) => setTaxListCount(e.target.value)} />\r\n                  <small className=\"ins-note\">Requests /taxonomy/list?limit=&offset=0</small>\r\n                </div>\r\n              )}\r\n\r\n              {taxAction === \"species\" && (\r\n                <div className=\"ins-field\">\r\n                  <label>Enter Scientific Name</label>\r\n                  <input placeholder=\"Enter Scientific Name\" value={taxScientificName} onChange={(e) => setTaxScientificName(e.target.value)} />\r\n                  <small className=\"ins-note\">Requests /taxonomy/species/{`{name}`}</small>\r\n                </div>\r\n              )}\r\n\r\n              {taxAction === \"filter\" && (\r\n                <>\r\n                  <div className=\"ins-field\"><label>Family</label><input placeholder=\"Enter Family\" value={taxFamily} onChange={(e) => setTaxFamily(e.target.value)} /></div>\r\n                  <div className=\"ins-field\"><label>Genus</label><input placeholder=\"Enter Genus\" value={taxGenus} onChange={(e) => setTaxGenus(e.target.value)} /></div>\r\n                  <div className=\"ins-field\"><label>Order</label><input placeholder=\"Enter Order\" value={taxOrder} onChange={(e) => setTaxOrder(e.target.value)} /></div>\r\n                  <small className=\"ins-note\">Requests /taxonomy/filter?family=&genus=&order=</small>\r\n                </>\r\n              )}\r\n            </>\r\n          )}\r\n\r\n          {/* Otolith UI */}\r\n          {domain === \"Otolith\" && (\r\n            <>\r\n              <div className=\"ins-field\">\r\n                <label>Select:</label>\r\n                <select value={otAction} onChange={(e) => { setOtAction(e.target.value); setNormalizedResult(null); }}>\r\n                  <option value=\"\">-- choose action --</option>\r\n                  <option value=\"list\">List Species</option>\r\n                  <option value=\"byid\">Get by Otolith ID</option>\r\n                </select>\r\n              </div>\r\n\r\n              {otAction === \"list\" && (\r\n                <div className=\"ins-field\">\r\n                  <label>Enter number of species</label>\r\n                  <input placeholder=\"Enter number of species\" value={otListCount} onChange={(e) => setOtListCount(e.target.value)} />\r\n                  <small className=\"ins-note\">Requests /otolith/list?limit=&offset=0</small>\r\n                </div>\r\n              )}\r\n\r\n              {otAction === \"byid\" && (\r\n                <div className=\"ins-field\">\r\n                  <label>Enter OtolithID</label>\r\n                  <input placeholder=\"Enter OtolithID\" value={otOtolithID} onChange={(e) => setOtOtolithID(e.target.value)} />\r\n                  <small className=\"ins-note\">Requests /otolith/by-otolithid/{`{id}`}</small>\r\n                </div>\r\n              )}\r\n            </>\r\n          )}\r\n\r\n          {/* eDNA UI */}\r\n          {domain === \"eDNA\" && (\r\n            <>\r\n              <div className=\"ins-field\">\r\n                <label>Select:</label>\r\n                <select value={edAction} onChange={(e) => { setEdAction(e.target.value); setNormalizedResult(null); }}>\r\n                  <option value=\"\">-- choose action --</option>\r\n                  <option value=\"analyze\">FASTA Analysis</option>\r\n                  <option value=\"upload\">Upload FASTA File</option>\r\n                </select>\r\n              </div>\r\n\r\n              {edAction === \"analyze\" && (\r\n                <div className=\"ins-field\">\r\n                  <label>Enter FASTA Code</label>\r\n                  <textarea\r\n                    placeholder=\"Enter FASTA Code (start with >header line)\"\r\n                    value={edFastaText}\r\n                    onChange={(e) => setEdFastaText(e.target.value)}\r\n                    rows={6}\r\n                  />\r\n                  <small className=\"ins-note\">POST /edna/analyze with Content-Type: text/plain (fallback /post/edna/analyze)</small>\r\n                </div>\r\n              )}\r\n\r\n              {edAction === \"upload\" && (\r\n                <>\r\n                  <div className=\"ins-field\">\r\n                    <label>Upload FASTA File</label>\r\n                    <input\r\n                      type=\"file\"\r\n                      accept=\".fasta,.fa,.fna\"\r\n                      onChange={(e) => {\r\n                        const f = e.target.files && e.target.files[0];\r\n                        onFileSelect(f || null);\r\n                      }}\r\n                    />\r\n                    <small className=\"ins-note\">POST /edna/upload_files (multipart/form-data). Field names tried: fasta,file,fasta_file,upload</small>\r\n                  </div>\r\n\r\n                  {edFile && (\r\n                    <div style={{ marginTop: 8, color: \"#cfe7ff\" }}>\r\n                      <div><strong>Selected:</strong> {edFile.name} — {(edFile.size/1024).toFixed(1)} KB</div>\r\n                      <div style={{ marginTop: 6 }}>\r\n                        <strong>Preview (first non-empty line):</strong>\r\n                        <div style={{ marginTop: 6, background: \"rgba(2,6,23,0.5)\", padding: 8, borderRadius: 6, color: \"#dbeafe\" }}>\r\n                          <code style={{ whiteSpace: \"pre-wrap\" }}>{edFilePreviewLine || \"—\"}</code>\r\n                        </div>\r\n                        {edFileWarning && <div style={{ marginTop: 6, color: \"#ffcccb\" }}>{edFileWarning}</div>}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </>\r\n              )}\r\n            </>\r\n          )}\r\n\r\n          <div style={{ marginTop: 10 }}>\r\n            <button className=\"ins-action-btn\" onClick={handleApply} disabled={loading}>{loading ? \"Fetching…\" : \"Apply\"}</button>\r\n          </div>\r\n\r\n          {error && <div style={{ marginTop: 10, color: \"#ffbdbd\", whiteSpace: \"pre-wrap\" }}>{error.message}</div>}\r\n        </div>\r\n\r\n        <div className=\"ins-panel ins-right\">\r\n          <h3 className=\"ins-title\">Results</h3>\r\n          <p className=\"ins-text\">Response will appear here (table + cards). All keys are shown as columns.</p>\r\n\r\n          {normalizedResult ? (\r\n            <DataResultView normalized={normalizedResult} />\r\n          ) : loading ? (\r\n            <div style={{ color: \"#9fb4d8\" }}>Fetching data…</div>\r\n          ) : (\r\n            <div style={{ color: \"#9ca3af\" }}>\r\n              <p>No response yet. Choose domain + action and click Apply.</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </section>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DataInsightsModule;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}